/**
 * KDaViF Library v4.3 2020-07-20
 * Copyright Konan Technology Inc., All rights reserved.
 * https://www.pulsek.com/
 **/

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).d3=t.d3||{})}(this,function(t){"use strict";function e(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function n(t){var n;return 1===t.length&&(n=t,t=function(t,r){return e(n(t),r)}),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)<0?r=a+1:i=a}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)>0?i=a:r=a+1}return r}}}var r=n(e),i=r.right,a=r.left;function o(t,e){return[t,e]}function s(t){return null===t?NaN:+t}function l(t,e){var n,r,i=t.length,a=0,o=-1,l=0,u=0;if(null==e)for(;++o<i;)isNaN(n=s(t[o]))||(u+=(r=n-l)*(n-(l+=r/++a)));else for(;++o<i;)isNaN(n=s(e(t[o],o,t)))||(u+=(r=n-l)*(n-(l+=r/++a)));if(a>1)return u/(a-1)}function u(t,e){var n=l(t,e);return n?Math.sqrt(n):n}function c(t,e){var n,r,i,a=t.length,o=-1;if(null==e){for(;++o<a;)if(null!=(n=t[o])&&n>=n)for(r=i=n;++o<a;)null!=(n=t[o])&&(r>n&&(r=n),i<n&&(i=n))}else for(;++o<a;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=i=n;++o<a;)null!=(n=e(t[o],o,t))&&(r>n&&(r=n),i<n&&(i=n));return[r,i]}var f=Array.prototype,h=f.slice,d=f.map;function p(t){return function(){return t}}function g(t){return t}function y(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(i);++r<i;)a[r]=t+r*n;return a}var v=Math.sqrt(50),m=Math.sqrt(10),x=Math.sqrt(2);function b(t,e,n){var r,i,a,o,s=-1;if(n=+n,(t=+t)==(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(o=_(t,e,n))||!isFinite(o))return[];if(o>0)for(t=Math.ceil(t/o),e=Math.floor(e/o),a=new Array(i=Math.ceil(e-t+1));++s<i;)a[s]=(t+s)*o;else for(t=Math.floor(t*o),e=Math.ceil(e*o),a=new Array(i=Math.ceil(t-e+1));++s<i;)a[s]=(t-s)/o;return r&&a.reverse(),a}function _(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=v?10:a>=m?5:a>=x?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=v?10:a>=m?5:a>=x?2:1)}function w(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=v?i*=10:a>=m?i*=5:a>=x&&(i*=2),e<t?-i:i}function k(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}function M(t,e,n){if(null==n&&(n=s),r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),o=+n(t[a],a,t);return o+(+n(t[a+1],a+1,t)-o)*(i-a)}}function A(t,e){var n,r,i=t.length,a=-1;if(null==e){for(;++a<i;)if(null!=(n=t[a])&&n>=n)for(r=n;++a<i;)null!=(n=t[a])&&n>r&&(r=n)}else for(;++a<i;)if(null!=(n=e(t[a],a,t))&&n>=n)for(r=n;++a<i;)null!=(n=e(t[a],a,t))&&n>r&&(r=n);return r}function T(t){for(var e,n,r,i=t.length,a=-1,o=0;++a<i;)o+=t[a].length;for(n=new Array(o);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--o]=r[e];return n}function C(t,e){var n,r,i=t.length,a=-1;if(null==e){for(;++a<i;)if(null!=(n=t[a])&&n>=n)for(r=n;++a<i;)null!=(n=t[a])&&r>n&&(r=n)}else for(;++a<i;)if(null!=(n=e(t[a],a,t))&&n>=n)for(r=n;++a<i;)null!=(n=e(t[a],a,t))&&r>n&&(r=n);return r}function E(t){if(!(i=t.length))return[];for(var e=-1,n=C(t,N),r=new Array(n);++e<n;)for(var i,a=-1,o=r[e]=new Array(i);++a<i;)o[a]=t[a][e];return r}function N(t){return t.length}var R=Array.prototype.slice;function S(t){return t}var P=1,z=2,O=3,L=4,D=1e-6;function I(t){return"translate("+(t+.5)+",0)"}function B(t){return"translate(0,"+(t+.5)+")"}function j(){return!this.__axis}function Y(t,e){var n=[],r=null,i=null,a=6,o=6,s=3,l=t===P||t===L?-1:1,u=t===L||t===z?"x":"y",c=t===P||t===O?I:B;function f(f){var h=null==r?e.ticks?e.ticks.apply(e,n):e.domain():r,d=null==i?e.tickFormat?e.tickFormat.apply(e,n):S:i,p=Math.max(a,0)+s,g=e.range(),y=+g[0]+.5,v=+g[g.length-1]+.5,m=(e.bandwidth?function(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return+t(n)+e}}:function(t){return function(e){return+t(e)}})(e.copy()),x=f.selection?f.selection():f,b=x.selectAll(".domain").data([null]),_=x.selectAll(".tick").data(h,e).order(),w=_.exit(),k=_.enter().append("g").attr("class","tick"),M=_.select("line"),A=_.select("text");b=b.merge(b.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),_=_.merge(k),M=M.merge(k.append("line").attr("stroke","currentColor").attr(u+"2",l*a)),A=A.merge(k.append("text").attr("fill","currentColor").attr(u,l*p).attr("dy",t===P?"0em":t===O?"0.71em":"0.32em")),f!==x&&(b=b.transition(f),_=_.transition(f),M=M.transition(f),A=A.transition(f),w=w.transition(f).attr("opacity",D).attr("transform",function(t){return isFinite(t=m(t))?c(t):this.getAttribute("transform")}),k.attr("opacity",D).attr("transform",function(t){var e=this.parentNode.__axis;return c(e&&isFinite(e=e(t))?e:m(t))})),w.remove(),b.attr("d",t===L||t==z?o?"M"+l*o+","+y+"H0.5V"+v+"H"+l*o:"M0.5,"+y+"V"+v:o?"M"+y+","+l*o+"V0.5H"+v+"V"+l*o:"M"+y+",0.5H"+v),_.attr("opacity",1).attr("transform",function(t){return c(m(t))}),M.attr(u+"2",l*a),A.attr(u,l*p).text(d),x.filter(j).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===z?"start":t===L?"end":"middle"),x.each(function(){this.__axis=m})}return f.scale=function(t){return arguments.length?(e=t,f):e},f.ticks=function(){return n=R.call(arguments),f},f.tickArguments=function(t){return arguments.length?(n=null==t?[]:R.call(t),f):n.slice()},f.tickValues=function(t){return arguments.length?(r=null==t?null:R.call(t),f):r&&r.slice()},f.tickFormat=function(t){return arguments.length?(i=t,f):i},f.tickSize=function(t){return arguments.length?(a=o=+t,f):a},f.tickSizeInner=function(t){return arguments.length?(a=+t,f):a},f.tickSizeOuter=function(t){return arguments.length?(o=+t,f):o},f.tickPadding=function(t){return arguments.length?(s=+t,f):s},f}var H={value:function(){}};function U(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new q(r)}function q(t){this._=t}function F(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function W(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=H,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}q.prototype=U.prototype={constructor:q,on:function(t,e){var n,r=this._,i=function(t,e){return t.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}(t+"",r),a=-1,o=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<o;)if(n=(t=i[a]).type)r[n]=W(r[n],t.name,e);else if(null==e)for(n in r)r[n]=W(r[n],t.name,null);return this}for(;++a<o;)if((n=(t=i[a]).type)&&(n=F(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new q(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,n=(r=this._[t]).length;a<n;++a)r[a].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};var $="http://www.w3.org/1999/xhtml",G={svg:"http://www.w3.org/2000/svg",xhtml:$,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function V(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),G.hasOwnProperty(e)?{space:G[e],local:t}:t}function X(t){var e=V(t);return(e.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===$&&e.documentElement.namespaceURI===$?e.createElement(t):e.createElementNS(n,t)}})(e)}function J(){}function Z(t){return null==t?J:function(){return this.querySelector(t)}}function K(){return[]}function Q(t){return null==t?K:function(){return this.querySelectorAll(t)}}function tt(t){return function(){return this.matches(t)}}function et(t){return new Array(t.length)}function nt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}nt.prototype={constructor:nt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var rt="$";function it(t,e,n,r,i,a){for(var o,s=0,l=e.length,u=a.length;s<u;++s)(o=e[s])?(o.__data__=a[s],r[s]=o):n[s]=new nt(t,a[s]);for(;s<l;++s)(o=e[s])&&(i[s]=o)}function at(t,e,n,r,i,a,o){var s,l,u,c={},f=e.length,h=a.length,d=new Array(f);for(s=0;s<f;++s)(l=e[s])&&(d[s]=u=rt+o.call(l,l.__data__,s,e),u in c?i[s]=l:c[u]=l);for(s=0;s<h;++s)(l=c[u=rt+o.call(t,a[s],s,a)])?(r[s]=l,l.__data__=a[s],c[u]=null):n[s]=new nt(t,a[s]);for(s=0;s<f;++s)(l=e[s])&&c[d[s]]===l&&(i[s]=l)}function ot(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function st(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function lt(t,e){return t.style.getPropertyValue(e)||st(t).getComputedStyle(t,null).getPropertyValue(e)}function ut(t){return t.trim().split(/^|\s+/)}function ct(t){return t.classList||new ft(t)}function ft(t){this._node=t,this._names=ut(t.getAttribute("class")||"")}function ht(t,e){for(var n=ct(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function dt(t,e){for(var n=ct(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function pt(){this.textContent=""}function gt(){this.innerHTML=""}function yt(){this.nextSibling&&this.parentNode.appendChild(this)}function vt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function mt(){return null}function xt(){var t=this.parentNode;t&&t.removeChild(this)}function bt(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function _t(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}ft.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var wt={};function kt(t,e,n){return t=Mt(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function Mt(e,n,r){return function(i){var a=t.event;t.event=i;try{e.call(this,this.__data__,n,r)}finally{t.event=a}}}function At(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,a=e.length;r<a;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function Tt(t,e,n){var r=wt.hasOwnProperty(t.type)?kt:Mt;return function(i,a,o){var s,l=this.__on,u=r(e,a,o);if(l)for(var c=0,f=l.length;c<f;++c)if((s=l[c]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=u,s.capture=n),void(s.value=e);this.addEventListener(t.type,u,n),s={type:t.type,name:t.name,value:e,listener:u,capture:n},l?l.push(s):this.__on=[s]}}function Ct(e,n,r,i){var a=t.event;e.sourceEvent=t.event,t.event=e;try{return n.apply(r,i)}finally{t.event=a}}function Et(t,e,n){var r=st(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}t.event=null,"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(wt={mouseenter:"mouseover",mouseleave:"mouseout"}));var Nt=[null];function Rt(t,e){this._groups=t,this._parents=e}function St(){return new Rt([[document.documentElement]],Nt)}function Pt(t){return"string"==typeof t?new Rt([[document.querySelector(t)]],[document.documentElement]):new Rt([[t]],Nt)}Rt.prototype=St.prototype={constructor:Rt,select:function(t){"function"!=typeof t&&(t=Z(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o,s=e[i],l=s.length,u=r[i]=new Array(l),c=0;c<l;++c)(a=s[c])&&(o=t.call(a,a.__data__,c,s))&&("__data__"in a&&(o.__data__=a.__data__),u[c]=o);return new Rt(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=Q(t));for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o,s=e[a],l=s.length,u=0;u<l;++u)(o=s[u])&&(r.push(t.call(o,o.__data__,u,s)),i.push(o));return new Rt(r,i)},filter:function(t){"function"!=typeof t&&(t=tt(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o=e[i],s=o.length,l=r[i]=[],u=0;u<s;++u)(a=o[u])&&t.call(a,a.__data__,u,o)&&l.push(a);return new Rt(r,this._parents)},data:function(t,e){if(!t)return d=new Array(this.size()),u=-1,this.each(function(t){d[++u]=t}),d;var n=e?at:it,r=this._parents,i=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var a=i.length,o=new Array(a),s=new Array(a),l=new Array(a),u=0;u<a;++u){var c=r[u],f=i[u],h=f.length,d=t.call(c,c&&c.__data__,u,r),p=d.length,g=s[u]=new Array(p),y=o[u]=new Array(p);n(c,f,g,y,l[u]=new Array(h),d,e);for(var v,m,x=0,b=0;x<p;++x)if(v=g[x]){for(x>=b&&(b=x+1);!(m=y[b])&&++b<p;);v._next=m||null}}return(o=new Rt(o,r))._enter=s,o._exit=l,o},enter:function(){return new Rt(this._enter||this._groups.map(et),this._parents)},exit:function(){return new Rt(this._exit||this._groups.map(et),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,a=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=e&&(i=e(i)),null==n?a.remove():n(a),r&&i?r.merge(i).order():i},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var l,u=e[s],c=n[s],f=u.length,h=o[s]=new Array(f),d=0;d<f;++d)(l=u[d]||c[d])&&(h[d]=l);for(;s<r;++s)o[s]=e[s];return new Rt(o,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=ot);for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o,s=n[a],l=s.length,u=i[a]=new Array(l),c=0;c<l;++c)(o=s[c])&&(u[c]=o);u.sort(e)}return new Rt(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,a=e[n],o=0,s=a.length;o<s;++o)(i=a[o])&&t.call(i,i.__data__,o,a);return this},attr:function(t,e){var n=V(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?n.local?function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}:function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}:n.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}:function(t,e,n){return function(){this.style.setProperty(t,e,n)}})(t,e,null==n?"":n)):lt(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var n=ut(t+"");if(arguments.length<2){for(var r=ct(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?ht:dt)(this,t)}}:e?function(t){return function(){ht(this,t)}}:function(t){return function(){dt(this,t)}})(n,e))},text:function(t){return arguments.length?this.each(null==t?pt:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?gt:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(yt)},lower:function(){return this.each(vt)},append:function(t){var e="function"==typeof t?t:X(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:X(t),r=null==e?mt:"function"==typeof e?e:Z(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(xt)},clone:function(t){return this.select(t?_t:bt)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,a=function(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}(t+""),o=a.length;if(!(arguments.length<2)){for(s=e?Tt:At,null==n&&(n=!1),r=0;r<o;++r)this.each(s(a[r],e,n));return this}var s=this.node().__on;if(s)for(var l,u=0,c=s.length;u<c;++u)for(r=0,l=s[u];r<o;++r)if((i=a[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return Et(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return Et(this,t,e)}})(t,e))}};var zt=0;function Ot(){return new Lt}function Lt(){this._="@"+(++zt).toString(36)}function Dt(){for(var e,n=t.event;e=n.sourceEvent;)n=e;return n}function It(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}function Bt(t){var e=Dt();return e.changedTouches&&(e=e.changedTouches[0]),It(t,e)}function jt(t,e,n){arguments.length<3&&(n=e,e=Dt().changedTouches);for(var r,i=0,a=e?e.length:0;i<a;++i)if((r=e[i]).identifier===n)return It(t,r);return null}function Yt(){t.event.stopImmediatePropagation()}function Ht(){t.event.preventDefault(),t.event.stopImmediatePropagation()}function Ut(t){var e=t.document.documentElement,n=Pt(t).on("dragstart.drag",Ht,!0);"onselectstart"in e?n.on("selectstart.drag",Ht,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function qt(t,e){var n=t.document.documentElement,r=Pt(t).on("dragstart.drag",null);e&&(r.on("click.drag",Ht,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Ft(t){return function(){return t}}function Wt(t,e,n,r,i,a,o,s,l,u){this.target=t,this.type=e,this.subject=n,this.identifier=r,this.active=i,this.x=a,this.y=o,this.dx=s,this.dy=l,this._=u}function $t(){return!t.event.ctrlKey&&!t.event.button}function Gt(){return this.parentNode}function Vt(e){return null==e?{x:t.event.x,y:t.event.y}:e}function Xt(){return navigator.maxTouchPoints||"ontouchstart"in this}function Jt(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Zt(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Kt(){}Lt.prototype=Ot.prototype={constructor:Lt,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}},Wt.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var Qt="\\s*([+-]?\\d+)\\s*",te="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ee="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ne=/^#([0-9a-f]{3,8})$/,re=new RegExp("^rgb\\("+[Qt,Qt,Qt]+"\\)$"),ie=new RegExp("^rgb\\("+[ee,ee,ee]+"\\)$"),ae=new RegExp("^rgba\\("+[Qt,Qt,Qt,te]+"\\)$"),oe=new RegExp("^rgba\\("+[ee,ee,ee,te]+"\\)$"),se=new RegExp("^hsl\\("+[te,ee,ee]+"\\)$"),le=new RegExp("^hsla\\("+[te,ee,ee,te]+"\\)$"),ue={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ce(){return this.rgb().formatHex()}function fe(){return this.rgb().formatRgb()}function he(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ne.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?de(e):3===n?new ve(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?pe(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?pe(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=re.exec(t))?new ve(e[1],e[2],e[3],1):(e=ie.exec(t))?new ve(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=ae.exec(t))?pe(e[1],e[2],e[3],e[4]):(e=oe.exec(t))?pe(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=se.exec(t))?_e(e[1],e[2]/100,e[3]/100,1):(e=le.exec(t))?_e(e[1],e[2]/100,e[3]/100,e[4]):ue.hasOwnProperty(t)?de(ue[t]):"transparent"===t?new ve(NaN,NaN,NaN,0):null}function de(t){return new ve(t>>16&255,t>>8&255,255&t,1)}function pe(t,e,n,r){return r<=0&&(t=e=n=NaN),new ve(t,e,n,r)}function ge(t){return t instanceof Kt||(t=he(t)),t?new ve((t=t.rgb()).r,t.g,t.b,t.opacity):new ve}function ye(t,e,n,r){return 1===arguments.length?ge(t):new ve(t,e,n,null==r?1:r)}function ve(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function me(){return"#"+be(this.r)+be(this.g)+be(this.b)}function xe(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function be(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function _e(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Me(t,e,n,r)}function we(t){if(t instanceof Me)return new Me(t.h,t.s,t.l,t.opacity);if(t instanceof Kt||(t=he(t)),!t)return new Me;if(t instanceof Me)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,l=(a+i)/2;return s?(o=e===a?(n-r)/s+6*(n<r):n===a?(r-e)/s+2:(e-n)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new Me(o,s,l,t.opacity)}function ke(t,e,n,r){return 1===arguments.length?we(t):new Me(t,e,n,null==r?1:r)}function Me(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Ae(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}Jt(Kt,he,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:ce,formatHex:ce,formatHsl:function(){return we(this).formatHsl()},formatRgb:fe,toString:fe}),Jt(ve,ye,Zt(Kt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new ve(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new ve(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:me,formatHex:me,formatRgb:xe,toString:xe})),Jt(Me,ke,Zt(Kt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Me(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Me(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new ve(Ae(t>=240?t-240:t+120,i,r),Ae(t,i,r),Ae(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var Te=Math.PI/180,Ce=180/Math.PI,Ee=.96422,Ne=1,Re=.82521,Se=4/29,Pe=6/29,ze=3*Pe*Pe,Oe=Pe*Pe*Pe;function Le(t){if(t instanceof Ie)return new Ie(t.l,t.a,t.b,t.opacity);if(t instanceof Fe)return We(t);t instanceof ve||(t=ge(t));var e,n,r=He(t.r),i=He(t.g),a=He(t.b),o=Be((.2225045*r+.7168786*i+.0606169*a)/Ne);return r===i&&i===a?e=n=o:(e=Be((.4360747*r+.3850649*i+.1430804*a)/Ee),n=Be((.0139322*r+.0971045*i+.7141733*a)/Re)),new Ie(116*o-16,500*(e-o),200*(o-n),t.opacity)}function De(t,e,n,r){return 1===arguments.length?Le(t):new Ie(t,e,n,null==r?1:r)}function Ie(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function Be(t){return t>Oe?Math.pow(t,1/3):t/ze+Se}function je(t){return t>Pe?t*t*t:ze*(t-Se)}function Ye(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function He(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Ue(t){if(t instanceof Fe)return new Fe(t.h,t.c,t.l,t.opacity);if(t instanceof Ie||(t=Le(t)),0===t.a&&0===t.b)return new Fe(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*Ce;return new Fe(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function qe(t,e,n,r){return 1===arguments.length?Ue(t):new Fe(t,e,n,null==r?1:r)}function Fe(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function We(t){if(isNaN(t.h))return new Ie(t.l,0,0,t.opacity);var e=t.h*Te;return new Ie(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}Jt(Ie,De,Zt(Kt,{brighter:function(t){return new Ie(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Ie(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new ve(Ye(3.1338561*(e=Ee*je(e))-1.6168667*(t=Ne*je(t))-.4906146*(n=Re*je(n))),Ye(-.9787684*e+1.9161415*t+.033454*n),Ye(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),Jt(Fe,qe,Zt(Kt,{brighter:function(t){return new Fe(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Fe(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return We(this).rgb()}}));var $e=1.78277,Ge=-.29227,Ve=-.90649,Xe=1.97294,Je=Xe*Ve,Ze=Xe*$e,Ke=$e*Ge- -.14861*Ve;function Qe(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof tn)return new tn(t.h,t.s,t.l,t.opacity);t instanceof ve||(t=ge(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(Ke*r+Je*e-Ze*n)/(Ke+Je-Ze),a=r-i,o=(Xe*(n-i)-Ge*a)/Ve,s=Math.sqrt(o*o+a*a)/(Xe*i*(1-i)),l=s?Math.atan2(o,a)*Ce-120:NaN;return new tn(l<0?l+360:l,s,i,t.opacity)}(t):new tn(t,e,n,null==r?1:r)}function tn(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function en(t,e,n,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*r+o*i)/6}function nn(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],a=t[r+1],o=r>0?t[r-1]:2*i-a,s=r<e-1?t[r+2]:2*a-i;return en((n-r/e)*e,o,i,a,s)}}function rn(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],a=t[r%e],o=t[(r+1)%e],s=t[(r+2)%e];return en((n-r/e)*e,i,a,o,s)}}function an(t){return function(){return t}}function on(t,e){return function(n){return t+n*e}}function sn(t,e){var n=e-t;return n?on(t,n>180||n<-180?n-360*Math.round(n/360):n):an(isNaN(t)?e:t)}function ln(t,e){var n=e-t;return n?on(t,n):an(isNaN(t)?e:t)}Jt(tn,Qe,Zt(Kt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new tn(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new tn(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Te,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new ve(255*(e+n*(-.14861*r+$e*i)),255*(e+n*(Ge*r+Ve*i)),255*(e+n*(Xe*r)),this.opacity)}}));var un=function t(e){var n=function(t){return 1==(t=+t)?ln:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):an(isNaN(e)?n:e)}}(e);function r(t,e){var r=n((t=ye(t)).r,(e=ye(e)).r),i=n(t.g,e.g),a=n(t.b,e.b),o=ln(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=a(e),t.opacity=o(e),t+""}}return r.gamma=t,r}(1);function cn(t){return function(e){var n,r,i=e.length,a=new Array(i),o=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=ye(e[n]),a[n]=r.r||0,o[n]=r.g||0,s[n]=r.b||0;return a=t(a),o=t(o),s=t(s),r.opacity=1,function(t){return r.r=a(t),r.g=o(t),r.b=s(t),r+""}}}var fn=cn(nn),hn=cn(rn);function dn(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(a){for(n=0;n<r;++n)i[n]=t[n]*(1-a)+e[n]*a;return i}}function pn(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function gn(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=wn(t[n],e[n]);for(;n<r;++n)o[n]=e[n];return function(t){for(n=0;n<i;++n)o[n]=a[n](t);return o}}function yn(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function vn(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function mn(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=wn(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}var xn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,bn=new RegExp(xn.source,"g");function _n(t,e){var n,r,i,a=xn.lastIndex=bn.lastIndex=0,o=-1,s=[],l=[];for(t+="",e+="";(n=xn.exec(t))&&(r=bn.exec(e));)(i=r.index)>a&&(i=e.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,l.push({i:o,x:vn(n,r)})),a=bn.lastIndex;return a<e.length&&(i=e.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,r=0;r<e;++r)s[(n=l[r]).i]=n.x(t);return s.join("")})}function wn(t,e){var n,r=typeof e;return null==e||"boolean"===r?an(e):("number"===r?vn:"string"===r?(n=he(e))?(e=n,un):_n:e instanceof he?un:e instanceof Date?yn:pn(e)?dn:Array.isArray(e)?gn:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?mn:vn)(t,e)}function kn(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Mn,An,Tn,Cn,En=180/Math.PI,Nn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Rn(t,e,n,r,i,a){var o,s,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),t*r<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*En,skewX:Math.atan(l)*En,scaleX:o,scaleY:s}}function Sn(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(a,o){var s=[],l=[];return a=t(a),o=t(o),function(t,r,i,a,o,s){if(t!==i||r!==a){var l=o.push("translate(",null,e,null,n);s.push({i:l-4,x:vn(t,i)},{i:l-2,x:vn(r,a)})}else(i||a)&&o.push("translate("+i+e+a+n)}(a.translateX,a.translateY,o.translateX,o.translateY,s,l),function(t,e,n,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),l.push({i:n.push(i(n)+"rotate(",null,r)-2,x:vn(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(a.rotate,o.rotate,s),function(t,e,n,a){t!==e?l.push({i:n.push(i(n)+"skewX(",null,r)-2,x:vn(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(a.skewX,o.skewX,s),function(t,e,n,r,a,o){if(t!==n||e!==r){var s=a.push(i(a)+"scale(",null,",",null,")");o.push({i:s-4,x:vn(t,n)},{i:s-2,x:vn(e,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,s,l),a=o=null,function(t){for(var e,n=-1,r=l.length;++n<r;)s[(e=l[n]).i]=e.x(t);return s.join("")}}}var Pn=Sn(function(t){return"none"===t?Nn:(Mn||(Mn=document.createElement("DIV"),An=document.documentElement,Tn=document.defaultView),Mn.style.transform=t,t=Tn.getComputedStyle(An.appendChild(Mn),null).getPropertyValue("transform"),An.removeChild(Mn),Rn(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),zn=Sn(function(t){return null==t?Nn:(Cn||(Cn=document.createElementNS("http://www.w3.org/2000/svg","g")),Cn.setAttribute("transform",t),(t=Cn.transform.baseVal.consolidate())?Rn((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Nn)},", ",")",")"),On=Math.SQRT2,Ln=2,Dn=4,In=1e-12;function Bn(t){return((t=Math.exp(t))+1/t)/2}function jn(t,e){var n,r,i=t[0],a=t[1],o=t[2],s=e[0],l=e[1],u=e[2],c=s-i,f=l-a,h=c*c+f*f;if(h<In)r=Math.log(u/o)/On,n=function(t){return[i+t*c,a+t*f,o*Math.exp(On*t*r)]};else{var d=Math.sqrt(h),p=(u*u-o*o+Dn*h)/(2*o*Ln*d),g=(u*u-o*o-Dn*h)/(2*u*Ln*d),y=Math.log(Math.sqrt(p*p+1)-p),v=Math.log(Math.sqrt(g*g+1)-g);r=(v-y)/On,n=function(t){var e=t*r,n=Bn(y),s=o/(Ln*d)*(n*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(On*e+y)-function(t){return((t=Math.exp(t))-1/t)/2}(y));return[i+s*c,a+s*f,o*n/Bn(On*e+y)]}}return n.duration=1e3*r,n}function Yn(t){return function(e,n){var r=t((e=ke(e)).h,(n=ke(n)).h),i=ln(e.s,n.s),a=ln(e.l,n.l),o=ln(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=a(t),e.opacity=o(t),e+""}}}var Hn=Yn(sn),Un=Yn(ln);function qn(t){return function(e,n){var r=t((e=qe(e)).h,(n=qe(n)).h),i=ln(e.c,n.c),a=ln(e.l,n.l),o=ln(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=a(t),e.opacity=o(t),e+""}}}var Fn=qn(sn),Wn=qn(ln);function $n(t){return function e(n){function r(e,r){var i=t((e=Qe(e)).h,(r=Qe(r)).h),a=ln(e.s,r.s),o=ln(e.l,r.l),s=ln(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=a(t),e.l=o(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,r.gamma=e,r}(1)}var Gn,Vn,Xn=$n(sn),Jn=$n(ln),Zn=0,Kn=0,Qn=0,tr=1e3,er=0,nr=0,rr=0,ir="object"==typeof performance&&performance.now?performance:Date,ar="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function or(){return nr||(ar(sr),nr=ir.now()+rr)}function sr(){nr=0}function lr(){this._call=this._time=this._next=null}function ur(t,e,n){var r=new lr;return r.restart(t,e,n),r}function cr(){or(),++Zn;for(var t,e=Gn;e;)(t=nr-e._time)>=0&&e._call.call(null,t),e=e._next;--Zn}function fr(){nr=(er=ir.now())+rr,Zn=Kn=0;try{cr()}finally{Zn=0,function(){for(var t,e,n=Gn,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Gn=e);Vn=t,dr(r)}(),nr=0}}function hr(){var t=ir.now(),e=t-er;e>tr&&(rr-=e,er=t)}function dr(t){Zn||(Kn&&(Kn=clearTimeout(Kn)),t-nr>24?(t<1/0&&(Kn=setTimeout(fr,t-ir.now()-rr)),Qn&&(Qn=clearInterval(Qn))):(Qn||(er=ir.now(),Qn=setInterval(hr,tr)),Zn=1,ar(fr)))}function pr(t,e,n){var r=new lr;return e=null==e?0:+e,r.restart(function(n){r.stop(),t(n+e)},e,n),r}lr.prototype=ur.prototype={constructor:lr,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?or():+n)+(null==e?0:+e),this._next||Vn===this||(Vn?Vn._next=this:Gn=this,Vn=this),this._call=t,this._time=n,dr()},stop:function(){this._call&&(this._call=null,this._time=1/0,dr())}};var gr=U("start","end","cancel","interrupt"),yr=[],vr=0,mr=1,xr=2,br=3,_r=4,wr=5,kr=6;function Mr(t,e,n,r,i,a){var o=t.__transition;if(o){if(n in o)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function a(l){var u,c,f,h;if(n.state!==mr)return s();for(u in i)if((h=i[u]).name===n.name){if(h.state===br)return pr(a);h.state===_r?(h.state=kr,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete i[u]):+u<e&&(h.state=kr,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete i[u])}if(pr(function(){n.state===br&&(n.state=_r,n.timer.restart(o,n.delay,n.time),o(l))}),n.state=xr,n.on.call("start",t,t.__data__,n.index,n.group),n.state===xr){for(n.state=br,r=new Array(f=n.tween.length),u=0,c=-1;u<f;++u)(h=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(r[++c]=h);r.length=c+1}}function o(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(s),n.state=wr,1),a=-1,o=r.length;++a<o;)r[a].call(t,i);n.state===wr&&(n.on.call("end",t,t.__data__,n.index,n.group),s())}function s(){for(var r in n.state=kr,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=ur(function(t){n.state=mr,n.timer.restart(a,n.delay,n.time),n.delay<=t&&a(t-n.delay)},0,n.time)}(t,n,{name:e,index:r,group:i,on:gr,tween:yr,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:vr})}function Ar(t,e){var n=Cr(t,e);if(n.state>vr)throw new Error("too late; already scheduled");return n}function Tr(t,e){var n=Cr(t,e);if(n.state>br)throw new Error("too late; already running");return n}function Cr(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Er(t,e){var n,r,i,a=t.__transition,o=!0;if(a){for(i in e=null==e?null:e+"",a)(n=a[i]).name===e?(r=n.state>xr&&n.state<wr,n.state=kr,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete a[i]):o=!1;o&&delete t.__transition}}function Nr(t,e,n){var r=t._id;return t.each(function(){var t=Tr(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return Cr(t,r).value[e]}}function Rr(t,e){var n;return("number"==typeof e?vn:e instanceof he?un:(n=he(e))?(e=n,un):_n)(t,e)}var Sr=St.prototype.constructor;function Pr(t){return function(){this.style.removeProperty(t)}}var zr=0;function Or(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Lr(t){return St().transition(t)}function Dr(){return++zr}var Ir=St.prototype;function Br(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function jr(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}Or.prototype=Lr.prototype={constructor:Or,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Z(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s,l,u=r[o],c=u.length,f=a[o]=new Array(c),h=0;h<c;++h)(s=u[h])&&(l=t.call(s,s.__data__,h,u))&&("__data__"in s&&(l.__data__=s.__data__),f[h]=l,Mr(f[h],e,n,h,f,Cr(s,n)));return new Or(a,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Q(t));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var l,u=r[s],c=u.length,f=0;f<c;++f)if(l=u[f]){for(var h,d=t.call(l,l.__data__,f,u),p=Cr(l,n),g=0,y=d.length;g<y;++g)(h=d[g])&&Mr(h,e,n,g,d,p);a.push(d),o.push(l)}return new Or(a,o,e,n)},filter:function(t){"function"!=typeof t&&(t=tt(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o=e[i],s=o.length,l=r[i]=[],u=0;u<s;++u)(a=o[u])&&t.call(a,a.__data__,u,o)&&l.push(a);return new Or(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var l,u=e[s],c=n[s],f=u.length,h=o[s]=new Array(f),d=0;d<f;++d)(l=u[d]||c[d])&&(h[d]=l);for(;s<r;++s)o[s]=e[s];return new Or(o,this._parents,this._name,this._id)},selection:function(){return new Sr(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=Dr(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],l=s.length,u=0;u<l;++u)if(o=s[u]){var c=Cr(o,e);Mr(o,t,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Or(r,this._parents,t,n)},call:Ir.call,nodes:Ir.nodes,node:Ir.node,size:Ir.size,empty:Ir.empty,each:Ir.each,on:function(t,e){var n=this._id;return arguments.length<2?Cr(this.node(),n).on.on(t):this.each(function(t,e,n){var r,i,a=(e+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t})?Ar:Tr;return function(){var o=a(this,t),s=o.on;s!==r&&(i=(r=s).copy()).on(e,n),o.on=i}}(n,t,e))},attr:function(t,e){var n=V(t),r="transform"===n?zn:Rr;return this.attrTween(t,"function"==typeof e?(n.local?function(t,e,n){var r,i,a;return function(){var o,s,l=n(this);if(null!=l)return(o=this.getAttributeNS(t.space,t.local))===(s=l+"")?null:o===r&&s===i?a:(i=s,a=e(r=o,l));this.removeAttributeNS(t.space,t.local)}}:function(t,e,n){var r,i,a;return function(){var o,s,l=n(this);if(null!=l)return(o=this.getAttribute(t))===(s=l+"")?null:o===r&&s===i?a:(i=s,a=e(r=o,l));this.removeAttribute(t)}})(n,r,Nr(this,"attr."+t,e)):null==e?(n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(n):(n.local?function(t,e,n){var r,i,a=n+"";return function(){var o=this.getAttributeNS(t.space,t.local);return o===a?null:o===r?i:i=e(r=o,n)}}:function(t,e,n){var r,i,a=n+"";return function(){var o=this.getAttribute(t);return o===a?null:o===r?i:i=e(r=o,n)}})(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=V(t);return this.tween(n,(r.local?function(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}(t,i)),n}return i._value=e,i}:function(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}(t,i)),n}return i._value=e,i})(r,e))},style:function(t,e,n){var r="transform"==(t+="")?Pn:Rr;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var a=lt(this,t),o=(this.style.removeProperty(t),lt(this,t));return a===o?null:a===n&&o===r?i:i=e(n=a,r=o)}}(t,r)).on("end.style."+t,Pr(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,a;return function(){var o=lt(this,t),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(t),l=s=lt(this,t)),o===l?null:o===r&&l===i?a:(i=l,a=e(r=o,s))}}(t,r,Nr(this,"style."+t,e))).each(function(t,e){var n,r,i,a,o="style."+e,s="end."+o;return function(){var l=Tr(this,t),u=l.on,c=null==l.value[o]?a||(a=Pr(e)):void 0;u===n&&i===c||(r=(n=u).copy()).on(s,i=c),l.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,a=n+"";return function(){var o=lt(this,t);return o===a?null:o===r?i:i=e(r=o,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,function(t,e,n){var r,i;function a(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&function(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}(t,a,n)),r}return a._value=e,a}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(Nr(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&function(t){return function(e){this.textContent=t.call(this,e)}}(r)),e}return r._value=t,r}(t))},remove:function(){return this.on("end.remove",(t=this._id,function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}));var t},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=Cr(this.node(),n).tween,a=0,o=i.length;a<o;++a)if((r=i[a]).name===t)return r.value;return null}return this.each((null==e?function(t,e){var n,r;return function(){var i=Tr(this,t),a=i.tween;if(a!==n)for(var o=0,s=(r=n=a).length;o<s;++o)if(r[o].name===e){(r=r.slice()).splice(o,1);break}i.tween=r}}:function(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var a=Tr(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:e,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===e){i[l]=s;break}l===u&&i.push(s)}a.tween=i}})(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){Ar(this,t).delay=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){Ar(this,t).delay=e}})(e,t)):Cr(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){Tr(this,t).duration=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){Tr(this,t).duration=e}})(e,t)):Cr(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){Tr(this,t).ease=e}}(e,t)):Cr(this.node(),e).ease},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var s={value:o},l={value:function(){0==--i&&a()}};n.each(function(){var n=Tr(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(l)),n.on=e})})}};var Yr=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),Hr=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),Ur=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),qr=Math.PI,Fr=qr/2;function Wr(t){return(1-Math.cos(qr*t))/2}function $r(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}function Gr(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var Vr=4/11,Xr=6/11,Jr=8/11,Zr=.75,Kr=9/11,Qr=10/11,ti=.9375,ei=21/22,ni=63/64,ri=1/Vr/Vr;function ii(t){return(t=+t)<Vr?ri*t*t:t<Jr?ri*(t-=Xr)*t+Zr:t<Qr?ri*(t-=Kr)*t+ti:ri*(t-=ei)*t+ni}var ai=function t(e){function n(t){return t*t*((e+1)*t-e)}return e=+e,n.overshoot=t,n}(1.70158),oi=function t(e){function n(t){return--t*t*((e+1)*t+e)+1}return e=+e,n.overshoot=t,n}(1.70158),si=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(1.70158),li=2*Math.PI,ui=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=li);function i(t){return e*Math.pow(2,10*--t)*Math.sin((r-t)/n)}return i.amplitude=function(e){return t(e,n*li)},i.period=function(n){return t(e,n)},i}(1,.3),ci=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=li);function i(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+r)/n)}return i.amplitude=function(e){return t(e,n*li)},i.period=function(n){return t(e,n)},i}(1,.3),fi=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=li);function i(t){return((t=2*t-1)<0?e*Math.pow(2,10*t)*Math.sin((r-t)/n):2-e*Math.pow(2,-10*t)*Math.sin((r+t)/n))/2}return i.amplitude=function(e){return t(e,n*li)},i.period=function(n){return t(e,n)},i}(1,.3),hi={time:null,delay:0,duration:250,ease:jr};function di(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return hi.time=or(),hi;return n}St.prototype.interrupt=function(t){return this.each(function(){Er(this,t)})},St.prototype.transition=function(t){var e,n;t instanceof Or?(e=t._id,t=t._name):(e=Dr(),(n=hi).time=or(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],l=s.length,u=0;u<l;++u)(o=s[u])&&Mr(o,t,e,u,s,n||di(o,e));return new Or(r,this._parents,t,e)};var pi=[null];function gi(t){return function(){return t}}function yi(t,e,n){this.target=t,this.type=e,this.selection=n}function vi(){t.event.stopImmediatePropagation()}function mi(){t.event.preventDefault(),t.event.stopImmediatePropagation()}var xi={name:"drag"},bi={name:"space"},_i={name:"handle"},wi={name:"center"};function ki(t){return[+t[0],+t[1]]}function Mi(t){return[ki(t[0]),ki(t[1])]}var Ai={name:"x",handles:["w","e"].map(zi),input:function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Ti={name:"y",handles:["n","s"].map(zi),input:function(t,e){return null==t?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Ci={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(zi),input:function(t){return null==t?null:Mi(t)},output:function(t){return t}},Ei={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ni={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Ri={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Si={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Pi={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function zi(t){return{type:t}}function Oi(){return!t.event.ctrlKey&&!t.event.button}function Li(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Di(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ii(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Bi(e){var n,r=Li,i=Oi,a=Di,o=!0,s=U("start","brush","end"),l=6;function u(t){var n=t.property("__brush",y).selectAll(".overlay").data([zi("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Ei.overlay).merge(n).each(function(){var t=Ii(this).extent;Pt(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])}),t.selectAll(".selection").data([zi("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Ei.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=t.selectAll(".handle").data(e.handles,function(t){return t.type});r.exit().remove(),r.enter().append("rect").attr("class",function(t){return"handle handle--"+t.type}).attr("cursor",function(t){return Ei[t.type]}),t.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(a).on("touchstart.brush",d).on("touchmove.brush",p).on("touchend.brush touchcancel.brush",g).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function c(){var t=Pt(this),e=Ii(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",function(t){return"e"===t.type[t.type.length-1]?e[1][0]-l/2:e[0][0]-l/2}).attr("y",function(t){return"s"===t.type[0]?e[1][1]-l/2:e[0][1]-l/2}).attr("width",function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+l:l}).attr("height",function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+l:l})):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function f(t,e,n){return!n&&t.__brush.emitter||new h(t,e)}function h(t,e){this.that=t,this.args=e,this.state=t.__brush,this.active=0}function d(){if((!n||t.event.touches)&&i.apply(this,arguments)){var r,a,s,l,u,h,d,p,g,y,v,m,x=this,b=t.event.target.__data__.type,_="selection"===(o&&t.event.metaKey?b="overlay":b)?xi:o&&t.event.altKey?wi:_i,w=e===Ti?null:Si[b],k=e===Ai?null:Pi[b],M=Ii(x),A=M.extent,T=M.selection,C=A[0][0],E=A[0][1],N=A[1][0],R=A[1][1],S=0,P=0,z=w&&k&&o&&t.event.shiftKey,O=t.event.touches?(m=t.event.changedTouches[0].identifier,function(e){return jt(e,t.event.touches,m)}):Bt,L=O(x),D=L,I=f(x,arguments,!0).beforestart();"overlay"===b?(T&&(g=!0),M.selection=T=[[r=e===Ti?C:L[0],s=e===Ai?E:L[1]],[u=e===Ti?N:r,d=e===Ai?R:s]]):(r=T[0][0],s=T[0][1],u=T[1][0],d=T[1][1]),a=r,l=s,h=u,p=d;var B=Pt(x).attr("pointer-events","none"),j=B.selectAll(".overlay").attr("cursor",Ei[b]);if(t.event.touches)I.moved=H,I.ended=q;else{var Y=Pt(t.event.view).on("mousemove.brush",H,!0).on("mouseup.brush",q,!0);o&&Y.on("keydown.brush",function(){switch(t.event.keyCode){case 16:z=w&&k;break;case 18:_===_i&&(w&&(u=h-S*w,r=a+S*w),k&&(d=p-P*k,s=l+P*k),_=wi,U());break;case 32:_!==_i&&_!==wi||(w<0?u=h-S:w>0&&(r=a-S),k<0?d=p-P:k>0&&(s=l-P),_=bi,j.attr("cursor",Ei.selection),U());break;default:return}mi()},!0).on("keyup.brush",function(){switch(t.event.keyCode){case 16:z&&(y=v=z=!1,U());break;case 18:_===wi&&(w<0?u=h:w>0&&(r=a),k<0?d=p:k>0&&(s=l),_=_i,U());break;case 32:_===bi&&(t.event.altKey?(w&&(u=h-S*w,r=a+S*w),k&&(d=p-P*k,s=l+P*k),_=wi):(w<0?u=h:w>0&&(r=a),k<0?d=p:k>0&&(s=l),_=_i),j.attr("cursor",Ei[b]),U());break;default:return}mi()},!0),Ut(t.event.view)}vi(),Er(x),c.call(x),I.start()}function H(){var t=O(x);!z||y||v||(Math.abs(t[0]-D[0])>Math.abs(t[1]-D[1])?v=!0:y=!0),D=t,g=!0,mi(),U()}function U(){var t;switch(S=D[0]-L[0],P=D[1]-L[1],_){case bi:case xi:w&&(S=Math.max(C-r,Math.min(N-u,S)),a=r+S,h=u+S),k&&(P=Math.max(E-s,Math.min(R-d,P)),l=s+P,p=d+P);break;case _i:w<0?(S=Math.max(C-r,Math.min(N-r,S)),a=r+S,h=u):w>0&&(S=Math.max(C-u,Math.min(N-u,S)),a=r,h=u+S),k<0?(P=Math.max(E-s,Math.min(R-s,P)),l=s+P,p=d):k>0&&(P=Math.max(E-d,Math.min(R-d,P)),l=s,p=d+P);break;case wi:w&&(a=Math.max(C,Math.min(N,r-S*w)),h=Math.max(C,Math.min(N,u+S*w))),k&&(l=Math.max(E,Math.min(R,s-P*k)),p=Math.max(E,Math.min(R,d+P*k)))}h<a&&(w*=-1,t=r,r=u,u=t,t=a,a=h,h=t,b in Ni&&j.attr("cursor",Ei[b=Ni[b]])),p<l&&(k*=-1,t=s,s=d,d=t,t=l,l=p,p=t,b in Ri&&j.attr("cursor",Ei[b=Ri[b]])),M.selection&&(T=M.selection),y&&(a=T[0][0],h=T[1][0]),v&&(l=T[0][1],p=T[1][1]),T[0][0]===a&&T[0][1]===l&&T[1][0]===h&&T[1][1]===p||(M.selection=[[a,l],[h,p]],c.call(x),I.brush())}function q(){if(vi(),t.event.touches){if(t.event.touches.length)return;n&&clearTimeout(n),n=setTimeout(function(){n=null},500)}else qt(t.event.view,g),Y.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);B.attr("pointer-events","all"),j.attr("cursor",Ei.overlay),M.selection&&(T=M.selection),function(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}(T)&&(M.selection=null,c.call(x)),I.end()}}function p(){f(this,arguments).moved()}function g(){f(this,arguments).ended()}function y(){var t=this.__brush||{selection:null};return t.extent=Mi(r.apply(this,arguments)),t.dim=e,t}return u.move=function(t,n){t.selection?t.on("start.brush",function(){f(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){f(this,arguments).end()}).tween("brush",function(){var t=this,r=t.__brush,i=f(t,arguments),a=r.selection,o=e.input("function"==typeof n?n.apply(this,arguments):n,r.extent),s=wn(a,o);function l(e){r.selection=1===e&&null===o?null:s(e),c.call(t),i.brush()}return null!==a&&null!==o?l:l(1)}):t.each(function(){var t=this,r=arguments,i=t.__brush,a=e.input("function"==typeof n?n.apply(t,r):n,i.extent),o=f(t,r).beforestart();Er(t),i.selection=null===a?null:a,c.call(t),o.start().brush().end()})},u.clear=function(t){u.move(t,null)},h.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting?(this.starting=!1,this.emit("start")):this.emit("brush"),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(t){Ct(new yi(u,t,e.output(this.state.selection)),s.apply,s,[t,this.that,this.args])}},u.extent=function(t){return arguments.length?(r="function"==typeof t?t:gi(Mi(t)),u):r},u.filter=function(t){return arguments.length?(i="function"==typeof t?t:gi(!!t),u):i},u.touchable=function(t){return arguments.length?(a="function"==typeof t?t:gi(!!t),u):a},u.handleSize=function(t){return arguments.length?(l=+t,u):l},u.keyModifiers=function(t){return arguments.length?(o=!!t,u):o},u.on=function(){var t=s.on.apply(s,arguments);return t===s?u:t},u}var ji=Math.cos,Yi=Math.sin,Hi=Math.PI,Ui=Hi/2,qi=2*Hi,Fi=Math.max;var Wi=Array.prototype.slice;function $i(t){return function(){return t}}var Gi=Math.PI,Vi=2*Gi,Xi=Vi-1e-6;function Ji(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Zi(){return new Ji}function Ki(t){return t.source}function Qi(t){return t.target}function ta(t){return t.radius}function ea(t){return t.startAngle}function na(t){return t.endAngle}function ra(){}function ia(t,e){var n=new ra;if(t instanceof ra)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var r,i=-1,a=t.length;if(null==e)for(;++i<a;)n.set(i,t[i]);else for(;++i<a;)n.set(e(r=t[i],i,t),r)}else if(t)for(var o in t)n.set(o,t[o]);return n}function aa(){return{}}function oa(t,e,n){t[e]=n}function sa(){return ia()}function la(t,e,n){t.set(e,n)}function ua(){}Ji.prototype=Zi.prototype={constructor:Ji,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var a=this._x1,o=this._y1,s=n-t,l=r-e,u=a-t,c=o-e,f=u*u+c*c;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>1e-6)if(Math.abs(c*s-l*u)>1e-6&&i){var h=n-a,d=r-o,p=s*s+l*l,g=h*h+d*d,y=Math.sqrt(p),v=Math.sqrt(f),m=i*Math.tan((Gi-Math.acos((p+f-g)/(2*y*v)))/2),x=m/v,b=m/y;Math.abs(x-1)>1e-6&&(this._+="L"+(t+x*u)+","+(e+x*c)),this._+="A"+i+","+i+",0,0,"+ +(c*h>u*d)+","+(this._x1=t+b*s)+","+(this._y1=e+b*l)}else this._+="L"+(this._x1=t)+","+(this._y1=e)},arc:function(t,e,n,r,i,a){t=+t,e=+e,a=!!a;var o=(n=+n)*Math.cos(r),s=n*Math.sin(r),l=t+o,u=e+s,c=1^a,f=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+u:(Math.abs(this._x1-l)>1e-6||Math.abs(this._y1-u)>1e-6)&&(this._+="L"+l+","+u),n&&(f<0&&(f=f%Vi+Vi),f>Xi?this._+="A"+n+","+n+",0,1,"+c+","+(t-o)+","+(e-s)+"A"+n+","+n+",0,1,"+c+","+(this._x1=l)+","+(this._y1=u):f>1e-6&&(this._+="A"+n+","+n+",0,"+ +(f>=Gi)+","+c+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}},ra.prototype=ia.prototype={constructor:ra,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var ca=ia.prototype;function fa(t,e){var n=new ua;if(t instanceof ua)t.each(function(t){n.add(t)});else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}ua.prototype=fa.prototype={constructor:ua,has:ca.has,add:function(t){return this["$"+(t+="")]=t,this},remove:ca.remove,clear:ca.clear,values:ca.keys,size:ca.size,empty:ca.empty,each:ca.each};var ha=Array.prototype.slice;function da(t,e){return t-e}function pa(t){return function(){return t}}function ga(t,e){for(var n,r=-1,i=e.length;++r<i;)if(n=ya(t,e[r]))return n;return 0}function ya(t,e){for(var n=e[0],r=e[1],i=-1,a=0,o=t.length,s=o-1;a<o;s=a++){var l=t[a],u=l[0],c=l[1],f=t[s],h=f[0],d=f[1];if(va(l,f,e))return 0;c>r!=d>r&&n<(h-u)*(r-c)/(d-c)+u&&(i=-i)}return i}function va(t,e,n){var r,i,a,o;return function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])==(n[0]-t[0])*(e[1]-t[1])}(t,e,n)&&(i=t[r=+(t[0]===e[0])],a=n[r],o=e[r],i<=a&&a<=o||o<=a&&a<=i)}function ma(){}var xa=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function ba(){var t=1,e=1,n=k,r=s;function i(t){var e=n(t);if(Array.isArray(e))e=e.slice().sort(da);else{var r=c(t),i=r[0],o=r[1];e=w(i,o,e),e=y(Math.floor(i/e)*e,Math.floor(o/e)*e,e)}return e.map(function(e){return a(t,e)})}function a(n,i){var a=[],s=[];return function(n,r,i){var a,s,l,u,c,f,h=new Array,d=new Array;for(a=s=-1,u=n[0]>=r,xa[u<<1].forEach(p);++a<t-1;)l=u,u=n[a+1]>=r,xa[l|u<<1].forEach(p);for(xa[u<<0].forEach(p);++s<e-1;){for(a=-1,u=n[s*t+t]>=r,c=n[s*t]>=r,xa[u<<1|c<<2].forEach(p);++a<t-1;)l=u,u=n[s*t+t+a+1]>=r,f=c,c=n[s*t+a+1]>=r,xa[l|u<<1|c<<2|f<<3].forEach(p);xa[u|c<<3].forEach(p)}for(a=-1,c=n[s*t]>=r,xa[c<<2].forEach(p);++a<t-1;)f=c,c=n[s*t+a+1]>=r,xa[c<<2|f<<3].forEach(p);function p(t){var e,n,r=[t[0][0]+a,t[0][1]+s],l=[t[1][0]+a,t[1][1]+s],u=o(r),c=o(l);(e=d[u])?(n=h[c])?(delete d[e.end],delete h[n.start],e===n?(e.ring.push(l),i(e.ring)):h[e.start]=d[n.end]={start:e.start,end:n.end,ring:e.ring.concat(n.ring)}):(delete d[e.end],e.ring.push(l),d[e.end=c]=e):(e=h[c])?(n=d[u])?(delete h[e.start],delete d[n.end],e===n?(e.ring.push(l),i(e.ring)):h[n.start]=d[e.end]={start:n.start,end:e.end,ring:n.ring.concat(e.ring)}):(delete h[e.start],e.ring.unshift(r),h[e.start=u]=e):h[u]=d[c]={start:u,end:c,ring:[r,l]}}xa[c<<3].forEach(p)}(n,i,function(t){r(t,n,i),function(t){for(var e=0,n=t.length,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return r}(t)>0?a.push([t]):s.push(t)}),s.forEach(function(t){for(var e,n=0,r=a.length;n<r;++n)if(-1!==ga((e=a[n])[0],t))return void e.push(t)}),{type:"MultiPolygon",value:i,coordinates:a}}function o(e){return 2*e[0]+e[1]*(t+1)*4}function s(n,r,i){n.forEach(function(n){var a,o=n[0],s=n[1],l=0|o,u=0|s,c=r[u*t+l];o>0&&o<t&&l===o&&(a=r[u*t+l-1],n[0]=o+(i-a)/(c-a)-.5),s>0&&s<e&&u===s&&(a=r[(u-1)*t+l],n[1]=s+(i-a)/(c-a)-.5)})}return i.contour=a,i.size=function(n){if(!arguments.length)return[t,e];var r=Math.ceil(n[0]),a=Math.ceil(n[1]);if(!(r>0&&a>0))throw new Error("invalid size");return t=r,e=a,i},i.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?pa(ha.call(t)):pa(t),i):n},i.smooth=function(t){return arguments.length?(r=t?s:ma,i):r===s},i}function _a(t,e,n){for(var r=t.width,i=t.height,a=1+(n<<1),o=0;o<i;++o)for(var s=0,l=0;s<r+n;++s)s<r&&(l+=t.data[s+o*r]),s>=n&&(s>=a&&(l-=t.data[s-a+o*r]),e.data[s-n+o*r]=l/Math.min(s+1,r-1+a-s,a))}function wa(t,e,n){for(var r=t.width,i=t.height,a=1+(n<<1),o=0;o<r;++o)for(var s=0,l=0;s<i+n;++s)s<i&&(l+=t.data[o+s*r]),s>=n&&(s>=a&&(l-=t.data[o+(s-a)*r]),e.data[o+(s-n)*r]=l/Math.min(s+1,i-1+a-s,a))}function ka(t){return t[0]}function Ma(t){return t[1]}function Aa(){return 1}var Ta={},Ca={},Ea=34,Na=10,Ra=13;function Sa(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'}).join(",")+"}")}function Pa(t){var e=Object.create(null),n=[];return t.forEach(function(t){for(var r in t)r in e||n.push(e[r]=r)}),n}function za(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function Oa(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var r,i=[],a=t.length,o=0,s=0,l=a<=0,u=!1;function c(){if(l)return Ca;if(u)return u=!1,Ta;var e,r,i=o;if(t.charCodeAt(i)===Ea){for(;o++<a&&t.charCodeAt(o)!==Ea||t.charCodeAt(++o)===Ea;);return(e=o)>=a?l=!0:(r=t.charCodeAt(o++))===Na?u=!0:r===Ra&&(u=!0,t.charCodeAt(o)===Na&&++o),t.slice(i+1,e-1).replace(/""/g,'"')}for(;o<a;){if((r=t.charCodeAt(e=o++))===Na)u=!0;else if(r===Ra)u=!0,t.charCodeAt(o)===Na&&++o;else if(r!==n)continue;return t.slice(i,e)}return l=!0,t.slice(i,a)}for(t.charCodeAt(a-1)===Na&&--a,t.charCodeAt(a-1)===Ra&&--a;(r=c())!==Ca;){for(var f=[];r!==Ta&&r!==Ca;)f.push(r),r=c();e&&null==(f=e(f,s++))||i.push(f)}return i}function i(e,n){return e.map(function(e){return n.map(function(t){return o(e[t])}).join(t)})}function a(e){return e.map(o).join(t)}function o(t){return null==t?"":t instanceof Date?function(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":function(t){return t<0?"-"+za(-t,6):t>9999?"+"+za(t,6):za(t,4)}(t.getUTCFullYear())+"-"+za(t.getUTCMonth()+1,2)+"-"+za(t.getUTCDate(),2)+(i?"T"+za(e,2)+":"+za(n,2)+":"+za(r,2)+"."+za(i,3)+"Z":r?"T"+za(e,2)+":"+za(n,2)+":"+za(r,2)+"Z":n||e?"T"+za(e,2)+":"+za(n,2)+"Z":"")}(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,i,a=r(t,function(t,r){if(n)return n(t,r-1);i=t,n=e?function(t,e){var n=Sa(t);return function(r,i){return e(n(r),i,t)}}(t,e):Sa(t)});return a.columns=i||[],a},parseRows:r,format:function(e,n){return null==n&&(n=Pa(e)),[n.map(o).join(t)].concat(i(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=Pa(t)),i(t,e).join("\n")},formatRows:function(t){return t.map(a).join("\n")},formatRow:a,formatValue:o}}var La=Oa(","),Da=La.parse,Ia=La.parseRows,Ba=La.format,ja=La.formatBody,Ya=La.formatRows,Ha=La.formatRow,Ua=La.formatValue,qa=Oa("\t"),Fa=qa.parse,Wa=qa.parseRows,$a=qa.format,Ga=qa.formatBody,Va=qa.formatRows,Xa=qa.formatRow,Ja=qa.formatValue,Za=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function Ka(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function Qa(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function to(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function eo(t,e){return fetch(t,e).then(to)}function no(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=void 0),eo(e,n).then(function(e){return t(e,r)})}}var ro=no(Da),io=no(Fa);function ao(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.json()}function oo(t){return function(e,n){return eo(e,n).then(function(e){return(new DOMParser).parseFromString(e,t)})}}var so=oo("application/xml"),lo=oo("text/html"),uo=oo("image/svg+xml");function co(t){return function(){return t}}function fo(){return 1e-6*(Math.random()-.5)}function ho(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,a,o,s,l,u,c,f,h,d=t._root,p={data:r},g=t._x0,y=t._y0,v=t._x1,m=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((u=e>=(a=(g+v)/2))?g=a:v=a,(c=n>=(o=(y+m)/2))?y=o:m=o,i=d,!(d=d[f=c<<1|u]))return i[f]=p,t;if(s=+t._x.call(null,d.data),l=+t._y.call(null,d.data),e===s&&n===l)return p.next=d,i?i[f]=p:t._root=p,t;do{i=i?i[f]=new Array(4):t._root=new Array(4),(u=e>=(a=(g+v)/2))?g=a:v=a,(c=n>=(o=(y+m)/2))?y=o:m=o}while((f=c<<1|u)==(h=(l>=o)<<1|s>=a));return i[h]=d,i[f]=p,t}function po(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function go(t){return t[0]}function yo(t){return t[1]}function vo(t,e,n){var r=new mo(null==e?go:e,null==n?yo:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function mo(t,e,n,r,i,a){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function xo(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var bo=vo.prototype=mo.prototype;function _o(t){return t.x+t.vx}function wo(t){return t.y+t.vy}function ko(t){return t.index}function Mo(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function Ao(t){return t.x}function To(t){return t.y}bo.copy=function(){var t,e,n=new mo(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=xo(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=xo(e));return n},bo.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return ho(this.cover(e,n),e,n,t)},bo.addAll=function(t){var e,n,r,i,a=t.length,o=new Array(a),s=new Array(a),l=1/0,u=1/0,c=-1/0,f=-1/0;for(n=0;n<a;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(o[n]=r,s[n]=i,r<l&&(l=r),r>c&&(c=r),i<u&&(u=i),i>f&&(f=i));if(l>c||u>f)return this;for(this.cover(l,u).cover(c,f),n=0;n<a;++n)ho(this,o[n],s[n],t[n]);return this},bo.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,a=(r=Math.floor(e))+1;else{for(var o,s,l=i-n,u=this._root;n>t||t>=i||r>e||e>=a;)switch(s=(e<r)<<1|t<n,(o=new Array(4))[s]=u,u=o,l*=2,s){case 0:i=n+l,a=r+l;break;case 1:n=i-l,a=r+l;break;case 2:i=n+l,r=a-l;break;case 3:n=i-l,r=a-l}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this},bo.data=function(){var t=[];return this.visit(function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)}),t},bo.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},bo.find=function(t,e,n){var r,i,a,o,s,l,u,c=this._x0,f=this._y0,h=this._x1,d=this._y1,p=[],g=this._root;for(g&&p.push(new po(g,c,f,h,d)),null==n?n=1/0:(c=t-n,f=e-n,h=t+n,d=e+n,n*=n);l=p.pop();)if(!(!(g=l.node)||(i=l.x0)>h||(a=l.y0)>d||(o=l.x1)<c||(s=l.y1)<f))if(g.length){var y=(i+o)/2,v=(a+s)/2;p.push(new po(g[3],y,v,o,s),new po(g[2],i,v,y,s),new po(g[1],y,a,o,v),new po(g[0],i,a,y,v)),(u=(e>=v)<<1|t>=y)&&(l=p[p.length-1],p[p.length-1]=p[p.length-1-u],p[p.length-1-u]=l)}else{var m=t-+this._x.call(null,g.data),x=e-+this._y.call(null,g.data),b=m*m+x*x;if(b<n){var _=Math.sqrt(n=b);c=t-_,f=e-_,h=t+_,d=e+_,r=g.data}}return r},bo.remove=function(t){if(isNaN(a=+this._x.call(null,t))||isNaN(o=+this._y.call(null,t)))return this;var e,n,r,i,a,o,s,l,u,c,f,h,d=this._root,p=this._x0,g=this._y0,y=this._x1,v=this._y1;if(!d)return this;if(d.length)for(;;){if((u=a>=(s=(p+y)/2))?p=s:y=s,(c=o>=(l=(g+v)/2))?g=l:v=l,e=d,!(d=d[f=c<<1|u]))return this;if(!d.length)break;(e[f+1&3]||e[f+2&3]||e[f+3&3])&&(n=e,h=f)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,r?(i?r.next=i:delete r.next,this):e?(i?e[f]=i:delete e[f],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[h]=d:this._root=d),this):(this._root=i,this)},bo.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},bo.root=function(){return this._root},bo.size=function(){var t=0;return this.visit(function(e){if(!e.length)do{++t}while(e=e.next)}),t},bo.visit=function(t){var e,n,r,i,a,o,s=[],l=this._root;for(l&&s.push(new po(l,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(l=e.node,r=e.x0,i=e.y0,a=e.x1,o=e.y1)&&l.length){var u=(r+a)/2,c=(i+o)/2;(n=l[3])&&s.push(new po(n,u,c,a,o)),(n=l[2])&&s.push(new po(n,r,c,u,o)),(n=l[1])&&s.push(new po(n,u,i,a,c)),(n=l[0])&&s.push(new po(n,r,i,u,c))}return this},bo.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new po(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var a,o=e.x0,s=e.y0,l=e.x1,u=e.y1,c=(o+l)/2,f=(s+u)/2;(a=i[0])&&n.push(new po(a,o,s,c,f)),(a=i[1])&&n.push(new po(a,c,s,l,f)),(a=i[2])&&n.push(new po(a,o,f,c,u)),(a=i[3])&&n.push(new po(a,c,f,l,u))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},bo.x=function(t){return arguments.length?(this._x=t,this):this._x},bo.y=function(t){return arguments.length?(this._y=t,this):this._y};var Co=10,Eo=Math.PI*(3-Math.sqrt(5));function No(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Ro(t){return(t=No(Math.abs(t)))?t[1]:NaN}var So,Po=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function zo(t){if(!(e=Po.exec(t)))throw new Error("invalid format: "+t);var e;return new Oo({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Oo(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Lo(t,e){var n=No(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}zo.prototype=Oo.prototype,Oo.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Do={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Lo(100*t,e)},r:Lo,s:function(t,e){var n=No(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(So=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+No(t,Math.max(0,e+a-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function Io(t){return t}var Bo,jo=Array.prototype.map,Yo=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Ho(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?Io:(e=jo.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,a=[],o=0,s=e[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),a.push(t.substring(i-=s,i+s)),!((l+=s+1)>r));)s=e[o=(o+1)%e.length];return a.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",a=void 0===t.currency?"":t.currency[1]+"",o=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?Io:function(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}}(jo.call(t.numerals,String)),l=void 0===t.percent?"%":t.percent+"",u=void 0===t.minus?"-":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function f(t){var e=(t=zo(t)).fill,n=t.align,f=t.sign,h=t.symbol,d=t.zero,p=t.width,g=t.comma,y=t.precision,v=t.trim,m=t.type;"n"===m?(g=!0,m="g"):Do[m]||(void 0===y&&(y=12),v=!0,m="g"),(d||"0"===e&&"="===n)&&(d=!0,e="0",n="=");var x="$"===h?i:"#"===h&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",b="$"===h?a:/[%p]/.test(m)?l:"",_=Do[m],w=/[defgprs%]/.test(m);function k(t){var i,a,l,h=x,k=b;if("c"===m)k=_(t)+k,t="";else{var M=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:_(Math.abs(t),y),v&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),M&&0==+t&&"+"!==f&&(M=!1),h=(M?"("===f?f:u:"-"===f||"("===f?"":f)+h,k=("s"===m?Yo[8+So/3]:"")+k+(M&&"("===f?")":""),w)for(i=-1,a=t.length;++i<a;)if(48>(l=t.charCodeAt(i))||l>57){k=(46===l?o+t.slice(i+1):t.slice(i))+k,t=t.slice(0,i);break}}g&&!d&&(t=r(t,1/0));var A=h.length+t.length+k.length,T=A<p?new Array(p-A+1).join(e):"";switch(g&&d&&(t=r(T+t,T.length?p-k.length:1/0),T=""),n){case"<":t=h+t+k+T;break;case"=":t=h+T+t+k;break;case"^":t=T.slice(0,A=T.length>>1)+h+t+k+T.slice(A);break;default:t=T+h+t+k}return s(t)}return y=void 0===y?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),k.toString=function(){return t+""},k}return{format:f,formatPrefix:function(t,e){var n=f(((t=zo(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Ro(e)/3))),i=Math.pow(10,-r),a=Yo[8+r/3];return function(t){return n(i*t)+a}}}}function Uo(e){return Bo=Ho(e),t.format=Bo.format,t.formatPrefix=Bo.formatPrefix,Bo}function qo(t){return Math.max(0,-Ro(Math.abs(t)))}function Fo(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Ro(e)/3)))-Ro(Math.abs(t)))}function Wo(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ro(e)-Ro(t))+1}function $o(){return new Go}function Go(){this.reset()}Uo({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),Go.prototype={constructor:Go,reset:function(){this.s=this.t=0},add:function(t){Xo(Vo,t,this.t),Xo(this,Vo.s,this.s),this.s?this.t+=Vo.t:this.s=Vo.t},valueOf:function(){return this.s}};var Vo=new Go;function Xo(t,e,n){var r=t.s=e+n,i=r-e,a=r-i;t.t=e-a+(n-i)}var Jo=1e-6,Zo=1e-12,Ko=Math.PI,Qo=Ko/2,ts=Ko/4,es=2*Ko,ns=180/Ko,rs=Ko/180,is=Math.abs,as=Math.atan,os=Math.atan2,ss=Math.cos,ls=Math.ceil,us=Math.exp,cs=Math.log,fs=Math.pow,hs=Math.sin,ds=Math.sign||function(t){return t>0?1:t<0?-1:0},ps=Math.sqrt,gs=Math.tan;function ys(t){return t>1?0:t<-1?Ko:Math.acos(t)}function vs(t){return t>1?Qo:t<-1?-Qo:Math.asin(t)}function ms(t){return(t=hs(t/2))*t}function xs(){}function bs(t,e){t&&ws.hasOwnProperty(t.type)&&ws[t.type](t,e)}var _s={Feature:function(t,e){bs(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)bs(n[r].geometry,e)}},ws={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){ks(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)ks(n[r],e,0)},Polygon:function(t,e){Ms(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Ms(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)bs(n[r],e)}};function ks(t,e,n){var r,i=-1,a=t.length-n;for(e.lineStart();++i<a;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function Ms(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)ks(t[n],e,1);e.polygonEnd()}function As(t,e){t&&_s.hasOwnProperty(t.type)?_s[t.type](t,e):bs(t,e)}var Ts,Cs,Es,Ns,Rs,Ss=$o(),Ps=$o(),zs={point:xs,lineStart:xs,lineEnd:xs,polygonStart:function(){Ss.reset(),zs.lineStart=Os,zs.lineEnd=Ls},polygonEnd:function(){var t=+Ss;Ps.add(t<0?es+t:t),this.lineStart=this.lineEnd=this.point=xs},sphere:function(){Ps.add(es)}};function Os(){zs.point=Ds}function Ls(){Is(Ts,Cs)}function Ds(t,e){zs.point=Is,Ts=t,Cs=e,Es=t*=rs,Ns=ss(e=(e*=rs)/2+ts),Rs=hs(e)}function Is(t,e){var n=(t*=rs)-Es,r=n>=0?1:-1,i=r*n,a=ss(e=(e*=rs)/2+ts),o=hs(e),s=Rs*o,l=Ns*a+s*ss(i),u=s*r*hs(i);Ss.add(os(u,l)),Es=t,Ns=a,Rs=o}function Bs(t){return[os(t[1],t[0]),vs(t[2])]}function js(t){var e=t[0],n=t[1],r=ss(n);return[r*ss(e),r*hs(e),hs(n)]}function Ys(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Hs(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Us(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function qs(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Fs(t){var e=ps(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var Ws,$s,Gs,Vs,Xs,Js,Zs,Ks,Qs,tl,el,nl,rl,il,al,ol,sl,ll,ul,cl,fl,hl,dl,pl,gl,yl,vl=$o(),ml={point:xl,lineStart:_l,lineEnd:wl,polygonStart:function(){ml.point=kl,ml.lineStart=Ml,ml.lineEnd=Al,vl.reset(),zs.polygonStart()},polygonEnd:function(){zs.polygonEnd(),ml.point=xl,ml.lineStart=_l,ml.lineEnd=wl,Ss<0?(Ws=-(Gs=180),$s=-(Vs=90)):vl>Jo?Vs=90:vl<-Jo&&($s=-90),tl[0]=Ws,tl[1]=Gs},sphere:function(){Ws=-(Gs=180),$s=-(Vs=90)}};function xl(t,e){Qs.push(tl=[Ws=t,Gs=t]),e<$s&&($s=e),e>Vs&&(Vs=e)}function bl(t,e){var n=js([t*rs,e*rs]);if(Ks){var r=Hs(Ks,n),i=Hs([r[1],-r[0],0],r);Fs(i),i=Bs(i);var a,o=t-Xs,s=o>0?1:-1,l=i[0]*ns*s,u=is(o)>180;u^(s*Xs<l&&l<s*t)?(a=i[1]*ns)>Vs&&(Vs=a):u^(s*Xs<(l=(l+360)%360-180)&&l<s*t)?(a=-i[1]*ns)<$s&&($s=a):(e<$s&&($s=e),e>Vs&&(Vs=e)),u?t<Xs?Tl(Ws,t)>Tl(Ws,Gs)&&(Gs=t):Tl(t,Gs)>Tl(Ws,Gs)&&(Ws=t):Gs>=Ws?(t<Ws&&(Ws=t),t>Gs&&(Gs=t)):t>Xs?Tl(Ws,t)>Tl(Ws,Gs)&&(Gs=t):Tl(t,Gs)>Tl(Ws,Gs)&&(Ws=t)}else Qs.push(tl=[Ws=t,Gs=t]);e<$s&&($s=e),e>Vs&&(Vs=e),Ks=n,Xs=t}function _l(){ml.point=bl}function wl(){tl[0]=Ws,tl[1]=Gs,ml.point=xl,Ks=null}function kl(t,e){if(Ks){var n=t-Xs;vl.add(is(n)>180?n+(n>0?360:-360):n)}else Js=t,Zs=e;zs.point(t,e),bl(t,e)}function Ml(){zs.lineStart()}function Al(){kl(Js,Zs),zs.lineEnd(),is(vl)>Jo&&(Ws=-(Gs=180)),tl[0]=Ws,tl[1]=Gs,Ks=null}function Tl(t,e){return(e-=t)<0?e+360:e}function Cl(t,e){return t[0]-e[0]}function El(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var Nl={sphere:xs,point:Rl,lineStart:Pl,lineEnd:Ll,polygonStart:function(){Nl.lineStart=Dl,Nl.lineEnd=Il},polygonEnd:function(){Nl.lineStart=Pl,Nl.lineEnd=Ll}};function Rl(t,e){t*=rs;var n=ss(e*=rs);Sl(n*ss(t),n*hs(t),hs(e))}function Sl(t,e,n){rl+=(t-rl)/++el,il+=(e-il)/el,al+=(n-al)/el}function Pl(){Nl.point=zl}function zl(t,e){t*=rs;var n=ss(e*=rs);pl=n*ss(t),gl=n*hs(t),yl=hs(e),Nl.point=Ol,Sl(pl,gl,yl)}function Ol(t,e){t*=rs;var n=ss(e*=rs),r=n*ss(t),i=n*hs(t),a=hs(e),o=os(ps((o=gl*a-yl*i)*o+(o=yl*r-pl*a)*o+(o=pl*i-gl*r)*o),pl*r+gl*i+yl*a);nl+=o,ol+=o*(pl+(pl=r)),sl+=o*(gl+(gl=i)),ll+=o*(yl+(yl=a)),Sl(pl,gl,yl)}function Ll(){Nl.point=Rl}function Dl(){Nl.point=Bl}function Il(){jl(hl,dl),Nl.point=Rl}function Bl(t,e){hl=t,dl=e,t*=rs,e*=rs,Nl.point=jl;var n=ss(e);pl=n*ss(t),gl=n*hs(t),yl=hs(e),Sl(pl,gl,yl)}function jl(t,e){t*=rs;var n=ss(e*=rs),r=n*ss(t),i=n*hs(t),a=hs(e),o=gl*a-yl*i,s=yl*r-pl*a,l=pl*i-gl*r,u=ps(o*o+s*s+l*l),c=vs(u),f=u&&-c/u;ul+=f*o,cl+=f*s,fl+=f*l,nl+=c,ol+=c*(pl+(pl=r)),sl+=c*(gl+(gl=i)),ll+=c*(yl+(yl=a)),Sl(pl,gl,yl)}function Yl(t){return function(){return t}}function Hl(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function Ul(t,e){return[is(t)>Ko?t+Math.round(-t/es)*es:t,e]}function ql(t,e,n){return(t%=es)?e||n?Hl(Wl(t),$l(e,n)):Wl(t):e||n?$l(e,n):Ul}function Fl(t){return function(e,n){return[(e+=t)>Ko?e-es:e<-Ko?e+es:e,n]}}function Wl(t){var e=Fl(t);return e.invert=Fl(-t),e}function $l(t,e){var n=ss(t),r=hs(t),i=ss(e),a=hs(e);function o(t,e){var o=ss(e),s=ss(t)*o,l=hs(t)*o,u=hs(e),c=u*n+s*r;return[os(l*i-c*a,s*n-u*r),vs(c*i+l*a)]}return o.invert=function(t,e){var o=ss(e),s=ss(t)*o,l=hs(t)*o,u=hs(e),c=u*i-l*a;return[os(l*i+u*a,s*n+c*r),vs(c*n-s*r)]},o}function Gl(t){function e(e){return(e=t(e[0]*rs,e[1]*rs))[0]*=ns,e[1]*=ns,e}return t=ql(t[0]*rs,t[1]*rs,t.length>2?t[2]*rs:0),e.invert=function(e){return(e=t.invert(e[0]*rs,e[1]*rs))[0]*=ns,e[1]*=ns,e},e}function Vl(t,e,n,r,i,a){if(n){var o=ss(e),s=hs(e),l=r*n;null==i?(i=e+r*es,a=e-l/2):(i=Xl(o,i),a=Xl(o,a),(r>0?i<a:i>a)&&(i+=r*es));for(var u,c=i;r>0?c>a:c<a;c-=l)u=Bs([o,-s*ss(c),-s*hs(c)]),t.point(u[0],u[1])}}function Xl(t,e){(e=js(e))[0]-=t,Fs(e);var n=ys(-e[1]);return((-e[2]<0?-n:n)+es-Jo)%es}function Jl(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:xs,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Zl(t,e){return is(t[0]-e[0])<Jo&&is(t[1]-e[1])<Jo}function Kl(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Ql(t,e,n,r,i){var a,o,s=[],l=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],o=t[e];if(Zl(r,o)){for(i.lineStart(),a=0;a<e;++a)i.point((r=t[a])[0],r[1]);i.lineEnd()}else s.push(n=new Kl(r,t,null,!0)),l.push(n.o=new Kl(r,null,n,!1)),s.push(n=new Kl(o,t,null,!1)),l.push(n.o=new Kl(o,null,n,!0))}}),s.length){for(l.sort(e),tu(s),tu(l),a=0,o=l.length;a<o;++a)l[a].e=n=!n;for(var u,c,f=s[0];;){for(var h=f,d=!0;h.v;)if((h=h.n)===f)return;u=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(a=0,o=u.length;a<o;++a)i.point((c=u[a])[0],c[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(u=h.p.z,a=u.length-1;a>=0;--a)i.point((c=u[a])[0],c[1]);else r(h.x,h.p.x,-1,i);h=h.p}u=(h=h.o).z,d=!d}while(!h.v);i.lineEnd()}}}function tu(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}Ul.invert=Ul;var eu=$o();function nu(t){return is(t[0])<=Ko?t[0]:ds(t[0])*((is(t[0])+Ko)%es-Ko)}function ru(t,e){var n=nu(e),r=e[1],i=hs(r),a=[hs(n),-ss(n),0],o=0,s=0;eu.reset(),1===i?r=Qo+Jo:-1===i&&(r=-Qo-Jo);for(var l=0,u=t.length;l<u;++l)if(f=(c=t[l]).length)for(var c,f,h=c[f-1],d=nu(h),p=h[1]/2+ts,g=hs(p),y=ss(p),v=0;v<f;++v,d=x,g=_,y=w,h=m){var m=c[v],x=nu(m),b=m[1]/2+ts,_=hs(b),w=ss(b),k=x-d,M=k>=0?1:-1,A=M*k,T=A>Ko,C=g*_;if(eu.add(os(C*M*hs(A),y*w+C*ss(A))),o+=T?k+M*es:k,T^d>=n^x>=n){var E=Hs(js(h),js(m));Fs(E);var N=Hs(a,E);Fs(N);var R=(T^k>=0?-1:1)*vs(N[2]);(r>R||r===R&&(E[0]||E[1]))&&(s+=T^k>=0?1:-1)}}return(o<-Jo||o<Jo&&eu<-Jo)^1&s}function iu(t,e,n,r){return function(i){var a,o,s,l=e(i),u=Jl(),c=e(u),f=!1,h={point:d,lineStart:g,lineEnd:y,polygonStart:function(){h.point=v,h.lineStart=m,h.lineEnd=x,o=[],a=[]},polygonEnd:function(){h.point=d,h.lineStart=g,h.lineEnd=y,o=T(o);var t=ru(a,r);o.length?(f||(i.polygonStart(),f=!0),Ql(o,ou,t,n,i)):t&&(f||(i.polygonStart(),f=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),f&&(i.polygonEnd(),f=!1),o=a=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(e,n){t(e,n)&&i.point(e,n)}function p(t,e){l.point(t,e)}function g(){h.point=p,l.lineStart()}function y(){h.point=d,l.lineEnd()}function v(t,e){s.push([t,e]),c.point(t,e)}function m(){c.lineStart(),s=[]}function x(){v(s[0][0],s[0][1]),c.lineEnd();var t,e,n,r,l=c.clean(),h=u.result(),d=h.length;if(s.pop(),a.push(s),s=null,d)if(1&l){if((e=(n=h[0]).length-1)>0){for(f||(i.polygonStart(),f=!0),i.lineStart(),t=0;t<e;++t)i.point((r=n[t])[0],r[1]);i.lineEnd()}}else d>1&&2&l&&h.push(h.pop().concat(h.shift())),o.push(h.filter(au))}return h}}function au(t){return t.length>1}function ou(t,e){return((t=t.x)[0]<0?t[1]-Qo-Jo:Qo-t[1])-((e=e.x)[0]<0?e[1]-Qo-Jo:Qo-e[1])}var su=iu(function(){return!0},function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(a,o){var s=a>0?Ko:-Ko,l=is(a-n);is(l-Ko)<Jo?(t.point(n,r=(r+o)/2>0?Qo:-Qo),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(a,r),e=0):i!==s&&l>=Ko&&(is(n-i)<Jo&&(n-=i*Jo),is(a-s)<Jo&&(a-=s*Jo),r=function(t,e,n,r){var i,a,o=hs(t-n);return is(o)>Jo?as((hs(e)*(a=ss(r))*hs(n)-hs(r)*(i=ss(e))*hs(t))/(i*a*o)):(e+r)/2}(n,r,a,o),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=a,r=o),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}},function(t,e,n,r){var i;if(null==t)i=n*Qo,r.point(-Ko,i),r.point(0,i),r.point(Ko,i),r.point(Ko,0),r.point(Ko,-i),r.point(0,-i),r.point(-Ko,-i),r.point(-Ko,0),r.point(-Ko,i);else if(is(t[0]-e[0])>Jo){var a=t[0]<e[0]?Ko:-Ko;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(e[0],e[1])},[-Ko,-Qo]);function lu(t){var e=ss(t),n=6*rs,r=e>0,i=is(e)>Jo;function a(t,n){return ss(t)*ss(n)>e}function o(t,n,r){var i=[1,0,0],a=Hs(js(t),js(n)),o=Ys(a,a),s=a[0],l=o-s*s;if(!l)return!r&&t;var u=e*o/l,c=-e*s/l,f=Hs(i,a),h=qs(i,u);Us(h,qs(a,c));var d=f,p=Ys(h,d),g=Ys(d,d),y=p*p-g*(Ys(h,h)-1);if(!(y<0)){var v=ps(y),m=qs(d,(-p-v)/g);if(Us(m,h),m=Bs(m),!r)return m;var x,b=t[0],_=n[0],w=t[1],k=n[1];_<b&&(x=b,b=_,_=x);var M=_-b,A=is(M-Ko)<Jo;if(!A&&k<w&&(x=w,w=k,k=x),A||M<Jo?A?w+k>0^m[1]<(is(m[0]-b)<Jo?w:k):w<=m[1]&&m[1]<=k:M>Ko^(b<=m[0]&&m[0]<=_)){var T=qs(d,(-p+v)/g);return Us(T,h),[m,Bs(T)]}}}function s(e,n){var i=r?t:Ko-t,a=0;return e<-i?a|=1:e>i&&(a|=2),n<-i?a|=4:n>i&&(a|=8),a}return iu(a,function(t){var e,n,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(f,h){var d,p=[f,h],g=a(f,h),y=r?g?0:s(f,h):g?s(f+(f<0?Ko:-Ko),h):0;if(!e&&(u=l=g)&&t.lineStart(),g!==l&&(!(d=o(e,p))||Zl(e,d)||Zl(p,d))&&(p[0]+=Jo,p[1]+=Jo,g=a(p[0],p[1])),g!==l)c=0,g?(t.lineStart(),d=o(p,e),t.point(d[0],d[1])):(d=o(e,p),t.point(d[0],d[1]),t.lineEnd()),e=d;else if(i&&e&&r^g){var v;y&n||!(v=o(p,e,!0))||(c=0,r?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!g||e&&Zl(e,p)||t.point(p[0],p[1]),e=p,l=g,n=y},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return c|(u&&l)<<1}}},function(e,r,i,a){Vl(a,t,n,i,e,r)},r?[0,-t]:[-Ko,t-Ko])}var uu=1e9,cu=-uu;function fu(t,e,n,r){function i(i,a){return t<=i&&i<=n&&e<=a&&a<=r}function a(i,a,s,u){var c=0,f=0;if(null==i||(c=o(i,s))!==(f=o(a,s))||l(i,a)<0^s>0)do{u.point(0===c||3===c?t:n,c>1?r:e)}while((c=(c+s+4)%4)!==f);else u.point(a[0],a[1])}function o(r,i){return is(r[0]-t)<Jo?i>0?0:3:is(r[0]-n)<Jo?i>0?2:1:is(r[1]-e)<Jo?i>0?1:0:i>0?3:2}function s(t,e){return l(t.x,e.x)}function l(t,e){var n=o(t,1),r=o(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(o){var l,u,c,f,h,d,p,g,y,v,m,x=o,b=Jl(),_={point:w,lineStart:function(){_.point=k,u&&u.push(c=[]),v=!0,y=!1,p=g=NaN},lineEnd:function(){l&&(k(f,h),d&&y&&b.rejoin(),l.push(b.result())),_.point=w,y&&x.lineEnd()},polygonStart:function(){x=b,l=[],u=[],m=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=u.length;n<i;++n)for(var a,o,s=u[n],l=1,c=s.length,f=s[0],h=f[0],d=f[1];l<c;++l)a=h,o=d,h=(f=s[l])[0],d=f[1],o<=r?d>r&&(h-a)*(r-o)>(d-o)*(t-a)&&++e:d<=r&&(h-a)*(r-o)<(d-o)*(t-a)&&--e;return e}(),n=m&&e,i=(l=T(l)).length;(n||i)&&(o.polygonStart(),n&&(o.lineStart(),a(null,null,1,o),o.lineEnd()),i&&Ql(l,s,e,a,o),o.polygonEnd()),x=o,l=u=c=null}};function w(t,e){i(t,e)&&x.point(t,e)}function k(a,o){var s=i(a,o);if(u&&c.push([a,o]),v)f=a,h=o,d=s,v=!1,s&&(x.lineStart(),x.point(a,o));else if(s&&y)x.point(a,o);else{var l=[p=Math.max(cu,Math.min(uu,p)),g=Math.max(cu,Math.min(uu,g))],b=[a=Math.max(cu,Math.min(uu,a)),o=Math.max(cu,Math.min(uu,o))];!function(t,e,n,r,i,a){var o,s=t[0],l=t[1],u=0,c=1,f=e[0]-s,h=e[1]-l;if(o=n-s,f||!(o>0)){if(o/=f,f<0){if(o<u)return;o<c&&(c=o)}else if(f>0){if(o>c)return;o>u&&(u=o)}if(o=i-s,f||!(o<0)){if(o/=f,f<0){if(o>c)return;o>u&&(u=o)}else if(f>0){if(o<u)return;o<c&&(c=o)}if(o=r-l,h||!(o>0)){if(o/=h,h<0){if(o<u)return;o<c&&(c=o)}else if(h>0){if(o>c)return;o>u&&(u=o)}if(o=a-l,h||!(o<0)){if(o/=h,h<0){if(o>c)return;o>u&&(u=o)}else if(h>0){if(o<u)return;o<c&&(c=o)}return u>0&&(t[0]=s+u*f,t[1]=l+u*h),c<1&&(e[0]=s+c*f,e[1]=l+c*h),!0}}}}}(l,b,t,e,n,r)?s&&(x.lineStart(),x.point(a,o),m=!1):(y||(x.lineStart(),x.point(l[0],l[1])),x.point(b[0],b[1]),s||x.lineEnd(),m=!1)}p=a,g=o,y=s}return _}}var hu,du,pu,gu=$o(),yu={sphere:xs,point:xs,lineStart:function(){yu.point=mu,yu.lineEnd=vu},lineEnd:xs,polygonStart:xs,polygonEnd:xs};function vu(){yu.point=yu.lineEnd=xs}function mu(t,e){hu=t*=rs,du=hs(e*=rs),pu=ss(e),yu.point=xu}function xu(t,e){t*=rs;var n=hs(e*=rs),r=ss(e),i=is(t-hu),a=ss(i),o=r*hs(i),s=pu*n-du*r*a,l=du*n+pu*r*a;gu.add(os(ps(o*o+s*s),l)),hu=t,du=n,pu=r}function bu(t){return gu.reset(),As(t,yu),+gu}var _u=[null,null],wu={type:"LineString",coordinates:_u};function ku(t,e){return _u[0]=t,_u[1]=e,bu(wu)}var Mu={Feature:function(t,e){return Tu(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)if(Tu(n[r].geometry,e))return!0;return!1}},Au={Sphere:function(){return!0},Point:function(t,e){return Cu(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Cu(n[r],e))return!0;return!1},LineString:function(t,e){return Eu(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Eu(n[r],e))return!0;return!1},Polygon:function(t,e){return Nu(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Nu(n[r],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)if(Tu(n[r],e))return!0;return!1}};function Tu(t,e){return!(!t||!Au.hasOwnProperty(t.type))&&Au[t.type](t,e)}function Cu(t,e){return 0===ku(t,e)}function Eu(t,e){for(var n,r,i,a=0,o=t.length;a<o;a++){if(0===(r=ku(t[a],e)))return!0;if(a>0&&(i=ku(t[a],t[a-1]))>0&&n<=i&&r<=i&&(n+r-i)*(1-Math.pow((n-r)/i,2))<Zo*i)return!0;n=r}return!1}function Nu(t,e){return!!ru(t.map(Ru),Su(e))}function Ru(t){return(t=t.map(Su)).pop(),t}function Su(t){return[t[0]*rs,t[1]*rs]}function Pu(t,e,n){var r=y(t,e-Jo,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function zu(t,e,n){var r=y(t,e-Jo,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}function Ou(){var t,e,n,r,i,a,o,s,l,u,c,f,h=10,d=h,p=90,g=360,v=2.5;function m(){return{type:"MultiLineString",coordinates:x()}}function x(){return y(ls(r/p)*p,n,p).map(c).concat(y(ls(s/g)*g,o,g).map(f)).concat(y(ls(e/h)*h,t,h).filter(function(t){return is(t%p)>Jo}).map(l)).concat(y(ls(a/d)*d,i,d).filter(function(t){return is(t%g)>Jo}).map(u))}return m.lines=function(){return x().map(function(t){return{type:"LineString",coordinates:t}})},m.outline=function(){return{type:"Polygon",coordinates:[c(r).concat(f(o).slice(1),c(n).reverse().slice(1),f(s).reverse().slice(1))]}},m.extent=function(t){return arguments.length?m.extentMajor(t).extentMinor(t):m.extentMinor()},m.extentMajor=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],s=+t[0][1],o=+t[1][1],r>n&&(t=r,r=n,n=t),s>o&&(t=s,s=o,o=t),m.precision(v)):[[r,s],[n,o]]},m.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],a=+n[0][1],i=+n[1][1],e>t&&(n=e,e=t,t=n),a>i&&(n=a,a=i,i=n),m.precision(v)):[[e,a],[t,i]]},m.step=function(t){return arguments.length?m.stepMajor(t).stepMinor(t):m.stepMinor()},m.stepMajor=function(t){return arguments.length?(p=+t[0],g=+t[1],m):[p,g]},m.stepMinor=function(t){return arguments.length?(h=+t[0],d=+t[1],m):[h,d]},m.precision=function(h){return arguments.length?(v=+h,l=Pu(a,i,90),u=zu(e,t,v),c=Pu(s,o,90),f=zu(r,n,v),m):v},m.extentMajor([[-180,-90+Jo],[180,90-Jo]]).extentMinor([[-180,-80-Jo],[180,80+Jo]])}function Lu(t){return t}var Du,Iu,Bu,ju,Yu=$o(),Hu=$o(),Uu={point:xs,lineStart:xs,lineEnd:xs,polygonStart:function(){Uu.lineStart=qu,Uu.lineEnd=$u},polygonEnd:function(){Uu.lineStart=Uu.lineEnd=Uu.point=xs,Yu.add(is(Hu)),Hu.reset()},result:function(){var t=Yu/2;return Yu.reset(),t}};function qu(){Uu.point=Fu}function Fu(t,e){Uu.point=Wu,Du=Bu=t,Iu=ju=e}function Wu(t,e){Hu.add(ju*t-Bu*e),Bu=t,ju=e}function $u(){Wu(Du,Iu)}var Gu,Vu,Xu,Ju,Zu=1/0,Ku=Zu,Qu=-Zu,tc=Qu,ec={point:function(t,e){t<Zu&&(Zu=t),t>Qu&&(Qu=t),e<Ku&&(Ku=e),e>tc&&(tc=e)},lineStart:xs,lineEnd:xs,polygonStart:xs,polygonEnd:xs,result:function(){var t=[[Zu,Ku],[Qu,tc]];return Qu=tc=-(Ku=Zu=1/0),t}},nc=0,rc=0,ic=0,ac=0,oc=0,sc=0,lc=0,uc=0,cc=0,fc={point:hc,lineStart:dc,lineEnd:yc,polygonStart:function(){fc.lineStart=vc,fc.lineEnd=mc},polygonEnd:function(){fc.point=hc,fc.lineStart=dc,fc.lineEnd=yc},result:function(){var t=cc?[lc/cc,uc/cc]:sc?[ac/sc,oc/sc]:ic?[nc/ic,rc/ic]:[NaN,NaN];return nc=rc=ic=ac=oc=sc=lc=uc=cc=0,t}};function hc(t,e){nc+=t,rc+=e,++ic}function dc(){fc.point=pc}function pc(t,e){fc.point=gc,hc(Xu=t,Ju=e)}function gc(t,e){var n=t-Xu,r=e-Ju,i=ps(n*n+r*r);ac+=i*(Xu+t)/2,oc+=i*(Ju+e)/2,sc+=i,hc(Xu=t,Ju=e)}function yc(){fc.point=hc}function vc(){fc.point=xc}function mc(){bc(Gu,Vu)}function xc(t,e){fc.point=bc,hc(Gu=Xu=t,Vu=Ju=e)}function bc(t,e){var n=t-Xu,r=e-Ju,i=ps(n*n+r*r);ac+=i*(Xu+t)/2,oc+=i*(Ju+e)/2,sc+=i,lc+=(i=Ju*t-Xu*e)*(Xu+t),uc+=i*(Ju+e),cc+=3*i,hc(Xu=t,Ju=e)}function _c(t){this._context=t}_c.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,es)}},result:xs};var wc,kc,Mc,Ac,Tc,Cc=$o(),Ec={point:xs,lineStart:function(){Ec.point=Nc},lineEnd:function(){wc&&Rc(kc,Mc),Ec.point=xs},polygonStart:function(){wc=!0},polygonEnd:function(){wc=null},result:function(){var t=+Cc;return Cc.reset(),t}};function Nc(t,e){Ec.point=Rc,kc=Ac=t,Mc=Tc=e}function Rc(t,e){Ac-=t,Tc-=e,Cc.add(ps(Ac*Ac+Tc*Tc)),Ac=t,Tc=e}function Sc(){this._string=[]}function Pc(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function zc(t){return function(e){var n=new Oc;for(var r in t)n[r]=t[r];return n.stream=e,n}}function Oc(){}function Lc(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),As(n,t.stream(ec)),e(ec.result()),null!=r&&t.clipExtent(r),t}function Dc(t,e,n){return Lc(t,function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],a=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),o=+e[0][0]+(r-a*(n[1][0]+n[0][0]))/2,s=+e[0][1]+(i-a*(n[1][1]+n[0][1]))/2;t.scale(150*a).translate([o,s])},n)}function Ic(t,e,n){return Dc(t,[[0,0],e],n)}function Bc(t,e,n){return Lc(t,function(n){var r=+e,i=r/(n[1][0]-n[0][0]),a=(r-i*(n[1][0]+n[0][0]))/2,o=-i*n[0][1];t.scale(150*i).translate([a,o])},n)}function jc(t,e,n){return Lc(t,function(n){var r=+e,i=r/(n[1][1]-n[0][1]),a=-i*n[0][0],o=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([a,o])},n)}Sc.prototype={_radius:4.5,_circle:Pc(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=Pc(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}},Oc.prototype={constructor:Oc,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Yc=16,Hc=ss(30*rs);function Uc(t,e){return+e?function(t,e){function n(r,i,a,o,s,l,u,c,f,h,d,p,g,y){var v=u-r,m=c-i,x=v*v+m*m;if(x>4*e&&g--){var b=o+h,_=s+d,w=l+p,k=ps(b*b+_*_+w*w),M=vs(w/=k),A=is(is(w)-1)<Jo||is(a-f)<Jo?(a+f)/2:os(_,b),T=t(A,M),C=T[0],E=T[1],N=C-r,R=E-i,S=m*N-v*R;(S*S/x>e||is((v*N+m*R)/x-.5)>.3||o*h+s*d+l*p<Hc)&&(n(r,i,a,o,s,l,C,E,A,b/=k,_/=k,w,g,y),y.point(C,E),n(C,E,A,b,_,w,u,c,f,h,d,p,g,y))}}return function(e){var r,i,a,o,s,l,u,c,f,h,d,p,g={point:y,lineStart:v,lineEnd:x,polygonStart:function(){e.polygonStart(),g.lineStart=b},polygonEnd:function(){e.polygonEnd(),g.lineStart=v}};function y(n,r){n=t(n,r),e.point(n[0],n[1])}function v(){c=NaN,g.point=m,e.lineStart()}function m(r,i){var a=js([r,i]),o=t(r,i);n(c,f,u,h,d,p,c=o[0],f=o[1],u=r,h=a[0],d=a[1],p=a[2],Yc,e),e.point(c,f)}function x(){g.point=y,e.lineEnd()}function b(){v(),g.point=_,g.lineEnd=w}function _(t,e){m(r=t,e),i=c,a=f,o=h,s=d,l=p,g.point=m}function w(){n(c,f,u,h,d,p,i,a,r,o,s,l,Yc,e),g.lineEnd=x,x()}return g}}(t,e):function(t){return zc({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var qc=zc({point:function(t,e){this.stream.point(t*rs,e*rs)}});function Fc(t,e,n,r,i,a){var o=ss(a),s=hs(a),l=o*t,u=s*t,c=o/t,f=s/t,h=(s*n-o*e)/t,d=(s*e+o*n)/t;function p(t,a){return[l*(t*=r)-u*(a*=i)+e,n-u*t-l*a]}return p.invert=function(t,e){return[r*(c*t-f*e+h),i*(d-f*t-c*e)]},p}function Wc(t){return $c(function(){return t})()}function $c(t){var e,n,r,i,a,o,s,l,u,c,f=150,h=480,d=250,p=0,g=0,y=0,v=0,m=0,x=0,b=1,_=1,w=null,k=su,M=null,A=Lu,T=.5;function C(t){return l(t[0]*rs,t[1]*rs)}function E(t){return(t=l.invert(t[0],t[1]))&&[t[0]*ns,t[1]*ns]}function N(){var t=Fc(f,0,0,b,_,x).apply(null,e(p,g)),r=(x?Fc:function(t,e,n,r,i){function a(a,o){return[e+t*(a*=r),n-t*(o*=i)]}return a.invert=function(a,o){return[(a-e)/t*r,(n-o)/t*i]},a})(f,h-t[0],d-t[1],b,_,x);return n=ql(y,v,m),s=Hl(e,r),l=Hl(n,s),o=Uc(s,T),R()}function R(){return u=c=null,C}return C.stream=function(t){return u&&c===t?u:u=qc(function(t){return zc({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}(n)(k(o(A(c=t)))))},C.preclip=function(t){return arguments.length?(k=t,w=void 0,R()):k},C.postclip=function(t){return arguments.length?(A=t,M=r=i=a=null,R()):A},C.clipAngle=function(t){return arguments.length?(k=+t?lu(w=t*rs):(w=null,su),R()):w*ns},C.clipExtent=function(t){return arguments.length?(A=null==t?(M=r=i=a=null,Lu):fu(M=+t[0][0],r=+t[0][1],i=+t[1][0],a=+t[1][1]),R()):null==M?null:[[M,r],[i,a]]},C.scale=function(t){return arguments.length?(f=+t,N()):f},C.translate=function(t){return arguments.length?(h=+t[0],d=+t[1],N()):[h,d]},C.center=function(t){return arguments.length?(p=t[0]%360*rs,g=t[1]%360*rs,N()):[p*ns,g*ns]},C.rotate=function(t){return arguments.length?(y=t[0]%360*rs,v=t[1]%360*rs,m=t.length>2?t[2]%360*rs:0,N()):[y*ns,v*ns,m*ns]},C.angle=function(t){return arguments.length?(x=t%360*rs,N()):x*ns},C.reflectX=function(t){return arguments.length?(b=t?-1:1,N()):b<0},C.reflectY=function(t){return arguments.length?(_=t?-1:1,N()):_<0},C.precision=function(t){return arguments.length?(o=Uc(s,T=t*t),R()):ps(T)},C.fitExtent=function(t,e){return Dc(C,t,e)},C.fitSize=function(t,e){return Ic(C,t,e)},C.fitWidth=function(t,e){return Bc(C,t,e)},C.fitHeight=function(t,e){return jc(C,t,e)},function(){return e=t.apply(this,arguments),C.invert=e.invert&&E,N()}}function Gc(t){var e=0,n=Ko/3,r=$c(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*rs,n=t[1]*rs):[e*ns,n*ns]},i}function Vc(t,e){var n=hs(t),r=(n+hs(e))/2;if(is(r)<Jo)return function(t){var e=ss(t);function n(t,n){return[t*e,hs(n)/e]}return n.invert=function(t,n){return[t/e,vs(n*e)]},n}(t);var i=1+n*(2*r-n),a=ps(i)/r;function o(t,e){var n=ps(i-2*r*hs(e))/r;return[n*hs(t*=r),a-n*ss(t)]}return o.invert=function(t,e){var n=a-e,o=os(t,is(n))*ds(n);return n*r<0&&(o-=Ko*ds(t)*ds(n)),[o/r,vs((i-(t*t+n*n)*r*r)/(2*r))]},o}function Xc(){return Gc(Vc).scale(155.424).center([0,33.6442])}function Jc(){return Xc().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Zc(t){return function(e,n){var r=ss(e),i=ss(n),a=t(r*i);return[a*i*hs(e),a*hs(n)]}}function Kc(t){return function(e,n){var r=ps(e*e+n*n),i=t(r),a=hs(i),o=ss(i);return[os(e*a,r*o),vs(r&&n*a/r)]}}var Qc=Zc(function(t){return ps(2/(1+t))});Qc.invert=Kc(function(t){return 2*vs(t/2)});var tf=Zc(function(t){return(t=ys(t))&&t/hs(t)});function ef(t,e){return[t,cs(gs((Qo+e)/2))]}function nf(t){var e,n,r,i=Wc(t),a=i.center,o=i.scale,s=i.translate,l=i.clipExtent,u=null;function c(){var a=Ko*o(),s=i(Gl(i.rotate()).invert([0,0]));return l(null==u?[[s[0]-a,s[1]-a],[s[0]+a,s[1]+a]]:t===ef?[[Math.max(s[0]-a,u),e],[Math.min(s[0]+a,n),r]]:[[u,Math.max(s[1]-a,e)],[n,Math.min(s[1]+a,r)]])}return i.scale=function(t){return arguments.length?(o(t),c()):o()},i.translate=function(t){return arguments.length?(s(t),c()):s()},i.center=function(t){return arguments.length?(a(t),c()):a()},i.clipExtent=function(t){return arguments.length?(null==t?u=e=n=r=null:(u=+t[0][0],e=+t[0][1],n=+t[1][0],r=+t[1][1]),c()):null==u?null:[[u,e],[n,r]]},c()}function rf(t){return gs((Qo+t)/2)}function af(t,e){var n=ss(t),r=t===e?hs(t):cs(n/ss(e))/cs(rf(e)/rf(t)),i=n*fs(rf(t),r)/r;if(!r)return ef;function a(t,e){i>0?e<-Qo+Jo&&(e=-Qo+Jo):e>Qo-Jo&&(e=Qo-Jo);var n=i/fs(rf(e),r);return[n*hs(r*t),i-n*ss(r*t)]}return a.invert=function(t,e){var n=i-e,a=ds(r)*ps(t*t+n*n),o=os(t,is(n))*ds(n);return n*r<0&&(o-=Ko*ds(t)*ds(n)),[o/r,2*as(fs(i/a,1/r))-Qo]},a}function of(t,e){return[t,e]}function sf(t,e){var n=ss(t),r=t===e?hs(t):(n-ss(e))/(e-t),i=n/r+t;if(is(r)<Jo)return of;function a(t,e){var n=i-e,a=r*t;return[n*hs(a),i-n*ss(a)]}return a.invert=function(t,e){var n=i-e,a=os(t,is(n))*ds(n);return n*r<0&&(a-=Ko*ds(t)*ds(n)),[a/r,i-ds(r)*ps(t*t+n*n)]},a}tf.invert=Kc(function(t){return t}),ef.invert=function(t,e){return[t,2*as(us(e))-Qo]},of.invert=of;var lf=1.340264,uf=-.081106,cf=893e-6,ff=.003796,hf=ps(3)/2;function df(t,e){var n=vs(hf*hs(e)),r=n*n,i=r*r*r;return[t*ss(n)/(hf*(lf+3*uf*r+i*(7*cf+9*ff*r))),n*(lf+uf*r+i*(cf+ff*r))]}function pf(t,e){var n=ss(e),r=ss(t)*n;return[n*hs(t)/r,hs(e)/r]}function gf(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function yf(t,e){return[ss(e)*hs(t),hs(e)]}function vf(t,e){var n=ss(e),r=1+ss(t)*n;return[n*hs(t)/r,hs(e)/r]}function mf(t,e){return[cs(gs((Qo+e)/2)),-t]}function xf(t,e){return t.parent===e.parent?1:2}function bf(t,e){return t+e.x}function _f(t,e){return Math.max(t,e.y)}function wf(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function kf(t,e){var n,r,i,a,o,s=new Cf(t),l=+t.value&&(s.value=t.value),u=[s];for(null==e&&(e=Mf);n=u.pop();)if(l&&(n.value=+n.data.value),(i=e(n.data))&&(o=i.length))for(n.children=new Array(o),a=o-1;a>=0;--a)u.push(r=n.children[a]=new Cf(i[a])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(Tf)}function Mf(t){return t.children}function Af(t){t.data=t.data.data}function Tf(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function Cf(t){this.data=t,this.depth=this.height=0,this.parent=null}df.invert=function(t,e){for(var n,r=e,i=r*r,a=i*i*i,o=0;o<12&&(a=(i=(r-=n=(r*(lf+uf*i+a*(cf+ff*i))-e)/(lf+3*uf*i+a*(7*cf+9*ff*i)))*r)*i*i,!(is(n)<Zo));++o);return[hf*t*(lf+3*uf*i+a*(7*cf+9*ff*i))/ss(r),vs(hs(r)/hf)]},pf.invert=Kc(as),gf.invert=function(t,e){var n,r=e,i=25;do{var a=r*r,o=a*a;r-=n=(r*(1.007226+a*(.015085+o*(.028874*a-.044475-.005916*o)))-e)/(1.007226+a*(.045255+o*(.259866*a-.311325-.005916*11*o)))}while(is(n)>Jo&&--i>0);return[t/(.8707+(a=r*r)*(a*(a*a*a*(.003971-.001529*a)-.013791)-.131979)),r]},yf.invert=Kc(vs),vf.invert=Kc(function(t){return 2*as(t)}),mf.invert=function(t,e){return[-e,2*as(us(t))-Qo]},Cf.prototype=kf.prototype={constructor:Cf,count:function(){return this.eachAfter(wf)},each:function(t){var e,n,r,i,a=this,o=[a];do{for(e=o.reverse(),o=[];a=e.pop();)if(t(a),n=a.children)for(r=0,i=n.length;r<i;++r)o.push(n[r])}while(o.length);return this},eachAfter:function(t){for(var e,n,r,i=this,a=[i],o=[];i=a.pop();)if(o.push(i),e=i.children)for(n=0,r=e.length;n<r;++n)a.push(e[n]);for(;i=o.pop();)t(i);return this},eachBefore:function(t){for(var e,n,r=this,i=[r];r=i.pop();)if(t(r),e=r.children)for(n=e.length-1;n>=0;--n)i.push(e[n]);return this},sum:function(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})},sort:function(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){var t=[];return this.each(function(e){t.push(e)}),t},leaves:function(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t},links:function(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e},copy:function(){return kf(this).eachBefore(Af)}};var Ef=Array.prototype.slice;function Nf(t){for(var e,n,r=0,i=(t=function(t){for(var e,n,r=t.length;r;)n=Math.random()*r--|0,e=t[r],t[r]=t[n],t[n]=e;return t}(Ef.call(t))).length,a=[];r<i;)e=t[r],n&&Pf(n,e)?++r:(n=Of(a=Rf(a,e)),r=0);return n}function Rf(t,e){var n,r;if(zf(e,t))return[e];for(n=0;n<t.length;++n)if(Sf(e,t[n])&&zf(Lf(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(Sf(Lf(t[n],t[r]),e)&&Sf(Lf(t[n],e),t[r])&&Sf(Lf(t[r],e),t[n])&&zf(Df(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function Sf(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function Pf(t,e){var n=t.r-e.r+1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function zf(t,e){for(var n=0;n<e.length;++n)if(!Pf(t,e[n]))return!1;return!0}function Of(t){switch(t.length){case 1:return function(t){return{x:t.x,y:t.y,r:t.r}}(t[0]);case 2:return Lf(t[0],t[1]);case 3:return Df(t[0],t[1],t[2])}}function Lf(t,e){var n=t.x,r=t.y,i=t.r,a=e.x,o=e.y,s=e.r,l=a-n,u=o-r,c=s-i,f=Math.sqrt(l*l+u*u);return{x:(n+a+l/f*c)/2,y:(r+o+u/f*c)/2,r:(f+i+s)/2}}function Df(t,e,n){var r=t.x,i=t.y,a=t.r,o=e.x,s=e.y,l=e.r,u=n.x,c=n.y,f=n.r,h=r-o,d=r-u,p=i-s,g=i-c,y=l-a,v=f-a,m=r*r+i*i-a*a,x=m-o*o-s*s+l*l,b=m-u*u-c*c+f*f,_=d*p-h*g,w=(p*b-g*x)/(2*_)-r,k=(g*y-p*v)/_,M=(d*x-h*b)/(2*_)-i,A=(h*v-d*y)/_,T=k*k+A*A-1,C=2*(a+w*k+M*A),E=w*w+M*M-a*a,N=-(T?(C+Math.sqrt(C*C-4*T*E))/(2*T):E/C);return{x:r+w+k*N,y:i+M+A*N,r:N}}function If(t,e,n){var r,i,a,o,s=t.x-e.x,l=t.y-e.y,u=s*s+l*l;u?(i=e.r+n.r,i*=i,o=t.r+n.r,i>(o*=o)?(r=(u+o-i)/(2*u),a=Math.sqrt(Math.max(0,o/u-r*r)),n.x=t.x-r*s-a*l,n.y=t.y-r*l+a*s):(r=(u+i-o)/(2*u),a=Math.sqrt(Math.max(0,i/u-r*r)),n.x=e.x+r*s-a*l,n.y=e.y+r*l+a*s)):(n.x=e.x+n.r,n.y=e.y)}function Bf(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function jf(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,a=(e.y*n.r+n.y*e.r)/r;return i*i+a*a}function Yf(t){this._=t,this.next=null,this.previous=null}function Hf(t){if(!(i=t.length))return 0;var e,n,r,i,a,o,s,l,u,c,f;if((e=t[0]).x=0,e.y=0,!(i>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(i>2))return e.r+n.r;If(n,e,r=t[2]),e=new Yf(e),n=new Yf(n),r=new Yf(r),e.next=r.previous=n,n.next=e.previous=r,r.next=n.previous=e;t:for(s=3;s<i;++s){If(e._,n._,r=t[s]),r=new Yf(r),l=n.next,u=e.previous,c=n._.r,f=e._.r;do{if(c<=f){if(Bf(l._,r._)){n=l,e.next=n,n.previous=e,--s;continue t}c+=l._.r,l=l.next}else{if(Bf(u._,r._)){(e=u).next=n,n.previous=e,--s;continue t}f+=u._.r,u=u.previous}}while(l!==u.next);for(r.previous=e,r.next=n,e.next=n.previous=n=r,a=jf(e);(r=r.next)!==n;)(o=jf(r))<a&&(e=r,a=o);n=e.next}for(e=[n._],r=n;(r=r.next)!==n;)e.push(r._);for(r=Nf(e),s=0;s<i;++s)(e=t[s]).x-=r.x,e.y-=r.y;return r.r}function Uf(t){if("function"!=typeof t)throw new Error;return t}function qf(){return 0}function Ff(t){return function(){return t}}function Wf(t){return Math.sqrt(t.value)}function $f(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function Gf(t,e){return function(n){if(r=n.children){var r,i,a,o=r.length,s=t(n)*e||0;if(s)for(i=0;i<o;++i)r[i].r+=s;if(a=Hf(r),s)for(i=0;i<o;++i)r[i].r-=s;n.r=a+s}}}function Vf(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function Xf(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function Jf(t,e,n,r,i){for(var a,o=t.children,s=-1,l=o.length,u=t.value&&(r-e)/t.value;++s<l;)(a=o[s]).y0=n,a.y1=i,a.x0=e,a.x1=e+=a.value*u}var Zf="$",Kf={depth:-1},Qf={};function th(t){return t.id}function eh(t){return t.parentId}function nh(t,e){return t.parent===e.parent?1:2}function rh(t){var e=t.children;return e?e[0]:t.t}function ih(t){var e=t.children;return e?e[e.length-1]:t.t}function ah(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function oh(t,e,n){return t.a.parent===e.parent?t.a:n}function sh(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function lh(t,e,n,r,i){for(var a,o=t.children,s=-1,l=o.length,u=t.value&&(i-n)/t.value;++s<l;)(a=o[s]).x0=e,a.x1=r,a.y0=n,a.y1=n+=a.value*u}sh.prototype=Object.create(Cf.prototype);var uh=(1+Math.sqrt(5))/2;function ch(t,e,n,r,i,a){for(var o,s,l,u,c,f,h,d,p,g,y,v=[],m=e.children,x=0,b=0,_=m.length,w=e.value;x<_;){l=i-n,u=a-r;do{c=m[b++].value}while(!c&&b<_);for(f=h=c,y=c*c*(g=Math.max(u/l,l/u)/(w*t)),p=Math.max(h/y,y/f);b<_;++b){if(c+=s=m[b].value,s<f&&(f=s),s>h&&(h=s),y=c*c*g,(d=Math.max(h/y,y/f))>p){c-=s;break}p=d}v.push(o={value:c,dice:l<u,children:m.slice(x,b)}),o.dice?Jf(o,n,r,i,w?r+=u*c/w:a):lh(o,n,r,w?n+=l*c/w:i,a),w-=c,x=b}return v}var fh=function t(e){function n(t,n,r,i,a){ch(e,t,n,r,i,a)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(uh),hh=function t(e){function n(t,n,r,i,a){if((o=t._squarify)&&o.ratio===e)for(var o,s,l,u,c,f=-1,h=o.length,d=t.value;++f<h;){for(l=(s=o[f]).children,u=s.value=0,c=l.length;u<c;++u)s.value+=l[u].value;s.dice?Jf(s,n,r,i,r+=(a-r)*s.value/d):lh(s,n,r,n+=(i-n)*s.value/d,a),d-=s.value}else t._squarify=o=ch(e,t,n,r,i,a),o.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(uh);function dh(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function ph(t,e){return t[0]-e[0]||t[1]-e[1]}function gh(t){for(var e=t.length,n=[0,1],r=2,i=2;i<e;++i){for(;r>1&&dh(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function yh(){return Math.random()}var vh=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,1===arguments.length?(n=t,t=0):n-=t,function(){return e()*n+t}}return n.source=t,n}(yh),mh=function t(e){function n(t,n){var r,i;return t=null==t?0:+t,n=null==n?1:+n,function(){var a;if(null!=r)a=r,r=null;else do{r=2*e()-1,a=2*e()-1,i=r*r+a*a}while(!i||i>1);return t+n*a*Math.sqrt(-2*Math.log(i)/i)}}return n.source=t,n}(yh),xh=function t(e){function n(){var t=mh.source(e).apply(this,arguments);return function(){return Math.exp(t())}}return n.source=t,n}(yh),bh=function t(e){function n(t){return function(){for(var n=0,r=0;r<t;++r)n+=e();return n}}return n.source=t,n}(yh),_h=function t(e){function n(t){var n=bh.source(e)(t);return function(){return n()/t}}return n.source=t,n}(yh),wh=function t(e){function n(t){return function(){return-Math.log(1-e())/t}}return n.source=t,n}(yh);function kh(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function Mh(t,e){switch(arguments.length){case 0:break;case 1:this.interpolator(t);break;default:this.interpolator(e).domain(t)}return this}var Ah=Array.prototype,Th=Ah.map,Ch=Ah.slice,Eh={name:"implicit"};function Nh(){var t=ia(),e=[],n=[],r=Eh;function i(i){var a=i+"",o=t.get(a);if(!o){if(r!==Eh)return r;t.set(a,o=e.push(i))}return n[(o-1)%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=ia();for(var r,a,o=-1,s=n.length;++o<s;)t.has(a=(r=n[o])+"")||t.set(a,e.push(r));return i},i.range=function(t){return arguments.length?(n=Ch.call(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return Nh(e,n).unknown(r)},kh.apply(i,arguments),i}function Rh(){var t,e,n=Nh().unknown(void 0),r=n.domain,i=n.range,a=[0,1],o=!1,s=0,l=0,u=.5;function c(){var n=r().length,c=a[1]<a[0],f=a[c-0],h=a[1-c];t=(h-f)/Math.max(1,n-s+2*l),o&&(t=Math.floor(t)),f+=(h-f-t*(n-s))*u,e=t*(1-s),o&&(f=Math.round(f),e=Math.round(e));var d=y(n).map(function(e){return f+t*e});return i(c?d.reverse():d)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),c()):r()},n.range=function(t){return arguments.length?(a=[+t[0],+t[1]],c()):a.slice()},n.rangeRound=function(t){return a=[+t[0],+t[1]],o=!0,c()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(o=!!t,c()):o},n.padding=function(t){return arguments.length?(s=Math.min(1,l=+t),c()):s},n.paddingInner=function(t){return arguments.length?(s=Math.min(1,t),c()):s},n.paddingOuter=function(t){return arguments.length?(l=+t,c()):l},n.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),c()):u},n.copy=function(){return Rh(r(),a).round(o).paddingInner(s).paddingOuter(l).align(u)},kh.apply(c(),arguments)}function Sh(t){return+t}var Ph=[0,1];function zh(t){return t}function Oh(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:function(t){return function(){return t}}(isNaN(e)?NaN:.5)}function Lh(t){var e,n=t[0],r=t[t.length-1];return n>r&&(e=n,n=r,r=e),function(t){return Math.max(n,Math.min(r,t))}}function Dh(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=Oh(i,r),a=n(o,a)):(r=Oh(r,i),a=n(a,o)),function(t){return a(r(t))}}function Ih(t,e,n){var r=Math.min(t.length,e.length)-1,a=new Array(r),o=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)a[s]=Oh(t[s],t[s+1]),o[s]=n(e[s],e[s+1]);return function(e){var n=i(t,e,1,r)-1;return o[n](a[n](e))}}function Bh(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function jh(){var t,e,n,r,i,a,o=Ph,s=Ph,l=wn,u=zh;function c(){return r=Math.min(o.length,s.length)>2?Ih:Dh,i=a=null,f}function f(e){return isNaN(e=+e)?n:(i||(i=r(o.map(t),s,l)))(t(u(e)))}return f.invert=function(n){return u(e((a||(a=r(s,o.map(t),vn)))(n)))},f.domain=function(t){return arguments.length?(o=Th.call(t,Sh),u===zh||(u=Lh(o)),c()):o.slice()},f.range=function(t){return arguments.length?(s=Ch.call(t),c()):s.slice()},f.rangeRound=function(t){return s=Ch.call(t),l=kn,c()},f.clamp=function(t){return arguments.length?(u=t?Lh(o):zh,f):u!==zh},f.interpolate=function(t){return arguments.length?(l=t,c()):l},f.unknown=function(t){return arguments.length?(n=t,f):n},function(n,r){return t=n,e=r,c()}}function Yh(t,e){return jh()(t,e)}function Hh(e,n,r,i){var a,o=w(e,n,r);switch((i=zo(null==i?",f":i)).type){case"s":var s=Math.max(Math.abs(e),Math.abs(n));return null!=i.precision||isNaN(a=Fo(o,s))||(i.precision=a),t.formatPrefix(i,s);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(a=Wo(o,Math.max(Math.abs(e),Math.abs(n))))||(i.precision=a-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(a=qo(o))||(i.precision=a-2*("%"===i.type))}return t.format(i)}function Uh(t){var e=t.domain;return t.ticks=function(t){var n=e();return b(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return Hh(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i=e(),a=0,o=i.length-1,s=i[a],l=i[o];return l<s&&(r=s,s=l,l=r,r=a,a=o,o=r),(r=_(s,l,n))>0?r=_(s=Math.floor(s/r)*r,l=Math.ceil(l/r)*r,n):r<0&&(r=_(s=Math.ceil(s*r)/r,l=Math.floor(l*r)/r,n)),r>0?(i[a]=Math.floor(s/r)*r,i[o]=Math.ceil(l/r)*r,e(i)):r<0&&(i[a]=Math.ceil(s*r)/r,i[o]=Math.floor(l*r)/r,e(i)),t},t}function qh(t,e){var n,r=0,i=(t=t.slice()).length-1,a=t[r],o=t[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),t[r]=e.floor(a),t[i]=e.ceil(o),t}function Fh(t){return Math.log(t)}function Wh(t){return Math.exp(t)}function $h(t){return-Math.log(-t)}function Gh(t){return-Math.exp(-t)}function Vh(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Xh(t){return function(e){return-t(-e)}}function Jh(e){var n,r,i=e(Fh,Wh),a=i.domain,o=10;function s(){return n=(t=o)===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t}),r=function(t){return 10===t?Vh:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}(o),a()[0]<0?(n=Xh(n),r=Xh(r),e($h,Gh)):e(Fh,Wh),i;var t}return i.base=function(t){return arguments.length?(o=+t,s()):o},i.domain=function(t){return arguments.length?(a(t),s()):a()},i.ticks=function(t){var e,i=a(),s=i[0],l=i[i.length-1];(e=l<s)&&(h=s,s=l,l=h);var u,c,f,h=n(s),d=n(l),p=null==t?10:+t,g=[];if(!(o%1)&&d-h<p){if(h=Math.round(h)-1,d=Math.round(d)+1,s>0){for(;h<d;++h)for(c=1,u=r(h);c<o;++c)if(!((f=u*c)<s)){if(f>l)break;g.push(f)}}else for(;h<d;++h)for(c=o-1,u=r(h);c>=1;--c)if(!((f=u*c)<s)){if(f>l)break;g.push(f)}}else g=b(h,d,Math.min(d-h,p)).map(r);return e?g.reverse():g},i.tickFormat=function(e,a){if(null==a&&(a=10===o?".0e":","),"function"!=typeof a&&(a=t.format(a)),e===1/0)return a;null==e&&(e=10);var s=Math.max(1,o*e/i.ticks().length);return function(t){var e=t/r(Math.round(n(t)));return e*o<o-.5&&(e*=o),e<=s?a(t):""}},i.nice=function(){return a(qh(a(),{floor:function(t){return r(Math.floor(n(t)))},ceil:function(t){return r(Math.ceil(n(t)))}}))},i}function Zh(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function Kh(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Qh(t){var e=1,n=t(Zh(e),Kh(e));return n.constant=function(n){return arguments.length?t(Zh(e=+n),Kh(e)):e},Uh(n)}function td(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function ed(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function nd(t){return t<0?-t*t:t*t}function rd(t){var e=t(zh,zh),n=1;function r(){return 1===n?t(zh,zh):.5===n?t(ed,nd):t(td(n),td(1/n))}return e.exponent=function(t){return arguments.length?(n=+t,r()):n},Uh(e)}function id(){var t=rd(jh());return t.copy=function(){return Bh(t,id()).exponent(t.exponent())},kh.apply(t,arguments),t}var ad=new Date,od=new Date;function sd(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=function(e){return t(e=new Date(+e)),e},i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,a){var o,s=[];if(n=i.ceil(n),a=null==a?1:Math.floor(a),!(n<r&&a>0))return s;do{s.push(o=new Date(+n)),e(n,a),t(n)}while(o<n&&n<r);return s},i.filter=function(n){return sd(function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)},function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););})},n&&(i.count=function(e,r){return ad.setTime(+e),od.setTime(+r),t(ad),t(od),Math.floor(n(ad,od))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}var ld=sd(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});ld.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?sd(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):ld:null};var ud=ld.range,cd=6e4,fd=6048e5,hd=sd(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()}),dd=hd.range,pd=sd(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())},function(t,e){t.setTime(+t+e*cd)},function(t,e){return(e-t)/cd},function(t){return t.getMinutes()}),gd=pd.range,yd=sd(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-t.getMinutes()*cd)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getHours()}),vd=yd.range,md=sd(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*cd)/864e5},function(t){return t.getDate()-1}),xd=md.range;function bd(t){return sd(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*cd)/fd})}var _d=bd(0),wd=bd(1),kd=bd(2),Md=bd(3),Ad=bd(4),Td=bd(5),Cd=bd(6),Ed=_d.range,Nd=wd.range,Rd=kd.range,Sd=Md.range,Pd=Ad.range,zd=Td.range,Od=Cd.range,Ld=sd(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),Dd=Ld.range,Id=sd(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});Id.every=function(t){return isFinite(t=Math.floor(t))&&t>0?sd(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null};var Bd=Id.range,jd=sd(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*cd)},function(t,e){return(e-t)/cd},function(t){return t.getUTCMinutes()}),Yd=jd.range,Hd=sd(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getUTCHours()}),Ud=Hd.range,qd=sd(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1}),Fd=qd.range;function Wd(t){return sd(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/fd})}var $d=Wd(0),Gd=Wd(1),Vd=Wd(2),Xd=Wd(3),Jd=Wd(4),Zd=Wd(5),Kd=Wd(6),Qd=$d.range,tp=Gd.range,ep=Vd.range,np=Xd.range,rp=Jd.range,ip=Zd.range,ap=Kd.range,op=sd(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),sp=op.range,lp=sd(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});lp.every=function(t){return isFinite(t=Math.floor(t))&&t>0?sd(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null};var up=lp.range;function cp(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function fp(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function hp(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function dp(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,s=t.months,l=t.shortMonths,u=_p(i),c=wp(i),f=_p(a),h=wp(a),d=_p(o),p=wp(o),g=_p(s),y=wp(s),v=_p(l),m=wp(l),x={a:function(t){return o[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:qp,e:qp,f:Vp,H:Fp,I:Wp,j:$p,L:Gp,m:Xp,M:Jp,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Mg,s:Ag,S:Zp,u:Kp,U:Qp,V:tg,w:eg,W:ng,x:null,X:null,y:rg,Y:ig,Z:ag,"%":kg},b={a:function(t){return o[t.getUTCDay()]},A:function(t){return a[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:og,e:og,f:fg,H:sg,I:lg,j:ug,L:cg,m:hg,M:dg,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Mg,s:Ag,S:pg,u:gg,U:yg,V:vg,w:mg,W:xg,x:null,X:null,y:bg,Y:_g,Z:wg,"%":kg},_={a:function(t,e,n){var r=d.exec(e.slice(n));return r?(t.w=p[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=f.exec(e.slice(n));return r?(t.w=h[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=v.exec(e.slice(n));return r?(t.m=m[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=g.exec(e.slice(n));return r?(t.m=y[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,n,r){return M(t,e,n,r)},d:zp,e:zp,f:jp,H:Lp,I:Lp,j:Op,L:Bp,m:Pp,M:Dp,p:function(t,e,n){var r=u.exec(e.slice(n));return r?(t.p=c[r[0].toLowerCase()],n+r[0].length):-1},q:Sp,Q:Hp,s:Up,S:Ip,u:Mp,U:Ap,V:Tp,w:kp,W:Cp,x:function(t,e,r){return M(t,n,e,r)},X:function(t,e,n){return M(t,r,e,n)},y:Np,Y:Ep,Z:Rp,"%":Yp};function w(t,e){return function(n){var r,i,a,o=[],s=-1,l=0,u=t.length;for(n instanceof Date||(n=new Date(+n));++s<u;)37===t.charCodeAt(s)&&(o.push(t.slice(l,s)),null!=(i=gp[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(a=e[r])&&(r=a(n,i)),o.push(r),l=s+1);return o.push(t.slice(l,s)),o.join("")}}function k(t,e){return function(n){var r,i,a=hp(1900,void 0,1);if(M(a,t,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(!e||"Z"in a||(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(r=fp(hp(a.y,0,1))).getUTCDay(),r=i>4||0===i?Gd.ceil(r):Gd(r),r=qd.offset(r,7*(a.V-1)),a.y=r.getUTCFullYear(),a.m=r.getUTCMonth(),a.d=r.getUTCDate()+(a.w+6)%7):(i=(r=cp(hp(a.y,0,1))).getDay(),r=i>4||0===i?wd.ceil(r):wd(r),r=md.offset(r,7*(a.V-1)),a.y=r.getFullYear(),a.m=r.getMonth(),a.d=r.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?fp(hp(a.y,0,1)).getUTCDay():cp(hp(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,fp(a)):cp(a)}}function M(t,e,n,r){for(var i,a,o=0,s=e.length,l=n.length;o<s;){if(r>=l)return-1;if(37===(i=e.charCodeAt(o++))){if(i=e.charAt(o++),!(a=_[i in gp?e.charAt(o++):i])||(r=a(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return x.x=w(n,x),x.X=w(r,x),x.c=w(e,x),b.x=w(n,b),b.X=w(r,b),b.c=w(e,b),{format:function(t){var e=w(t+="",x);return e.toString=function(){return t},e},parse:function(t){var e=k(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+="",b);return e.toString=function(){return t},e},utcParse:function(t){var e=k(t+="",!0);return e.toString=function(){return t},e}}}var pp,gp={"-":"",_:" ",0:"0"},yp=/^\s*\d+/,vp=/^%/,mp=/[\\^$*+?|[\]().{}]/g;function xp(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function bp(t){return t.replace(mp,"\\$&")}function _p(t){return new RegExp("^(?:"+t.map(bp).join("|")+")","i")}function wp(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function kp(t,e,n){var r=yp.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Mp(t,e,n){var r=yp.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Ap(t,e,n){var r=yp.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Tp(t,e,n){var r=yp.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Cp(t,e,n){var r=yp.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Ep(t,e,n){var r=yp.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Np(t,e,n){var r=yp.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Rp(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Sp(t,e,n){var r=yp.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function Pp(t,e,n){var r=yp.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function zp(t,e,n){var r=yp.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Op(t,e,n){var r=yp.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function Lp(t,e,n){var r=yp.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Dp(t,e,n){var r=yp.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Ip(t,e,n){var r=yp.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Bp(t,e,n){var r=yp.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function jp(t,e,n){var r=yp.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Yp(t,e,n){var r=vp.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Hp(t,e,n){var r=yp.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Up(t,e,n){var r=yp.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function qp(t,e){return xp(t.getDate(),e,2)}function Fp(t,e){return xp(t.getHours(),e,2)}function Wp(t,e){return xp(t.getHours()%12||12,e,2)}function $p(t,e){return xp(1+md.count(Id(t),t),e,3)}function Gp(t,e){return xp(t.getMilliseconds(),e,3)}function Vp(t,e){return Gp(t,e)+"000"}function Xp(t,e){return xp(t.getMonth()+1,e,2)}function Jp(t,e){return xp(t.getMinutes(),e,2)}function Zp(t,e){return xp(t.getSeconds(),e,2)}function Kp(t){var e=t.getDay();return 0===e?7:e}function Qp(t,e){return xp(_d.count(Id(t)-1,t),e,2)}function tg(t,e){var n=t.getDay();return t=n>=4||0===n?Ad(t):Ad.ceil(t),xp(Ad.count(Id(t),t)+(4===Id(t).getDay()),e,2)}function eg(t){return t.getDay()}function ng(t,e){return xp(wd.count(Id(t)-1,t),e,2)}function rg(t,e){return xp(t.getFullYear()%100,e,2)}function ig(t,e){return xp(t.getFullYear()%1e4,e,4)}function ag(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+xp(e/60|0,"0",2)+xp(e%60,"0",2)}function og(t,e){return xp(t.getUTCDate(),e,2)}function sg(t,e){return xp(t.getUTCHours(),e,2)}function lg(t,e){return xp(t.getUTCHours()%12||12,e,2)}function ug(t,e){return xp(1+qd.count(lp(t),t),e,3)}function cg(t,e){return xp(t.getUTCMilliseconds(),e,3)}function fg(t,e){return cg(t,e)+"000"}function hg(t,e){return xp(t.getUTCMonth()+1,e,2)}function dg(t,e){return xp(t.getUTCMinutes(),e,2)}function pg(t,e){return xp(t.getUTCSeconds(),e,2)}function gg(t){var e=t.getUTCDay();return 0===e?7:e}function yg(t,e){return xp($d.count(lp(t)-1,t),e,2)}function vg(t,e){var n=t.getUTCDay();return t=n>=4||0===n?Jd(t):Jd.ceil(t),xp(Jd.count(lp(t),t)+(4===lp(t).getUTCDay()),e,2)}function mg(t){return t.getUTCDay()}function xg(t,e){return xp(Gd.count(lp(t)-1,t),e,2)}function bg(t,e){return xp(t.getUTCFullYear()%100,e,2)}function _g(t,e){return xp(t.getUTCFullYear()%1e4,e,4)}function wg(){return"+0000"}function kg(){return"%"}function Mg(t){return+t}function Ag(t){return Math.floor(+t/1e3)}function Tg(e){return pp=dp(e),t.timeFormat=pp.format,t.timeParse=pp.parse,t.utcFormat=pp.utcFormat,t.utcParse=pp.utcParse,pp}Tg({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Cg=Date.prototype.toISOString?function(t){return t.toISOString()}:t.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),Eg=+new Date("2000-01-01T00:00:00.000Z")?function(t){var e=new Date(t);return isNaN(e)?null:e}:t.utcParse("%Y-%m-%dT%H:%M:%S.%LZ"),Ng=1e3,Rg=60*Ng,Sg=60*Rg,Pg=24*Sg,zg=7*Pg,Og=30*Pg,Lg=365*Pg;function Dg(t){return new Date(t)}function Ig(t){return t instanceof Date?+t:+new Date(+t)}function Bg(t,e,r,i,a,o,s,l,u){var c=Yh(zh,zh),f=c.invert,h=c.domain,d=u(".%L"),p=u(":%S"),g=u("%I:%M"),y=u("%I %p"),v=u("%a %d"),m=u("%b %d"),x=u("%B"),b=u("%Y"),_=[[s,1,Ng],[s,5,5*Ng],[s,15,15*Ng],[s,30,30*Ng],[o,1,Rg],[o,5,5*Rg],[o,15,15*Rg],[o,30,30*Rg],[a,1,Sg],[a,3,3*Sg],[a,6,6*Sg],[a,12,12*Sg],[i,1,Pg],[i,2,2*Pg],[r,1,zg],[e,1,Og],[e,3,3*Og],[t,1,Lg]];function k(n){return(s(n)<n?d:o(n)<n?p:a(n)<n?g:i(n)<n?y:e(n)<n?r(n)<n?v:m:t(n)<n?x:b)(n)}function M(e,r,i,a){if(null==e&&(e=10),"number"==typeof e){var o=Math.abs(i-r)/e,s=n(function(t){return t[2]}).right(_,o);s===_.length?(a=w(r/Lg,i/Lg,e),e=t):s?(a=(s=_[o/_[s-1][2]<_[s][2]/o?s-1:s])[1],e=s[0]):(a=Math.max(w(r,i,e),1),e=l)}return null==a?e:e.every(a)}return c.invert=function(t){return new Date(f(t))},c.domain=function(t){return arguments.length?h(Th.call(t,Ig)):h().map(Dg)},c.ticks=function(t,e){var n,r=h(),i=r[0],a=r[r.length-1],o=a<i;return o&&(n=i,i=a,a=n),n=(n=M(t,i,a,e))?n.range(i,a+1):[],o?n.reverse():n},c.tickFormat=function(t,e){return null==e?k:u(e)},c.nice=function(t,e){var n=h();return(t=M(t,n[0],n[n.length-1],e))?h(qh(n,t)):c},c.copy=function(){return Bh(c,Bg(t,e,r,i,a,o,s,l,u))},c}function jg(){var t,e,n,r,i,a=0,o=1,s=zh,l=!1;function u(e){return isNaN(e=+e)?i:s(0===n?.5:(e=(r(e)-t)*n,l?Math.max(0,Math.min(1,e)):e))}return u.domain=function(i){return arguments.length?(t=r(a=+i[0]),e=r(o=+i[1]),n=t===e?0:1/(e-t),u):[a,o]},u.clamp=function(t){return arguments.length?(l=!!t,u):l},u.interpolator=function(t){return arguments.length?(s=t,u):s},u.unknown=function(t){return arguments.length?(i=t,u):i},function(i){return r=i,t=i(a),e=i(o),n=t===e?0:1/(e-t),u}}function Yg(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Hg(){var t=rd(jg());return t.copy=function(){return Yg(t,Hg()).exponent(t.exponent())},Mh.apply(t,arguments)}function Ug(){var t,e,n,r,i,a,o,s=0,l=.5,u=1,c=zh,f=!1;function h(t){return isNaN(t=+t)?o:(t=.5+((t=+a(t))-e)*(t<e?r:i),c(f?Math.max(0,Math.min(1,t)):t))}return h.domain=function(o){return arguments.length?(t=a(s=+o[0]),e=a(l=+o[1]),n=a(u=+o[2]),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),h):[s,l,u]},h.clamp=function(t){return arguments.length?(f=!!t,h):f},h.interpolator=function(t){return arguments.length?(c=t,h):c},h.unknown=function(t){return arguments.length?(o=t,h):o},function(o){return a=o,t=o(s),e=o(l),n=o(u),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),h}}function qg(){var t=rd(Ug());return t.copy=function(){return Yg(t,qg()).exponent(t.exponent())},Mh.apply(t,arguments)}function Fg(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n}var Wg=Fg("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),$g=Fg("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Gg=Fg("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Vg=Fg("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Xg=Fg("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Jg=Fg("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Zg=Fg("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Kg=Fg("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Qg=Fg("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),ty=Fg("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function ey(t){return fn(t[t.length-1])}var ny=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Fg),ry=ey(ny),iy=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Fg),ay=ey(iy),oy=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Fg),sy=ey(oy),ly=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Fg),uy=ey(ly),cy=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Fg),fy=ey(cy),hy=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Fg),dy=ey(hy),py=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Fg),gy=ey(py),yy=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Fg),vy=ey(yy),my=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Fg),xy=ey(my),by=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Fg),_y=ey(by),wy=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Fg),ky=ey(wy),My=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Fg),Ay=ey(My),Ty=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Fg),Cy=ey(Ty),Ey=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Fg),Ny=ey(Ey),Ry=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Fg),Sy=ey(Ry),Py=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Fg),zy=ey(Py),Oy=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Fg),Ly=ey(Oy),Dy=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Fg),Iy=ey(Dy),By=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Fg),jy=ey(By),Yy=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Fg),Hy=ey(Yy),Uy=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Fg),qy=ey(Uy),Fy=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Fg),Wy=ey(Fy),$y=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Fg),Gy=ey($y),Vy=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Fg),Xy=ey(Vy),Jy=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Fg),Zy=ey(Jy),Ky=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Fg),Qy=ey(Ky),tv=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Fg),ev=ey(tv),nv=Jn(Qe(300,.5,0),Qe(-240,.5,1)),rv=Jn(Qe(-100,.75,.35),Qe(80,1.5,.8)),iv=Jn(Qe(260,.75,.35),Qe(80,1.5,.8)),av=Qe(),ov=ye(),sv=Math.PI/3,lv=2*Math.PI/3;function uv(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}var cv=uv(Fg("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),fv=uv(Fg("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),hv=uv(Fg("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),dv=uv(Fg("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function pv(t){return function(){return t}}var gv=Math.abs,yv=Math.atan2,vv=Math.cos,mv=Math.max,xv=Math.min,bv=Math.sin,_v=Math.sqrt,wv=1e-12,kv=Math.PI,Mv=kv/2,Av=2*kv;function Tv(t){return t>=1?Mv:t<=-1?-Mv:Math.asin(t)}function Cv(t){return t.innerRadius}function Ev(t){return t.outerRadius}function Nv(t){return t.startAngle}function Rv(t){return t.endAngle}function Sv(t){return t&&t.padAngle}function Pv(t,e,n,r,i,a,o){var s=t-n,l=e-r,u=(o?a:-a)/_v(s*s+l*l),c=u*l,f=-u*s,h=t+c,d=e+f,p=n+c,g=r+f,y=(h+p)/2,v=(d+g)/2,m=p-h,x=g-d,b=m*m+x*x,_=i-a,w=h*g-p*d,k=(x<0?-1:1)*_v(mv(0,_*_*b-w*w)),M=(w*x-m*k)/b,A=(-w*m-x*k)/b,T=(w*x+m*k)/b,C=(-w*m+x*k)/b,E=M-y,N=A-v,R=T-y,S=C-v;return E*E+N*N>R*R+S*S&&(M=T,A=C),{cx:M,cy:A,x01:-c,y01:-f,x11:M*(i/_-1),y11:A*(i/_-1)}}function zv(t){this._context=t}function Ov(t){return new zv(t)}function Lv(t){return t[0]}function Dv(t){return t[1]}function Iv(){var t=Lv,e=Dv,n=pv(!0),r=null,i=Ov,a=null;function o(o){var s,l,u,c=o.length,f=!1;for(null==r&&(a=i(u=Zi())),s=0;s<=c;++s)!(s<c&&n(l=o[s],s,o))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+t(l,s,o),+e(l,s,o));if(u)return a=null,u+""||null}return o.x=function(e){return arguments.length?(t="function"==typeof e?e:pv(+e),o):t},o.y=function(t){return arguments.length?(e="function"==typeof t?t:pv(+t),o):e},o.defined=function(t){return arguments.length?(n="function"==typeof t?t:pv(!!t),o):n},o.curve=function(t){return arguments.length?(i=t,null!=r&&(a=i(r)),o):i},o.context=function(t){return arguments.length?(null==t?r=a=null:a=i(r=t),o):r},o}function Bv(){var t=Lv,e=null,n=pv(0),r=Dv,i=pv(!0),a=null,o=Ov,s=null;function l(l){var u,c,f,h,d,p=l.length,g=!1,y=new Array(p),v=new Array(p);for(null==a&&(s=o(d=Zi())),u=0;u<=p;++u){if(!(u<p&&i(h=l[u],u,l))===g)if(g=!g)c=u,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),f=u-1;f>=c;--f)s.point(y[f],v[f]);s.lineEnd(),s.areaEnd()}g&&(y[u]=+t(h,u,l),v[u]=+n(h,u,l),s.point(e?+e(h,u,l):y[u],r?+r(h,u,l):v[u]))}if(d)return s=null,d+""||null}function u(){return Iv().defined(i).curve(o).context(a)}return l.x=function(n){return arguments.length?(t="function"==typeof n?n:pv(+n),e=null,l):t},l.x0=function(e){return arguments.length?(t="function"==typeof e?e:pv(+e),l):t},l.x1=function(t){return arguments.length?(e=null==t?null:"function"==typeof t?t:pv(+t),l):e},l.y=function(t){return arguments.length?(n="function"==typeof t?t:pv(+t),r=null,l):n},l.y0=function(t){return arguments.length?(n="function"==typeof t?t:pv(+t),l):n},l.y1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:pv(+t),l):r},l.lineX0=l.lineY0=function(){return u().x(t).y(n)},l.lineY1=function(){return u().x(t).y(r)},l.lineX1=function(){return u().x(e).y(n)},l.defined=function(t){return arguments.length?(i="function"==typeof t?t:pv(!!t),l):i},l.curve=function(t){return arguments.length?(o=t,null!=a&&(s=o(a)),l):o},l.context=function(t){return arguments.length?(null==t?a=s=null:s=o(a=t),l):a},l}function jv(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function Yv(t){return t}zv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var Hv=qv(Ov);function Uv(t){this._curve=t}function qv(t){function e(e){return new Uv(t(e))}return e._curve=t,e}function Fv(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(qv(t)):e()._curve},t}function Wv(){return Fv(Iv().curve(Hv))}function $v(){var t=Bv().curve(Hv),e=t.curve,n=t.lineX0,r=t.lineX1,i=t.lineY0,a=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return Fv(n())},delete t.lineX0,t.lineEndAngle=function(){return Fv(r())},delete t.lineX1,t.lineInnerRadius=function(){return Fv(i())},delete t.lineY0,t.lineOuterRadius=function(){return Fv(a())},delete t.lineY1,t.curve=function(t){return arguments.length?e(qv(t)):e()._curve},t}function Gv(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]}Uv.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};var Vv=Array.prototype.slice;function Xv(t){return t.source}function Jv(t){return t.target}function Zv(t){var e=Xv,n=Jv,r=Lv,i=Dv,a=null;function o(){var o,s=Vv.call(arguments),l=e.apply(this,s),u=n.apply(this,s);if(a||(a=o=Zi()),t(a,+r.apply(this,(s[0]=l,s)),+i.apply(this,s),+r.apply(this,(s[0]=u,s)),+i.apply(this,s)),o)return a=null,o+""||null}return o.source=function(t){return arguments.length?(e=t,o):e},o.target=function(t){return arguments.length?(n=t,o):n},o.x=function(t){return arguments.length?(r="function"==typeof t?t:pv(+t),o):r},o.y=function(t){return arguments.length?(i="function"==typeof t?t:pv(+t),o):i},o.context=function(t){return arguments.length?(a=null==t?null:t,o):a},o}function Kv(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e=(e+r)/2,n,e,i,r,i)}function Qv(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e,n=(n+i)/2,r,n,r,i)}function tm(t,e,n,r,i){var a=Gv(e,n),o=Gv(e,n=(n+i)/2),s=Gv(r,n),l=Gv(r,i);t.moveTo(a[0],a[1]),t.bezierCurveTo(o[0],o[1],s[0],s[1],l[0],l[1])}var em={draw:function(t,e){var n=Math.sqrt(e/kv);t.moveTo(n,0),t.arc(0,0,n,0,Av)}},nm={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},rm=Math.sqrt(1/3),im=2*rm,am={draw:function(t,e){var n=Math.sqrt(e/im),r=n*rm;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},om=Math.sin(kv/10)/Math.sin(7*kv/10),sm=Math.sin(Av/10)*om,lm=-Math.cos(Av/10)*om,um={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),r=sm*n,i=lm*n;t.moveTo(0,-n),t.lineTo(r,i);for(var a=1;a<5;++a){var o=Av*a/5,s=Math.cos(o),l=Math.sin(o);t.lineTo(l*n,-s*n),t.lineTo(s*r-l*i,l*r+s*i)}t.closePath()}},cm={draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},fm=Math.sqrt(3),hm={draw:function(t,e){var n=-Math.sqrt(e/(3*fm));t.moveTo(0,2*n),t.lineTo(-fm*n,-n),t.lineTo(fm*n,-n),t.closePath()}},dm=Math.sqrt(3)/2,pm=1/Math.sqrt(12),gm=3*(pm/2+1),ym={draw:function(t,e){var n=Math.sqrt(e/gm),r=n/2,i=n*pm,a=r,o=n*pm+n,s=-a,l=o;t.moveTo(r,i),t.lineTo(a,o),t.lineTo(s,l),t.lineTo(-.5*r-dm*i,dm*r+-.5*i),t.lineTo(-.5*a-dm*o,dm*a+-.5*o),t.lineTo(-.5*s-dm*l,dm*s+-.5*l),t.lineTo(-.5*r+dm*i,-.5*i-dm*r),t.lineTo(-.5*a+dm*o,-.5*o-dm*a),t.lineTo(-.5*s+dm*l,-.5*l-dm*s),t.closePath()}},vm=[em,nm,am,cm,um,hm,ym];function mm(){}function xm(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function bm(t){this._context=t}function _m(t){this._context=t}function wm(t){this._context=t}function km(t,e){this._basis=new bm(t),this._beta=e}bm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:xm(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:xm(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},_m.prototype={areaStart:mm,areaEnd:mm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:xm(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},wm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:xm(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},km.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],a=e[0],o=t[n]-i,s=e[n]-a,l=-1;++l<=n;)r=l/n,this._basis.point(this._beta*t[l]+(1-this._beta)*(i+r*o),this._beta*e[l]+(1-this._beta)*(a+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var Mm=function t(e){function n(t){return 1===e?new bm(t):new km(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function Am(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Tm(t,e){this._context=t,this._k=(1-e)/6}Tm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Am(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Am(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Cm=function t(e){function n(t){return new Tm(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Em(t,e){this._context=t,this._k=(1-e)/6}Em.prototype={areaStart:mm,areaEnd:mm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Am(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Nm=function t(e){function n(t){return new Em(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Rm(t,e){this._context=t,this._k=(1-e)/6}Rm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Am(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Sm=function t(e){function n(t){return new Rm(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Pm(t,e,n){var r=t._x1,i=t._y1,a=t._x2,o=t._y2;if(t._l01_a>wv){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>wv){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*u+t._x1*t._l23_2a-e*t._l12_2a)/c,o=(o*u+t._y1*t._l23_2a-n*t._l12_2a)/c}t._context.bezierCurveTo(r,i,a,o,t._x2,t._y2)}function zm(t,e){this._context=t,this._alpha=e}zm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Pm(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Om=function t(e){function n(t){return e?new zm(t,e):new Tm(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Lm(t,e){this._context=t,this._alpha=e}Lm.prototype={areaStart:mm,areaEnd:mm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Pm(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Dm=function t(e){function n(t){return e?new Lm(t,e):new Em(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Im(t,e){this._context=t,this._alpha=e}Im.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Pm(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Bm=function t(e){function n(t){return e?new Im(t,e):new Rm(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function jm(t){this._context=t}function Ym(t){return t<0?-1:1}function Hm(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(Ym(a)+Ym(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function Um(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function qm(t,e,n){var r=t._x0,i=t._y0,a=t._x1,o=t._y1,s=(a-r)/3;t._context.bezierCurveTo(r+s,i+s*e,a-s,o-s*n,a,o)}function Fm(t){this._context=t}function Wm(t){this._context=new $m(t)}function $m(t){this._context=t}function Gm(t){this._context=t}function Vm(t){var e,n,r=t.length-1,i=new Array(r),a=new Array(r),o=new Array(r);for(i[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/a[e-1],a[e]-=n,o[e]-=n*o[e-1];for(i[r-1]=o[r-1]/a[r-1],e=r-2;e>=0;--e)i[e]=(o[e]-i[e+1])/a[e];for(a[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function Xm(t,e){this._context=t,this._t=e}function Jm(t,e){if((i=t.length)>1)for(var n,r,i,a=1,o=t[e[0]],s=o.length;a<i;++a)for(r=o,o=t[e[a]],n=0;n<s;++n)o[n][1]+=o[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}function Zm(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Km(t,e){return t[e]}function Qm(t){var e=t.map(tx);return Zm(t).sort(function(t,n){return e[t]-e[n]})}function tx(t){for(var e,n=-1,r=0,i=t.length,a=-1/0;++n<i;)(e=+t[n][1])>a&&(a=e,r=n);return r}function ex(t){var e=t.map(nx);return Zm(t).sort(function(t,n){return e[t]-e[n]})}function nx(t){for(var e,n=0,r=-1,i=t.length;++r<i;)(e=+t[r][1])&&(n+=e);return n}function rx(t){return function(){return t}}function ix(t){return t[0]}function ax(t){return t[1]}function ox(){this._=null}function sx(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function lx(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function ux(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function cx(t){for(;t.L;)t=t.L;return t}function fx(t,e,n,r){var i=[null,null],a=Lx.push(i)-1;return i.left=t,i.right=e,n&&dx(i,t,e,n),r&&dx(i,e,t,r),zx[t.index].halfedges.push(a),zx[e.index].halfedges.push(a),i}function hx(t,e,n){var r=[e,n];return r.left=t,r}function dx(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function px(t,e,n,r,i){var a,o=t[0],s=t[1],l=o[0],u=o[1],c=0,f=1,h=s[0]-l,d=s[1]-u;if(a=e-l,h||!(a>0)){if(a/=h,h<0){if(a<c)return;a<f&&(f=a)}else if(h>0){if(a>f)return;a>c&&(c=a)}if(a=r-l,h||!(a<0)){if(a/=h,h<0){if(a>f)return;a>c&&(c=a)}else if(h>0){if(a<c)return;a<f&&(f=a)}if(a=n-u,d||!(a>0)){if(a/=d,d<0){if(a<c)return;a<f&&(f=a)}else if(d>0){if(a>f)return;a>c&&(c=a)}if(a=i-u,d||!(a<0)){if(a/=d,d<0){if(a>f)return;a>c&&(c=a)}else if(d>0){if(a<c)return;a<f&&(f=a)}return!(c>0||f<1)||(c>0&&(t[0]=[l+c*h,u+c*d]),f<1&&(t[1]=[l+f*h,u+f*d]),!0)}}}}}function gx(t,e,n,r,i){var a=t[1];if(a)return!0;var o,s,l=t[0],u=t.left,c=t.right,f=u[0],h=u[1],d=c[0],p=c[1],g=(f+d)/2,y=(h+p)/2;if(p===h){if(g<e||g>=r)return;if(f>d){if(l){if(l[1]>=i)return}else l=[g,n];a=[g,i]}else{if(l){if(l[1]<n)return}else l=[g,i];a=[g,n]}}else if(s=y-(o=(f-d)/(p-h))*g,o<-1||o>1)if(f>d){if(l){if(l[1]>=i)return}else l=[(n-s)/o,n];a=[(i-s)/o,i]}else{if(l){if(l[1]<n)return}else l=[(i-s)/o,i];a=[(n-s)/o,n]}else if(h<p){if(l){if(l[0]>=r)return}else l=[e,o*e+s];a=[r,o*r+s]}else{if(l){if(l[0]<e)return}else l=[r,o*r+s];a=[e,o*e+s]}return t[0]=l,t[1]=a,!0}function yx(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function vx(t,e){return e[+(e.left!==t.site)]}function mx(t,e){return e[+(e.left===t.site)]}jm.prototype={areaStart:mm,areaEnd:mm,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},Fm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:qm(this,this._t0,Um(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,qm(this,Um(this,n=Hm(this,t,e)),n);break;default:qm(this,this._t0,n=Hm(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(Wm.prototype=Object.create(Fm.prototype)).point=function(t,e){Fm.prototype.point.call(this,e,t)},$m.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}},Gm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=Vm(t),i=Vm(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[o],e[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},Xm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}},ox.prototype={constructor:ox,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=cx(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(lx(this,n),n=(t=n).U),n.C=!1,r.C=!0,ux(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(ux(this,n),n=(t=n).U),n.C=!1,r.C=!0,lx(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,a=t.L,o=t.R;if(n=a?o?cx(o):a:o,i?i.L===t?i.L=n:i.R=n:this._=n,a&&o?(r=n.C,n.C=t.C,n.L=a,a.U=n,n!==o?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=o,o.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,lx(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,ux(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,lx(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,ux(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,lx(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,ux(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var xx,bx=[];function _x(){sx(this),this.x=this.y=this.arc=this.site=this.cy=null}function wx(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,a=n.site;if(r!==a){var o=i[0],s=i[1],l=r[0]-o,u=r[1]-s,c=a[0]-o,f=a[1]-s,h=2*(l*f-u*c);if(!(h>=-Ix)){var d=l*l+u*u,p=c*c+f*f,g=(f*d-u*p)/h,y=(l*p-c*d)/h,v=bx.pop()||new _x;v.arc=t,v.site=i,v.x=g+o,v.y=(v.cy=y+s)+Math.sqrt(g*g+y*y),t.circle=v;for(var m=null,x=Ox._;x;)if(v.y<x.y||v.y===x.y&&v.x<=x.x){if(!x.L){m=x.P;break}x=x.L}else{if(!x.R){m=x;break}x=x.R}Ox.insert(m,v),m||(xx=v)}}}}function kx(t){var e=t.circle;e&&(e.P||(xx=e.N),Ox.remove(e),bx.push(e),sx(e),t.circle=null)}var Mx=[];function Ax(){sx(this),this.edge=this.site=this.circle=null}function Tx(t){var e=Mx.pop()||new Ax;return e.site=t,e}function Cx(t){kx(t),Px.remove(t),Mx.push(t),sx(t)}function Ex(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],a=t.P,o=t.N,s=[t];Cx(t);for(var l=a;l.circle&&Math.abs(n-l.circle.x)<Dx&&Math.abs(r-l.circle.cy)<Dx;)a=l.P,s.unshift(l),Cx(l),l=a;s.unshift(l),kx(l);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<Dx&&Math.abs(r-u.circle.cy)<Dx;)o=u.N,s.push(u),Cx(u),u=o;s.push(u),kx(u);var c,f=s.length;for(c=1;c<f;++c)u=s[c],l=s[c-1],dx(u.edge,l.site,u.site,i);l=s[0],(u=s[f-1]).edge=fx(l.site,u.site,null,i),wx(l),wx(u)}function Nx(t){for(var e,n,r,i,a=t[0],o=t[1],s=Px._;s;)if((r=Rx(s,o)-a)>Dx)s=s.L;else{if(!((i=a-Sx(s,o))>Dx)){r>-Dx?(e=s.P,n=s):i>-Dx?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}!function(t){zx[t.index]={site:t,halfedges:[]}}(t);var l=Tx(t);if(Px.insert(e,l),e||n){if(e===n)return kx(e),n=Tx(e.site),Px.insert(l,n),l.edge=n.edge=fx(e.site,l.site),wx(e),void wx(n);if(n){kx(e),kx(n);var u=e.site,c=u[0],f=u[1],h=t[0]-c,d=t[1]-f,p=n.site,g=p[0]-c,y=p[1]-f,v=2*(h*y-d*g),m=h*h+d*d,x=g*g+y*y,b=[(y*m-d*x)/v+c,(h*x-g*m)/v+f];dx(n.edge,u,p,b),l.edge=fx(u,t,null,b),n.edge=fx(t,p,null,b),wx(e),wx(n)}else l.edge=fx(e.site,l.site)}}function Rx(t,e){var n=t.site,r=n[0],i=n[1],a=i-e;if(!a)return r;var o=t.P;if(!o)return-1/0;var s=(n=o.site)[0],l=n[1],u=l-e;if(!u)return s;var c=s-r,f=1/a-1/u,h=c/u;return f?(-h+Math.sqrt(h*h-2*f*(c*c/(-2*u)-l+u/2+i-a/2)))/f+r:(r+s)/2}function Sx(t,e){var n=t.N;if(n)return Rx(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var Px,zx,Ox,Lx,Dx=1e-6,Ix=1e-12;function Bx(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function jx(t,e){return e[1]-t[1]||e[0]-t[0]}function Yx(t,e){var n,r,i,a=t.sort(jx).pop();for(Lx=[],zx=new Array(t.length),Px=new ox,Ox=new ox;;)if(i=xx,a&&(!i||a[1]<i.y||a[1]===i.y&&a[0]<i.x))a[0]===n&&a[1]===r||(Nx(a),n=a[0],r=a[1]),a=t.pop();else{if(!i)break;Ex(i.arc)}if(function(){for(var t,e,n,r,i=0,a=zx.length;i<a;++i)if((t=zx[i])&&(r=(e=t.halfedges).length)){var o=new Array(r),s=new Array(r);for(n=0;n<r;++n)o[n]=n,s[n]=yx(t,Lx[e[n]]);for(o.sort(function(t,e){return s[e]-s[t]}),n=0;n<r;++n)s[n]=e[o[n]];for(n=0;n<r;++n)e[n]=s[n]}}(),e){var o=+e[0][0],s=+e[0][1],l=+e[1][0],u=+e[1][1];!function(t,e,n,r){for(var i,a=Lx.length;a--;)gx(i=Lx[a],t,e,n,r)&&px(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>Dx||Math.abs(i[0][1]-i[1][1])>Dx)||delete Lx[a]}(o,s,l,u),function(t,e,n,r){var i,a,o,s,l,u,c,f,h,d,p,g,y=zx.length,v=!0;for(i=0;i<y;++i)if(a=zx[i]){for(o=a.site,s=(l=a.halfedges).length;s--;)Lx[l[s]]||l.splice(s,1);for(s=0,u=l.length;s<u;)p=(d=mx(a,Lx[l[s]]))[0],g=d[1],f=(c=vx(a,Lx[l[++s%u]]))[0],h=c[1],(Math.abs(p-f)>Dx||Math.abs(g-h)>Dx)&&(l.splice(s,0,Lx.push(hx(o,d,Math.abs(p-t)<Dx&&r-g>Dx?[t,Math.abs(f-t)<Dx?h:r]:Math.abs(g-r)<Dx&&n-p>Dx?[Math.abs(h-r)<Dx?f:n,r]:Math.abs(p-n)<Dx&&g-e>Dx?[n,Math.abs(f-n)<Dx?h:e]:Math.abs(g-e)<Dx&&p-t>Dx?[Math.abs(h-e)<Dx?f:t,e]:null))-1),++u);u&&(v=!1)}if(v){var m,x,b,_=1/0;for(i=0,v=null;i<y;++i)(a=zx[i])&&(b=(m=(o=a.site)[0]-t)*m+(x=o[1]-e)*x)<_&&(_=b,v=a);if(v){var w=[t,e],k=[t,r],M=[n,r],A=[n,e];v.halfedges.push(Lx.push(hx(o=v.site,w,k))-1,Lx.push(hx(o,k,M))-1,Lx.push(hx(o,M,A))-1,Lx.push(hx(o,A,w))-1)}}for(i=0;i<y;++i)(a=zx[i])&&(a.halfedges.length||delete zx[i])}(o,s,l,u)}this.edges=Lx,this.cells=zx,Px=Ox=Lx=zx=null}function Hx(t){return function(){return t}}function Ux(t,e,n){this.target=t,this.type=e,this.transform=n}function qx(t,e,n){this.k=t,this.x=e,this.y=n}Yx.prototype={constructor:Yx,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(n){return vx(e,t[n])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,r){if(a=(i=n.halfedges).length)for(var i,a,o,s=n.site,l=-1,u=e[i[a-1]],c=u.left===s?u.right:u.left;++l<a;)o=c,c=(u=e[i[l]]).left===s?u.right:u.left,o&&c&&r<o.index&&r<c.index&&Bx(s,o,c)<0&&t.push([s.data,o.data,c.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var r,i,a=this,o=a._found||0,s=a.cells.length;!(i=a.cells[o]);)if(++o>=s)return null;var l=t-i.site[0],u=e-i.site[1],c=l*l+u*u;do{i=a.cells[r=o],o=null,i.halfedges.forEach(function(n){var r=a.edges[n],s=r.left;if(s!==i.site&&s||(s=r.right)){var l=t-s[0],u=e-s[1],f=l*l+u*u;f<c&&(c=f,o=s.index)}})}while(null!==o);return a._found=r,null==n||c<=n*n?i.site:null}},qx.prototype={constructor:qx,scale:function(t){return 1===t?this:new qx(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new qx(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Fx=new qx(1,0,0);function Wx(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Fx;return t.__zoom}function $x(){t.event.stopImmediatePropagation()}function Gx(){t.event.preventDefault(),t.event.stopImmediatePropagation()}function Vx(){return!t.event.ctrlKey&&!t.event.button}function Xx(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function Jx(){return this.__zoom||Fx}function Zx(){return-t.event.deltaY*(1===t.event.deltaMode?.05:t.event.deltaMode?1:.002)}function Kx(){return navigator.maxTouchPoints||"ontouchstart"in this}function Qx(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],a=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}Wx.prototype=qx.prototype,t.FormatSpecifier=Oo,t.active=function(t,e){var n,r,i=t.__transition;if(i)for(r in e=null==e?null:e+"",i)if((n=i[r]).state>mr&&n.name===e)return new Or([[t]],pi,e,+r);return null},t.arc=function(){var t=Cv,e=Ev,n=pv(0),r=null,i=Nv,a=Rv,o=Sv,s=null;function l(){var l,u,c=+t.apply(this,arguments),f=+e.apply(this,arguments),h=i.apply(this,arguments)-Mv,d=a.apply(this,arguments)-Mv,p=gv(d-h),g=d>h;if(s||(s=l=Zi()),f<c&&(u=f,f=c,c=u),f>wv)if(p>Av-wv)s.moveTo(f*vv(h),f*bv(h)),s.arc(0,0,f,h,d,!g),c>wv&&(s.moveTo(c*vv(d),c*bv(d)),s.arc(0,0,c,d,h,g));else{var y,v,m=h,x=d,b=h,_=d,w=p,k=p,M=o.apply(this,arguments)/2,A=M>wv&&(r?+r.apply(this,arguments):_v(c*c+f*f)),T=xv(gv(f-c)/2,+n.apply(this,arguments)),C=T,E=T;if(A>wv){var N=Tv(A/c*bv(M)),R=Tv(A/f*bv(M));(w-=2*N)>wv?(b+=N*=g?1:-1,_-=N):(w=0,b=_=(h+d)/2),(k-=2*R)>wv?(m+=R*=g?1:-1,x-=R):(k=0,m=x=(h+d)/2)}var S=f*vv(m),P=f*bv(m),z=c*vv(_),O=c*bv(_);if(T>wv){var L,D=f*vv(x),I=f*bv(x),B=c*vv(b),j=c*bv(b);if(p<kv&&(L=function(t,e,n,r,i,a,o,s){var l=B-S,u=j-P,c=z-D,f=O-I,h=f*l-c*u;if(!(h*h<wv))return[S+(h=(c*(P-I)-f*(S-D))/h)*l,P+h*u]}())){var Y=S-L[0],H=P-L[1],U=D-L[0],q=I-L[1],F=1/bv(function(t){return t>1?0:t<-1?kv:Math.acos(t)}((Y*U+H*q)/(_v(Y*Y+H*H)*_v(U*U+q*q)))/2),W=_v(L[0]*L[0]+L[1]*L[1]);C=xv(T,(c-W)/(F-1)),E=xv(T,(f-W)/(F+1))}}k>wv?E>wv?(y=Pv(B,j,S,P,f,E,g),v=Pv(D,I,z,O,f,E,g),s.moveTo(y.cx+y.x01,y.cy+y.y01),E<T?s.arc(y.cx,y.cy,E,yv(y.y01,y.x01),yv(v.y01,v.x01),!g):(s.arc(y.cx,y.cy,E,yv(y.y01,y.x01),yv(y.y11,y.x11),!g),s.arc(0,0,f,yv(y.cy+y.y11,y.cx+y.x11),yv(v.cy+v.y11,v.cx+v.x11),!g),s.arc(v.cx,v.cy,E,yv(v.y11,v.x11),yv(v.y01,v.x01),!g))):(s.moveTo(S,P),s.arc(0,0,f,m,x,!g)):s.moveTo(S,P),c>wv&&w>wv?C>wv?(y=Pv(z,O,D,I,c,-C,g),v=Pv(S,P,B,j,c,-C,g),s.lineTo(y.cx+y.x01,y.cy+y.y01),C<T?s.arc(y.cx,y.cy,C,yv(y.y01,y.x01),yv(v.y01,v.x01),!g):(s.arc(y.cx,y.cy,C,yv(y.y01,y.x01),yv(y.y11,y.x11),!g),s.arc(0,0,c,yv(y.cy+y.y11,y.cx+y.x11),yv(v.cy+v.y11,v.cx+v.x11),g),s.arc(v.cx,v.cy,C,yv(v.y11,v.x11),yv(v.y01,v.x01),!g))):s.arc(0,0,c,_,b,g):s.lineTo(z,O)}else s.moveTo(0,0);if(s.closePath(),l)return s=null,l+""||null}return l.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-kv/2;return[vv(r)*n,bv(r)*n]},l.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:pv(+e),l):t},l.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:pv(+t),l):e},l.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:pv(+t),l):n},l.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:pv(+t),l):r},l.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:pv(+t),l):i},l.endAngle=function(t){return arguments.length?(a="function"==typeof t?t:pv(+t),l):a},l.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:pv(+t),l):o},l.context=function(t){return arguments.length?(s=null==t?null:t,l):s},l},t.area=Bv,t.areaRadial=$v,t.ascending=e,t.autoType=function(t){for(var e in t){var n,r,i=t[e].trim();if(i)if("true"===i)i=!0;else if("false"===i)i=!1;else if("NaN"===i)i=NaN;else if(isNaN(n=+i)){if(!(r=i.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;Za&&r[4]&&!r[7]&&(i=i.replace(/-/g,"/").replace(/T/," ")),i=new Date(i)}else i=n;else i=null;t[e]=i}return t},t.axisBottom=function(t){return Y(O,t)},t.axisLeft=function(t){return Y(L,t)},t.axisRight=function(t){return Y(z,t)},t.axisTop=function(t){return Y(P,t)},t.bisect=i,t.bisectLeft=a,t.bisectRight=i,t.bisector=n,t.blob=function(t,e){return fetch(t,e).then(Ka)},t.brush=function(){return Bi(Ci)},t.brushSelection=function(t){var e=t.__brush;return e?e.dim.output(e.selection):null},t.brushX=function(){return Bi(Ai)},t.brushY=function(){return Bi(Ti)},t.buffer=function(t,e){return fetch(t,e).then(Qa)},t.chord=function(){var t=0,e=null,n=null,r=null;function i(i){var a,o,s,l,u,c,f=i.length,h=[],d=y(f),p=[],g=[],v=g.groups=new Array(f),m=new Array(f*f);for(a=0,u=-1;++u<f;){for(o=0,c=-1;++c<f;)o+=i[u][c];h.push(o),p.push(y(f)),a+=o}for(e&&d.sort(function(t,n){return e(h[t],h[n])}),n&&p.forEach(function(t,e){t.sort(function(t,r){return n(i[e][t],i[e][r])})}),l=(a=Fi(0,qi-t*f)/a)?t:qi/f,o=0,u=-1;++u<f;){for(s=o,c=-1;++c<f;){var x=d[u],b=p[x][c],_=i[x][b],w=o,k=o+=_*a;m[b*f+x]={index:x,subindex:b,startAngle:w,endAngle:k,value:_}}v[x]={index:x,startAngle:s,endAngle:o,value:h[x]},o+=l}for(u=-1;++u<f;)for(c=u-1;++c<f;){var M=m[c*f+u],A=m[u*f+c];(M.value||A.value)&&g.push(M.value<A.value?{source:A,target:M}:{source:M,target:A})}return r?g.sort(r):g}return i.padAngle=function(e){return arguments.length?(t=Fi(0,e),i):t},i.sortGroups=function(t){return arguments.length?(e=t,i):e},i.sortSubgroups=function(t){return arguments.length?(n=t,i):n},i.sortChords=function(t){return arguments.length?(null==t?r=null:(r=function(t){return function(e,n){return t(e.source.value+e.target.value,n.source.value+n.target.value)}}(t))._=t,i):r&&r._},i},t.clientPoint=It,t.cluster=function(){var t=xf,e=1,n=1,r=!1;function i(i){var a,o=0;i.eachAfter(function(e){var n=e.children;n?(e.x=function(t){return t.reduce(bf,0)/t.length}(n),e.y=1+n.reduce(_f,0)):(e.x=a?o+=t(e,a):0,e.y=0,a=e)});var s=function(t){for(var e;e=t.children;)t=e[0];return t}(i),l=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(i),u=s.x-t(s,l)/2,c=l.x+t(l,s)/2;return i.eachAfter(r?function(t){t.x=(t.x-i.x)*e,t.y=(i.y-t.y)*n}:function(t){t.x=(t.x-u)/(c-u)*e,t.y=(1-(i.y?t.y/i.y:1))*n})}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i},t.color=he,t.contourDensity=function(){var t=ka,e=Ma,n=Aa,r=960,i=500,a=20,o=2,s=3*a,l=r+2*s>>o,u=i+2*s>>o,c=pa(20);function f(r){var i=new Float32Array(l*u),f=new Float32Array(l*u);r.forEach(function(r,a,c){var f=+t(r,a,c)+s>>o,h=+e(r,a,c)+s>>o,d=+n(r,a,c);f>=0&&f<l&&h>=0&&h<u&&(i[f+h*l]+=d)}),_a({width:l,height:u,data:i},{width:l,height:u,data:f},a>>o),wa({width:l,height:u,data:f},{width:l,height:u,data:i},a>>o),_a({width:l,height:u,data:i},{width:l,height:u,data:f},a>>o),wa({width:l,height:u,data:f},{width:l,height:u,data:i},a>>o),_a({width:l,height:u,data:i},{width:l,height:u,data:f},a>>o),wa({width:l,height:u,data:f},{width:l,height:u,data:i},a>>o);var d=c(i);if(!Array.isArray(d)){var p=A(i);d=w(0,p,d),(d=y(0,Math.floor(p/d)*d,d)).shift()}return ba().thresholds(d).size([l,u])(i).map(h)}function h(t){return t.value*=Math.pow(2,-2*o),t.coordinates.forEach(d),t}function d(t){t.forEach(p)}function p(t){t.forEach(g)}function g(t){t[0]=t[0]*Math.pow(2,o)-s,t[1]=t[1]*Math.pow(2,o)-s}function v(){return l=r+2*(s=3*a)>>o,u=i+2*s>>o,f}return f.x=function(e){return arguments.length?(t="function"==typeof e?e:pa(+e),f):t},f.y=function(t){return arguments.length?(e="function"==typeof t?t:pa(+t),f):e},f.weight=function(t){return arguments.length?(n="function"==typeof t?t:pa(+t),f):n},f.size=function(t){if(!arguments.length)return[r,i];var e=Math.ceil(t[0]),n=Math.ceil(t[1]);if(!(e>=0||e>=0))throw new Error("invalid size");return r=e,i=n,v()},f.cellSize=function(t){if(!arguments.length)return 1<<o;if(!((t=+t)>=1))throw new Error("invalid cell size");return o=Math.floor(Math.log(t)/Math.LN2),v()},f.thresholds=function(t){return arguments.length?(c="function"==typeof t?t:Array.isArray(t)?pa(ha.call(t)):pa(t),f):c},f.bandwidth=function(t){if(!arguments.length)return Math.sqrt(a*(a+1));if(!((t=+t)>=0))throw new Error("invalid bandwidth");return a=Math.round((Math.sqrt(4*t*t+1)-1)/2),v()},f},t.contours=ba,t.create=function(t){return Pt(X(t).call(document.documentElement))},t.creator=X,t.cross=function(t,e,n){var r,i,a,s,l=t.length,u=e.length,c=new Array(l*u);for(null==n&&(n=o),r=a=0;r<l;++r)for(s=t[r],i=0;i<u;++i,++a)c[a]=n(s,e[i]);return c},t.csv=ro,t.csvFormat=Ba,t.csvFormatBody=ja,t.csvFormatRow=Ha,t.csvFormatRows=Ya,t.csvFormatValue=Ua,t.csvParse=Da,t.csvParseRows=Ia,t.cubehelix=Qe,t.curveBasis=function(t){return new bm(t)},t.curveBasisClosed=function(t){return new _m(t)},t.curveBasisOpen=function(t){return new wm(t)},t.curveBundle=Mm,t.curveCardinal=Cm,t.curveCardinalClosed=Nm,t.curveCardinalOpen=Sm,t.curveCatmullRom=Om,t.curveCatmullRomClosed=Dm,t.curveCatmullRomOpen=Bm,t.curveLinear=Ov,t.curveLinearClosed=function(t){return new jm(t)},t.curveMonotoneX=function(t){return new Fm(t)},t.curveMonotoneY=function(t){return new Wm(t)},t.curveNatural=function(t){return new Gm(t)},t.curveStep=function(t){return new Xm(t,.5)},t.curveStepAfter=function(t){return new Xm(t,1)},t.curveStepBefore=function(t){return new Xm(t,0)},t.customEvent=Ct,t.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},t.deviation=u,t.dispatch=U,t.drag=function(){var e,n,r,i,a=$t,o=Gt,s=Vt,l=Xt,u={},c=U("start","drag","end"),f=0,h=0;function d(t){t.on("mousedown.drag",p).filter(l).on("touchstart.drag",v).on("touchmove.drag",m).on("touchend.drag touchcancel.drag",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(){if(!i&&a.apply(this,arguments)){var s=b("mouse",o.apply(this,arguments),Bt,this,arguments);s&&(Pt(t.event.view).on("mousemove.drag",g,!0).on("mouseup.drag",y,!0),Ut(t.event.view),Yt(),r=!1,e=t.event.clientX,n=t.event.clientY,s("start"))}}function g(){if(Ht(),!r){var i=t.event.clientX-e,a=t.event.clientY-n;r=i*i+a*a>h}u.mouse("drag")}function y(){Pt(t.event.view).on("mousemove.drag mouseup.drag",null),qt(t.event.view,r),Ht(),u.mouse("end")}function v(){if(a.apply(this,arguments)){var e,n,r=t.event.changedTouches,i=o.apply(this,arguments),s=r.length;for(e=0;e<s;++e)(n=b(r[e].identifier,i,jt,this,arguments))&&(Yt(),n("start"))}}function m(){var e,n,r=t.event.changedTouches,i=r.length;for(e=0;e<i;++e)(n=u[r[e].identifier])&&(Ht(),n("drag"))}function x(){var e,n,r=t.event.changedTouches,a=r.length;for(i&&clearTimeout(i),i=setTimeout(function(){i=null},500),e=0;e<a;++e)(n=u[r[e].identifier])&&(Yt(),n("end"))}function b(e,n,r,i,a){var o,l,h,p=r(n,e),g=c.copy();if(Ct(new Wt(d,"beforestart",o,e,f,p[0],p[1],0,0,g),function(){return null!=(t.event.subject=o=s.apply(i,a))&&(l=o.x-p[0]||0,h=o.y-p[1]||0,!0)}))return function t(s){var c,y=p;switch(s){case"start":u[e]=t,c=f++;break;case"end":delete u[e],--f;case"drag":p=r(n,e),c=f}Ct(new Wt(d,s,o,e,c,p[0]+l,p[1]+h,p[0]-y[0],p[1]-y[1],g),g.apply,g,[s,i,a])}}return d.filter=function(t){return arguments.length?(a="function"==typeof t?t:Ft(!!t),d):a},d.container=function(t){return arguments.length?(o="function"==typeof t?t:Ft(t),d):o},d.subject=function(t){return arguments.length?(s="function"==typeof t?t:Ft(t),d):s},d.touchable=function(t){return arguments.length?(l="function"==typeof t?t:Ft(!!t),d):l},d.on=function(){var t=c.on.apply(c,arguments);return t===c?d:t},d.clickDistance=function(t){return arguments.length?(h=(t=+t)*t,d):Math.sqrt(h)},d},t.dragDisable=Ut,t.dragEnable=qt,t.dsv=function(t,e,n,r){3===arguments.length&&"function"==typeof n&&(r=n,n=void 0);var i=Oa(t);return eo(e,n).then(function(t){return i.parse(t,r)})},t.dsvFormat=Oa,t.easeBack=si,t.easeBackIn=ai,t.easeBackInOut=si,t.easeBackOut=oi,t.easeBounce=ii,t.easeBounceIn=function(t){return 1-ii(1-t)},t.easeBounceInOut=function(t){return((t*=2)<=1?1-ii(1-t):ii(t-1)+1)/2},t.easeBounceOut=ii,t.easeCircle=Gr,t.easeCircleIn=function(t){return 1-Math.sqrt(1-t*t)},t.easeCircleInOut=Gr,t.easeCircleOut=function(t){return Math.sqrt(1- --t*t)},t.easeCubic=jr,t.easeCubicIn=function(t){return t*t*t},t.easeCubicInOut=jr,t.easeCubicOut=function(t){return--t*t*t+1},t.easeElastic=ci,t.easeElasticIn=ui,t.easeElasticInOut=fi,t.easeElasticOut=ci,t.easeExp=$r,t.easeExpIn=function(t){return Math.pow(2,10*t-10)},t.easeExpInOut=$r,t.easeExpOut=function(t){return 1-Math.pow(2,-10*t)},t.easeLinear=function(t){return+t},t.easePoly=Ur,t.easePolyIn=Yr,t.easePolyInOut=Ur,t.easePolyOut=Hr,t.easeQuad=Br,t.easeQuadIn=function(t){return t*t},t.easeQuadInOut=Br,t.easeQuadOut=function(t){return t*(2-t)},t.easeSin=Wr,t.easeSinIn=function(t){return 1-Math.cos(t*Fr)},t.easeSinInOut=Wr,t.easeSinOut=function(t){return Math.sin(t*Fr)},t.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},t.extent=c,t.forceCenter=function(t,e){var n;function r(){var r,i,a=n.length,o=0,s=0;for(r=0;r<a;++r)o+=(i=n[r]).x,s+=i.y;for(o=o/a-t,s=s/a-e,r=0;r<a;++r)(i=n[r]).x-=o,i.y-=s}return null==t&&(t=0),null==e&&(e=0),r.initialize=function(t){n=t},r.x=function(e){return arguments.length?(t=+e,r):t},r.y=function(t){return arguments.length?(e=+t,r):e},r},t.forceCollide=function(t){var e,n,r=1,i=1;function a(){for(var t,a,s,l,u,c,f,h=e.length,d=0;d<i;++d)for(a=vo(e,_o,wo).visitAfter(o),t=0;t<h;++t)s=e[t],c=n[s.index],f=c*c,l=s.x+s.vx,u=s.y+s.vy,a.visit(p);function p(t,e,n,i,a){var o=t.data,h=t.r,d=c+h;if(!o)return e>l+d||i<l-d||n>u+d||a<u-d;if(o.index>s.index){var p=l-o.x-o.vx,g=u-o.y-o.vy,y=p*p+g*g;y<d*d&&(0===p&&(y+=(p=fo())*p),0===g&&(y+=(g=fo())*g),y=(d-(y=Math.sqrt(y)))/y*r,s.vx+=(p*=y)*(d=(h*=h)/(f+h)),s.vy+=(g*=y)*d,o.vx-=p*(d=1-d),o.vy-=g*d)}}}function o(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function s(){if(e){var r,i,a=e.length;for(n=new Array(a),r=0;r<a;++r)i=e[r],n[i.index]=+t(i,r,e)}}return"function"!=typeof t&&(t=co(null==t?1:+t)),a.initialize=function(t){e=t,s()},a.iterations=function(t){return arguments.length?(i=+t,a):i},a.strength=function(t){return arguments.length?(r=+t,a):r},a.radius=function(e){return arguments.length?(t="function"==typeof e?e:co(+e),s(),a):t},a},t.forceLink=function(t){var e,n,r,i,a,o=ko,s=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},l=co(30),u=1;function c(r){for(var i=0,o=t.length;i<u;++i)for(var s,l,c,f,h,d,p,g=0;g<o;++g)l=(s=t[g]).source,f=(c=s.target).x+c.vx-l.x-l.vx||fo(),h=c.y+c.vy-l.y-l.vy||fo(),f*=d=((d=Math.sqrt(f*f+h*h))-n[g])/d*r*e[g],h*=d,c.vx-=f*(p=a[g]),c.vy-=h*p,l.vx+=f*(p=1-p),l.vy+=h*p}function f(){if(r){var s,l,u=r.length,c=t.length,f=ia(r,o);for(s=0,i=new Array(u);s<c;++s)(l=t[s]).index=s,"object"!=typeof l.source&&(l.source=Mo(f,l.source)),"object"!=typeof l.target&&(l.target=Mo(f,l.target)),i[l.source.index]=(i[l.source.index]||0)+1,i[l.target.index]=(i[l.target.index]||0)+1;for(s=0,a=new Array(c);s<c;++s)l=t[s],a[s]=i[l.source.index]/(i[l.source.index]+i[l.target.index]);e=new Array(c),h(),n=new Array(c),d()}}function h(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+s(t[n],n,t)}function d(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+l(t[e],e,t)}return null==t&&(t=[]),c.initialize=function(t){r=t,f()},c.links=function(e){return arguments.length?(t=e,f(),c):t},c.id=function(t){return arguments.length?(o=t,c):o},c.iterations=function(t){return arguments.length?(u=+t,c):u},c.strength=function(t){return arguments.length?(s="function"==typeof t?t:co(+t),h(),c):s},c.distance=function(t){return arguments.length?(l="function"==typeof t?t:co(+t),d(),c):l},c},t.forceManyBody=function(){var t,e,n,r,i=co(-30),a=1,o=1/0,s=.81;function l(r){var i,a=t.length,o=vo(t,Ao,To).visitAfter(c);for(n=r,i=0;i<a;++i)e=t[i],o.visit(f)}function u(){if(t){var e,n,a=t.length;for(r=new Array(a),e=0;e<a;++e)n=t[e],r[n.index]=+i(n,e,t)}}function c(t){var e,n,i,a,o,s=0,l=0;if(t.length){for(i=a=o=0;o<4;++o)(e=t[o])&&(n=Math.abs(e.value))&&(s+=e.value,l+=n,i+=n*e.x,a+=n*e.y);t.x=i/l,t.y=a/l}else{(e=t).x=e.data.x,e.y=e.data.y;do{s+=r[e.data.index]}while(e=e.next)}t.value=s}function f(t,i,l,u){if(!t.value)return!0;var c=t.x-e.x,f=t.y-e.y,h=u-i,d=c*c+f*f;if(h*h/s<d)return d<o&&(0===c&&(d+=(c=fo())*c),0===f&&(d+=(f=fo())*f),d<a&&(d=Math.sqrt(a*d)),e.vx+=c*t.value*n/d,e.vy+=f*t.value*n/d),!0;if(!(t.length||d>=o)){(t.data!==e||t.next)&&(0===c&&(d+=(c=fo())*c),0===f&&(d+=(f=fo())*f),d<a&&(d=Math.sqrt(a*d)));do{t.data!==e&&(h=r[t.data.index]*n/d,e.vx+=c*h,e.vy+=f*h)}while(t=t.next)}}return l.initialize=function(e){t=e,u()},l.strength=function(t){return arguments.length?(i="function"==typeof t?t:co(+t),u(),l):i},l.distanceMin=function(t){return arguments.length?(a=t*t,l):Math.sqrt(a)},l.distanceMax=function(t){return arguments.length?(o=t*t,l):Math.sqrt(o)},l.theta=function(t){return arguments.length?(s=t*t,l):Math.sqrt(s)},l},t.forceRadial=function(t,e,n){var r,i,a,o=co(.1);function s(t){for(var o=0,s=r.length;o<s;++o){var l=r[o],u=l.x-e||1e-6,c=l.y-n||1e-6,f=Math.sqrt(u*u+c*c),h=(a[o]-f)*i[o]*t/f;l.vx+=u*h,l.vy+=c*h}}function l(){if(r){var e,n=r.length;for(i=new Array(n),a=new Array(n),e=0;e<n;++e)a[e]=+t(r[e],e,r),i[e]=isNaN(a[e])?0:+o(r[e],e,r)}}return"function"!=typeof t&&(t=co(+t)),null==e&&(e=0),null==n&&(n=0),s.initialize=function(t){r=t,l()},s.strength=function(t){return arguments.length?(o="function"==typeof t?t:co(+t),l(),s):o},s.radius=function(e){return arguments.length?(t="function"==typeof e?e:co(+e),l(),s):t},s.x=function(t){return arguments.length?(e=+t,s):e},s.y=function(t){return arguments.length?(n=+t,s):n},s},t.forceSimulation=function(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),a=0,o=.6,s=ia(),l=ur(c),u=U("tick","end");function c(){f(),u.call("tick",e),n<r&&(l.stop(),u.call("end",e))}function f(r){var l,u,c=t.length;void 0===r&&(r=1);for(var f=0;f<r;++f)for(n+=(a-n)*i,s.each(function(t){t(n)}),l=0;l<c;++l)null==(u=t[l]).fx?u.x+=u.vx*=o:(u.x=u.fx,u.vx=0),null==u.fy?u.y+=u.vy*=o:(u.y=u.fy,u.vy=0);return e}function h(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var i=Co*Math.sqrt(n),a=n*Eo;e.x=i*Math.cos(a),e.y=i*Math.sin(a)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function d(e){return e.initialize&&e.initialize(t),e}return null==t&&(t=[]),h(),e={tick:f,restart:function(){return l.restart(c),e},stop:function(){return l.stop(),e},nodes:function(n){return arguments.length?(t=n,h(),s.each(d),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(a=+t,e):a},velocityDecay:function(t){return arguments.length?(o=1-t,e):1-o},force:function(t,n){return arguments.length>1?(null==n?s.remove(t):s.set(t,d(n)),e):s.get(t)},find:function(e,n,r){var i,a,o,s,l,u=0,c=t.length;for(null==r?r=1/0:r*=r,u=0;u<c;++u)(o=(i=e-(s=t[u]).x)*i+(a=n-s.y)*a)<r&&(l=s,r=o);return l},on:function(t,n){return arguments.length>1?(u.on(t,n),e):u.on(t)}}},t.forceX=function(t){var e,n,r,i=co(.1);function a(t){for(var i,a=0,o=e.length;a<o;++a)(i=e[a]).vx+=(r[a]-i.x)*n[a]*t}function o(){if(e){var a,o=e.length;for(n=new Array(o),r=new Array(o),a=0;a<o;++a)n[a]=isNaN(r[a]=+t(e[a],a,e))?0:+i(e[a],a,e)}}return"function"!=typeof t&&(t=co(null==t?0:+t)),a.initialize=function(t){e=t,o()},a.strength=function(t){return arguments.length?(i="function"==typeof t?t:co(+t),o(),a):i},a.x=function(e){return arguments.length?(t="function"==typeof e?e:co(+e),o(),a):t},a},t.forceY=function(t){var e,n,r,i=co(.1);function a(t){for(var i,a=0,o=e.length;a<o;++a)(i=e[a]).vy+=(r[a]-i.y)*n[a]*t}function o(){if(e){var a,o=e.length;for(n=new Array(o),r=new Array(o),a=0;a<o;++a)n[a]=isNaN(r[a]=+t(e[a],a,e))?0:+i(e[a],a,e)}}return"function"!=typeof t&&(t=co(null==t?0:+t)),a.initialize=function(t){e=t,o()},a.strength=function(t){return arguments.length?(i="function"==typeof t?t:co(+t),o(),a):i},a.y=function(e){return arguments.length?(t="function"==typeof e?e:co(+e),o(),a):t},a},t.formatDefaultLocale=Uo,t.formatLocale=Ho,t.formatSpecifier=zo,t.geoAlbers=Jc,t.geoAlbersUsa=function(){var t,e,n,r,i,a,o=Jc(),s=Xc().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=Xc().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(t,e){a=[t,e]}};function c(t){var e=t[0],o=t[1];return a=null,n.point(e,o),a||(r.point(e,o),a)||(i.point(e,o),a)}function f(){return t=e=null,c}return c.invert=function(t){var e=o.scale(),n=o.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?l:o).invert(t)},c.stream=function(n){return t&&e===n?t:(r=[o.stream(e=n),s.stream(n),l.stream(n)],i=r.length,t={point:function(t,e){for(var n=-1;++n<i;)r[n].point(t,e)},sphere:function(){for(var t=-1;++t<i;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<i;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<i;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<i;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<i;)r[t].polygonEnd()}});var r,i},c.precision=function(t){return arguments.length?(o.precision(t),s.precision(t),l.precision(t),f()):o.precision()},c.scale=function(t){return arguments.length?(o.scale(t),s.scale(.35*t),l.scale(t),c.translate(o.translate())):o.scale()},c.translate=function(t){if(!arguments.length)return o.translate();var e=o.scale(),a=+t[0],c=+t[1];return n=o.translate(t).clipExtent([[a-.455*e,c-.238*e],[a+.455*e,c+.238*e]]).stream(u),r=s.translate([a-.307*e,c+.201*e]).clipExtent([[a-.425*e+Jo,c+.12*e+Jo],[a-.214*e-Jo,c+.234*e-Jo]]).stream(u),i=l.translate([a-.205*e,c+.212*e]).clipExtent([[a-.214*e+Jo,c+.166*e+Jo],[a-.115*e-Jo,c+.234*e-Jo]]).stream(u),f()},c.fitExtent=function(t,e){return Dc(c,t,e)},c.fitSize=function(t,e){return Ic(c,t,e)},c.fitWidth=function(t,e){return Bc(c,t,e)},c.fitHeight=function(t,e){return jc(c,t,e)},c.scale(1070)},t.geoArea=function(t){return Ps.reset(),As(t,zs),2*Ps},t.geoAzimuthalEqualArea=function(){return Wc(Qc).scale(124.75).clipAngle(179.999)},t.geoAzimuthalEqualAreaRaw=Qc,t.geoAzimuthalEquidistant=function(){return Wc(tf).scale(79.4188).clipAngle(179.999)},t.geoAzimuthalEquidistantRaw=tf,t.geoBounds=function(t){var e,n,r,i,a,o,s;if(Vs=Gs=-(Ws=$s=1/0),Qs=[],As(t,ml),n=Qs.length){for(Qs.sort(Cl),e=1,a=[r=Qs[0]];e<n;++e)El(r,(i=Qs[e])[0])||El(r,i[1])?(Tl(r[0],i[1])>Tl(r[0],r[1])&&(r[1]=i[1]),Tl(i[0],r[1])>Tl(r[0],r[1])&&(r[0]=i[0])):a.push(r=i);for(o=-1/0,e=0,r=a[n=a.length-1];e<=n;r=i,++e)i=a[e],(s=Tl(r[1],i[0]))>o&&(o=s,Ws=i[0],Gs=r[1])}return Qs=tl=null,Ws===1/0||$s===1/0?[[NaN,NaN],[NaN,NaN]]:[[Ws,$s],[Gs,Vs]]},t.geoCentroid=function(t){el=nl=rl=il=al=ol=sl=ll=ul=cl=fl=0,As(t,Nl);var e=ul,n=cl,r=fl,i=e*e+n*n+r*r;return i<Zo&&(e=ol,n=sl,r=ll,nl<Jo&&(e=rl,n=il,r=al),(i=e*e+n*n+r*r)<Zo)?[NaN,NaN]:[os(n,e)*ns,vs(r/ps(i))*ns]},t.geoCircle=function(){var t,e,n=Yl([0,0]),r=Yl(90),i=Yl(6),a={point:function(n,r){t.push(n=e(n,r)),n[0]*=ns,n[1]*=ns}};function o(){var o=n.apply(this,arguments),s=r.apply(this,arguments)*rs,l=i.apply(this,arguments)*rs;return t=[],e=ql(-o[0]*rs,-o[1]*rs,0).invert,Vl(a,s,l,1),o={type:"Polygon",coordinates:[t]},t=e=null,o}return o.center=function(t){return arguments.length?(n="function"==typeof t?t:Yl([+t[0],+t[1]]),o):n},o.radius=function(t){return arguments.length?(r="function"==typeof t?t:Yl(+t),o):r},o.precision=function(t){return arguments.length?(i="function"==typeof t?t:Yl(+t),o):i},o},t.geoClipAntimeridian=su,t.geoClipCircle=lu,t.geoClipExtent=function(){var t,e,n,r=0,i=0,a=960,o=500;return n={stream:function(n){return t&&e===n?t:t=fu(r,i,a,o)(e=n)},extent:function(s){return arguments.length?(r=+s[0][0],i=+s[0][1],a=+s[1][0],o=+s[1][1],t=e=null,n):[[r,i],[a,o]]}}},t.geoClipRectangle=fu,t.geoConicConformal=function(){return Gc(af).scale(109.5).parallels([30,30])},t.geoConicConformalRaw=af,t.geoConicEqualArea=Xc,t.geoConicEqualAreaRaw=Vc,t.geoConicEquidistant=function(){return Gc(sf).scale(131.154).center([0,13.9389])},t.geoConicEquidistantRaw=sf,t.geoContains=function(t,e){return(t&&Mu.hasOwnProperty(t.type)?Mu[t.type]:Tu)(t,e)},t.geoDistance=ku,t.geoEqualEarth=function(){return Wc(df).scale(177.158)},t.geoEqualEarthRaw=df,t.geoEquirectangular=function(){return Wc(of).scale(152.63)},t.geoEquirectangularRaw=of,t.geoGnomonic=function(){return Wc(pf).scale(144.049).clipAngle(60)},t.geoGnomonicRaw=pf,t.geoGraticule=Ou,t.geoGraticule10=function(){return Ou()()},t.geoIdentity=function(){var t,e,n,r,i,a,o,s=1,l=0,u=0,c=1,f=1,h=0,d=null,p=1,g=1,y=zc({point:function(t,e){var n=x([t,e]);this.stream.point(n[0],n[1])}}),v=Lu;function m(){return p=s*c,g=s*f,a=o=null,x}function x(n){var r=n[0]*p,i=n[1]*g;if(h){var a=i*t-r*e;r=r*t+i*e,i=a}return[r+l,i+u]}return x.invert=function(n){var r=n[0]-l,i=n[1]-u;if(h){var a=i*t+r*e;r=r*t-i*e,i=a}return[r/p,i/g]},x.stream=function(t){return a&&o===t?a:a=y(v(o=t))},x.postclip=function(t){return arguments.length?(v=t,d=n=r=i=null,m()):v},x.clipExtent=function(t){return arguments.length?(v=null==t?(d=n=r=i=null,Lu):fu(d=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),m()):null==d?null:[[d,n],[r,i]]},x.scale=function(t){return arguments.length?(s=+t,m()):s},x.translate=function(t){return arguments.length?(l=+t[0],u=+t[1],m()):[l,u]},x.angle=function(n){return arguments.length?(e=hs(h=n%360*rs),t=ss(h),m()):h*ns},x.reflectX=function(t){return arguments.length?(c=t?-1:1,m()):c<0},x.reflectY=function(t){return arguments.length?(f=t?-1:1,m()):f<0},x.fitExtent=function(t,e){return Dc(x,t,e)},x.fitSize=function(t,e){return Ic(x,t,e)},x.fitWidth=function(t,e){return Bc(x,t,e)},x.fitHeight=function(t,e){return jc(x,t,e)},x},t.geoInterpolate=function(t,e){var n=t[0]*rs,r=t[1]*rs,i=e[0]*rs,a=e[1]*rs,o=ss(r),s=hs(r),l=ss(a),u=hs(a),c=o*ss(n),f=o*hs(n),h=l*ss(i),d=l*hs(i),p=2*vs(ps(ms(a-r)+o*l*ms(i-n))),g=hs(p),y=p?function(t){var e=hs(t*=p)/g,n=hs(p-t)/g,r=n*c+e*h,i=n*f+e*d,a=n*s+e*u;return[os(i,r)*ns,os(a,ps(r*r+i*i))*ns]}:function(){return[n*ns,r*ns]};return y.distance=p,y},t.geoLength=bu,t.geoMercator=function(){return nf(ef).scale(961/es)},t.geoMercatorRaw=ef,t.geoNaturalEarth1=function(){return Wc(gf).scale(175.295)},t.geoNaturalEarth1Raw=gf,t.geoOrthographic=function(){return Wc(yf).scale(249.5).clipAngle(90+Jo)},t.geoOrthographicRaw=yf,t.geoPath=function(t,e){var n,r,i=4.5;function a(t){return t&&("function"==typeof i&&r.pointRadius(+i.apply(this,arguments)),As(t,n(r))),r.result()}return a.area=function(t){return As(t,n(Uu)),Uu.result()},a.measure=function(t){return As(t,n(Ec)),Ec.result()},a.bounds=function(t){return As(t,n(ec)),ec.result()},a.centroid=function(t){return As(t,n(fc)),fc.result()},a.projection=function(e){return arguments.length?(n=null==e?(t=null,Lu):(t=e).stream,a):t},a.context=function(t){return arguments.length?(r=null==t?(e=null,new Sc):new _c(e=t),"function"!=typeof i&&r.pointRadius(i),a):e},a.pointRadius=function(t){return arguments.length?(i="function"==typeof t?t:(r.pointRadius(+t),+t),a):i},a.projection(t).context(e)},t.geoProjection=Wc,t.geoProjectionMutator=$c,t.geoRotation=Gl,t.geoStereographic=function(){return Wc(vf).scale(250).clipAngle(142)},t.geoStereographicRaw=vf,t.geoStream=As,t.geoTransform=function(t){return{stream:zc(t)}},t.geoTransverseMercator=function(){var t=nf(mf),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)},t.geoTransverseMercatorRaw=mf,t.gray=function(t,e){return new Ie(t,0,0,null==e?1:e)},t.hcl=qe,t.hierarchy=kf,t.histogram=function(){var t=g,e=c,n=k;function r(r){var a,o,s=r.length,l=new Array(s);for(a=0;a<s;++a)l[a]=t(r[a],a,r);var u=e(l),c=u[0],f=u[1],h=n(l,c,f);Array.isArray(h)||(h=w(c,f,h),h=y(Math.ceil(c/h)*h,f,h));for(var d=h.length;h[0]<=c;)h.shift(),--d;for(;h[d-1]>f;)h.pop(),--d;var p,g=new Array(d+1);for(a=0;a<=d;++a)(p=g[a]=[]).x0=a>0?h[a-1]:c,p.x1=a<d?h[a]:f;for(a=0;a<s;++a)c<=(o=l[a])&&o<=f&&g[i(h,o,0,d)].push(r[a]);return g}return r.value=function(e){return arguments.length?(t="function"==typeof e?e:p(e),r):t},r.domain=function(t){return arguments.length?(e="function"==typeof t?t:p([t[0],t[1]]),r):e},r.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?p(h.call(t)):p(t),r):n},r},t.hsl=ke,t.html=lo,t.image=function(t,e){return new Promise(function(n,r){var i=new Image;for(var a in e)i[a]=e[a];i.onerror=r,i.onload=function(){n(i)},i.src=t})},t.interpolate=wn,t.interpolateArray=function(t,e){return(pn(e)?dn:gn)(t,e)},t.interpolateBasis=nn,t.interpolateBasisClosed=rn,t.interpolateBlues=Wy,t.interpolateBrBG=ry,t.interpolateBuGn=_y,t.interpolateBuPu=ky,t.interpolateCividis=function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"},t.interpolateCool=iv,t.interpolateCubehelix=Xn,t.interpolateCubehelixDefault=nv,t.interpolateCubehelixLong=Jn,t.interpolateDate=yn,t.interpolateDiscrete=function(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}},t.interpolateGnBu=Ay,t.interpolateGreens=Gy,t.interpolateGreys=Xy,t.interpolateHcl=Fn,t.interpolateHclLong=Wn,t.interpolateHsl=Hn,t.interpolateHslLong=Un,t.interpolateHue=function(t,e){var n=sn(+t,+e);return function(t){var e=n(t);return e-360*Math.floor(e/360)}},t.interpolateInferno=hv,t.interpolateLab=function(t,e){var n=ln((t=De(t)).l,(e=De(e)).l),r=ln(t.a,e.a),i=ln(t.b,e.b),a=ln(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=i(e),t.opacity=a(e),t+""}},t.interpolateMagma=fv,t.interpolateNumber=vn,t.interpolateNumberArray=dn,t.interpolateObject=mn,t.interpolateOrRd=Cy,t.interpolateOranges=ev,t.interpolatePRGn=ay,t.interpolatePiYG=sy,t.interpolatePlasma=dv,t.interpolatePuBu=Sy,t.interpolatePuBuGn=Ny,t.interpolatePuOr=uy,t.interpolatePuRd=zy,t.interpolatePurples=Zy,t.interpolateRainbow=function(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return av.h=360*t-100,av.s=1.5-1.5*e,av.l=.8-.9*e,av+""},t.interpolateRdBu=fy,t.interpolateRdGy=dy,t.interpolateRdPu=Ly,t.interpolateRdYlBu=gy,t.interpolateRdYlGn=vy,t.interpolateReds=Qy,t.interpolateRgb=un,t.interpolateRgbBasis=fn,t.interpolateRgbBasisClosed=hn,t.interpolateRound=kn,t.interpolateSinebow=function(t){var e;return t=(.5-t)*Math.PI,ov.r=255*(e=Math.sin(t))*e,ov.g=255*(e=Math.sin(t+sv))*e,ov.b=255*(e=Math.sin(t+lv))*e,ov+""},t.interpolateSpectral=xy,t.interpolateString=_n,t.interpolateTransformCss=Pn,t.interpolateTransformSvg=zn,t.interpolateTurbo=function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"},t.interpolateViridis=cv,t.interpolateWarm=rv,t.interpolateYlGn=jy,t.interpolateYlGnBu=Iy,t.interpolateYlOrBr=Hy,t.interpolateYlOrRd=qy,t.interpolateZoom=jn,t.interrupt=Er,t.interval=function(t,e,n){var r=new lr,i=e;return null==e?(r.restart(t,e,n),r):(e=+e,n=null==n?or():+n,r.restart(function a(o){o+=i,r.restart(a,i+=e,n),t(o)},e,n),r)},t.isoFormat=Cg,t.isoParse=Eg,t.json=function(t,e){return fetch(t,e).then(ao)},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e},t.lab=De,t.lch=function(t,e,n,r){return 1===arguments.length?Ue(t):new Fe(n,e,t,null==r?1:r)},t.line=Iv,t.lineRadial=Wv,t.linkHorizontal=function(){return Zv(Kv)},t.linkRadial=function(){var t=Zv(tm);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t},t.linkVertical=function(){return Zv(Qv)},t.local=Ot,t.map=ia,t.matcher=tt,t.max=A,t.mean=function(t,e){var n,r=t.length,i=r,a=-1,o=0;if(null==e)for(;++a<r;)isNaN(n=s(t[a]))?--i:o+=n;else for(;++a<r;)isNaN(n=s(e(t[a],a,t)))?--i:o+=n;if(i)return o/i},t.median=function(t,n){var r,i=t.length,a=-1,o=[];if(null==n)for(;++a<i;)isNaN(r=s(t[a]))||o.push(r);else for(;++a<i;)isNaN(r=s(n(t[a],a,t)))||o.push(r);return M(o.sort(e),.5)},t.merge=T,t.min=C,t.mouse=Bt,t.namespace=V,t.namespaces=G,t.nest=function(){var t,e,n,r=[],i=[];function a(n,i,o,s){if(i>=r.length)return null!=t&&n.sort(t),null!=e?e(n):n;for(var l,u,c,f=-1,h=n.length,d=r[i++],p=ia(),g=o();++f<h;)(c=p.get(l=d(u=n[f])+""))?c.push(u):p.set(l,[u]);return p.each(function(t,e){s(g,e,a(t,i,o,s))}),g}return n={object:function(t){return a(t,0,aa,oa)},map:function(t){return a(t,0,sa,la)},entries:function(t){return function t(n,a){if(++a>r.length)return n;var o,s=i[a-1];return null!=e&&a>=r.length?o=n.entries():(o=[],n.each(function(e,n){o.push({key:n,values:t(e,a)})})),null!=s?o.sort(function(t,e){return s(t.key,e.key)}):o}(a(t,0,sa,la),0)},key:function(t){return r.push(t),n},sortKeys:function(t){return i[r.length-1]=t,n},sortValues:function(e){return t=e,n},rollup:function(t){return e=t,n}}},t.now=or,t.pack=function(){var t=null,e=1,n=1,r=qf;function i(i){return i.x=e/2,i.y=n/2,t?i.eachBefore($f(t)).eachAfter(Gf(r,.5)).eachBefore(Vf(1)):i.eachBefore($f(Wf)).eachAfter(Gf(qf,1)).eachAfter(Gf(r,i.r/Math.min(e,n))).eachBefore(Vf(Math.min(e,n)/(2*i.r))),i}return i.radius=function(e){return arguments.length?(t=function(t){return null==t?null:Uf(t)}(e),i):t},i.size=function(t){return arguments.length?(e=+t[0],n=+t[1],i):[e,n]},i.padding=function(t){return arguments.length?(r="function"==typeof t?t:Ff(+t),i):r},i},t.packEnclose=Nf,t.packSiblings=function(t){return Hf(t),t},t.pairs=function(t,e){null==e&&(e=o);for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return a},t.partition=function(){var t=1,e=1,n=0,r=!1;function i(i){var a=i.height+1;return i.x0=i.y0=n,i.x1=t,i.y1=e/a,i.eachBefore(function(t,e){return function(r){r.children&&Jf(r,r.x0,t*(r.depth+1)/e,r.x1,t*(r.depth+2)/e);var i=r.x0,a=r.y0,o=r.x1-n,s=r.y1-n;o<i&&(i=o=(i+o)/2),s<a&&(a=s=(a+s)/2),r.x0=i,r.y0=a,r.x1=o,r.y1=s}}(e,a)),r&&i.eachBefore(Xf),i}return i.round=function(t){return arguments.length?(r=!!t,i):r},i.size=function(n){return arguments.length?(t=+n[0],e=+n[1],i):[t,e]},i.padding=function(t){return arguments.length?(n=+t,i):n},i},t.path=Zi,t.permute=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},t.pie=function(){var t=Yv,e=jv,n=null,r=pv(0),i=pv(Av),a=pv(0);function o(o){var s,l,u,c,f,h=o.length,d=0,p=new Array(h),g=new Array(h),y=+r.apply(this,arguments),v=Math.min(Av,Math.max(-Av,i.apply(this,arguments)-y)),m=Math.min(Math.abs(v)/h,a.apply(this,arguments)),x=m*(v<0?-1:1);for(s=0;s<h;++s)(f=g[p[s]=s]=+t(o[s],s,o))>0&&(d+=f);for(null!=e?p.sort(function(t,n){return e(g[t],g[n])}):null!=n&&p.sort(function(t,e){return n(o[t],o[e])}),s=0,u=d?(v-h*x)/d:0;s<h;++s,y=c)l=p[s],c=y+((f=g[l])>0?f*u:0)+x,g[l]={data:o[l],index:s,value:f,startAngle:y,endAngle:c,padAngle:m};return g}return o.value=function(e){return arguments.length?(t="function"==typeof e?e:pv(+e),o):t},o.sortValues=function(t){return arguments.length?(e=t,n=null,o):e},o.sort=function(t){return arguments.length?(n=t,e=null,o):n},o.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:pv(+t),o):r},o.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:pv(+t),o):i},o.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:pv(+t),o):a},o},t.piecewise=function(t,e){for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return a[e](t-e)}},t.pointRadial=Gv,t.polygonArea=function(t){for(var e,n=-1,r=t.length,i=t[r-1],a=0;++n<r;)e=i,i=t[n],a+=e[1]*i[0]-e[0]*i[1];return a/2},t.polygonCentroid=function(t){for(var e,n,r=-1,i=t.length,a=0,o=0,s=t[i-1],l=0;++r<i;)e=s,s=t[r],l+=n=e[0]*s[1]-s[0]*e[1],a+=(e[0]+s[0])*n,o+=(e[1]+s[1])*n;return[a/(l*=3),o/l]},t.polygonContains=function(t,e){for(var n,r,i=t.length,a=t[i-1],o=e[0],s=e[1],l=a[0],u=a[1],c=!1,f=0;f<i;++f)n=(a=t[f])[0],(r=a[1])>s!=u>s&&o<(l-n)*(s-r)/(u-r)+n&&(c=!c),l=n,u=r;return c},t.polygonHull=function(t){if((n=t.length)<3)return null;var e,n,r=new Array(n),i=new Array(n);for(e=0;e<n;++e)r[e]=[+t[e][0],+t[e][1],e];for(r.sort(ph),e=0;e<n;++e)i[e]=[r[e][0],-r[e][1]];var a=gh(r),o=gh(i),s=o[0]===a[0],l=o[o.length-1]===a[a.length-1],u=[];for(e=a.length-1;e>=0;--e)u.push(t[r[a[e]][2]]);for(e=+s;e<o.length-l;++e)u.push(t[r[o[e]][2]]);return u},t.polygonLength=function(t){for(var e,n,r=-1,i=t.length,a=t[i-1],o=a[0],s=a[1],l=0;++r<i;)e=o,n=s,e-=o=(a=t[r])[0],n-=s=a[1],l+=Math.sqrt(e*e+n*n);return l},t.precisionFixed=qo,t.precisionPrefix=Fo,t.precisionRound=Wo,t.quadtree=vo,t.quantile=M,t.quantize=function(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n},t.radialArea=$v,t.radialLine=Wv,t.randomBates=_h,t.randomExponential=wh,t.randomIrwinHall=bh,t.randomLogNormal=xh,t.randomNormal=mh,t.randomUniform=vh,t.range=y,t.rgb=ye,t.ribbon=function(){var t=Ki,e=Qi,n=ta,r=ea,i=na,a=null;function o(){var o,s=Wi.call(arguments),l=t.apply(this,s),u=e.apply(this,s),c=+n.apply(this,(s[0]=l,s)),f=r.apply(this,s)-Ui,h=i.apply(this,s)-Ui,d=c*ji(f),p=c*Yi(f),g=+n.apply(this,(s[0]=u,s)),y=r.apply(this,s)-Ui,v=i.apply(this,s)-Ui;if(a||(a=o=Zi()),a.moveTo(d,p),a.arc(0,0,c,f,h),f===y&&h===v||(a.quadraticCurveTo(0,0,g*ji(y),g*Yi(y)),a.arc(0,0,g,y,v)),a.quadraticCurveTo(0,0,d,p),a.closePath(),o)return a=null,o+""||null}return o.radius=function(t){return arguments.length?(n="function"==typeof t?t:$i(+t),o):n},o.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:$i(+t),o):r},o.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:$i(+t),o):i},o.source=function(e){return arguments.length?(t=e,o):t},o.target=function(t){return arguments.length?(e=t,o):e},o.context=function(t){return arguments.length?(a=null==t?null:t,o):a},o},t.scaleBand=Rh,t.scaleDiverging=function t(){var e=Uh(Ug()(zh));return e.copy=function(){return Yg(e,t())},Mh.apply(e,arguments)},t.scaleDivergingLog=function t(){var e=Jh(Ug()).domain([.1,1,10]);return e.copy=function(){return Yg(e,t()).base(e.base())},Mh.apply(e,arguments)},t.scaleDivergingPow=qg,t.scaleDivergingSqrt=function(){return qg.apply(null,arguments).exponent(.5)},t.scaleDivergingSymlog=function t(){var e=Qh(Ug());return e.copy=function(){return Yg(e,t()).constant(e.constant())},Mh.apply(e,arguments)},t.scaleIdentity=function t(e){var n;function r(t){return isNaN(t=+t)?n:t}return r.invert=r,r.domain=r.range=function(t){return arguments.length?(e=Th.call(t,Sh),r):e.slice()},r.unknown=function(t){return arguments.length?(n=t,r):n},r.copy=function(){return t(e).unknown(n)},e=arguments.length?Th.call(e,Sh):[0,1],Uh(r)},t.scaleImplicit=Eh,t.scaleLinear=function t(){var e=Yh(zh,zh);return e.copy=function(){return Bh(e,t())},kh.apply(e,arguments),Uh(e)},t.scaleLog=function t(){var e=Jh(jh()).domain([1,10]);return e.copy=function(){return Bh(e,t()).base(e.base())},kh.apply(e,arguments),e},t.scaleOrdinal=Nh,t.scalePoint=function(){return function t(e){var n=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return t(n())},e}(Rh.apply(null,arguments).paddingInner(1))},t.scalePow=id,t.scaleQuantile=function t(){var n,r=[],a=[],o=[];function s(){var t=0,e=Math.max(1,a.length);for(o=new Array(e-1);++t<e;)o[t-1]=M(r,t/e);return l}function l(t){return isNaN(t=+t)?n:a[i(o,t)]}return l.invertExtent=function(t){var e=a.indexOf(t);return e<0?[NaN,NaN]:[e>0?o[e-1]:r[0],e<o.length?o[e]:r[r.length-1]]},l.domain=function(t){if(!arguments.length)return r.slice();r=[];for(var n,i=0,a=t.length;i<a;++i)null==(n=t[i])||isNaN(n=+n)||r.push(n);return r.sort(e),s()},l.range=function(t){return arguments.length?(a=Ch.call(t),s()):a.slice()},l.unknown=function(t){return arguments.length?(n=t,l):n},l.quantiles=function(){return o.slice()},l.copy=function(){return t().domain(r).range(a).unknown(n)},kh.apply(l,arguments)},t.scaleQuantize=function t(){var e,n=0,r=1,a=1,o=[.5],s=[0,1];function l(t){return t<=t?s[i(o,t,0,a)]:e}function u(){var t=-1;for(o=new Array(a);++t<a;)o[t]=((t+1)*r-(t-a)*n)/(a+1);return l}return l.domain=function(t){return arguments.length?(n=+t[0],r=+t[1],u()):[n,r]},l.range=function(t){return arguments.length?(a=(s=Ch.call(t)).length-1,u()):s.slice()},l.invertExtent=function(t){var e=s.indexOf(t);return e<0?[NaN,NaN]:e<1?[n,o[0]]:e>=a?[o[a-1],r]:[o[e-1],o[e]]},l.unknown=function(t){return arguments.length?(e=t,l):l},l.thresholds=function(){return o.slice()},l.copy=function(){return t().domain([n,r]).range(s).unknown(e)},kh.apply(Uh(l),arguments)},t.scaleSequential=function t(){var e=Uh(jg()(zh));return e.copy=function(){return Yg(e,t())},Mh.apply(e,arguments)},t.scaleSequentialLog=function t(){var e=Jh(jg()).domain([1,10]);return e.copy=function(){return Yg(e,t()).base(e.base())},Mh.apply(e,arguments)},t.scaleSequentialPow=Hg,t.scaleSequentialQuantile=function t(){var n=[],r=zh;function a(t){if(!isNaN(t=+t))return r((i(n,t)-1)/(n.length-1))}return a.domain=function(t){if(!arguments.length)return n.slice();n=[];for(var r,i=0,o=t.length;i<o;++i)null==(r=t[i])||isNaN(r=+r)||n.push(r);return n.sort(e),a},a.interpolator=function(t){return arguments.length?(r=t,a):r},a.copy=function(){return t(r).domain(n)},Mh.apply(a,arguments)},t.scaleSequentialSqrt=function(){return Hg.apply(null,arguments).exponent(.5)},t.scaleSequentialSymlog=function t(){var e=Qh(jg());return e.copy=function(){return Yg(e,t()).constant(e.constant())},Mh.apply(e,arguments)},t.scaleSqrt=function(){return id.apply(null,arguments).exponent(.5)},t.scaleSymlog=function t(){var e=Qh(jh());return e.copy=function(){return Bh(e,t()).constant(e.constant())},kh.apply(e,arguments)},t.scaleThreshold=function t(){var e,n=[.5],r=[0,1],a=1;function o(t){return t<=t?r[i(n,t,0,a)]:e}return o.domain=function(t){return arguments.length?(n=Ch.call(t),a=Math.min(n.length,r.length-1),o):n.slice()},o.range=function(t){return arguments.length?(r=Ch.call(t),a=Math.min(n.length,r.length-1),o):r.slice()},o.invertExtent=function(t){var e=r.indexOf(t);return[n[e-1],n[e]]},o.unknown=function(t){return arguments.length?(e=t,o):e},o.copy=function(){return t().domain(n).range(r).unknown(e)},kh.apply(o,arguments)},t.scaleTime=function(){return kh.apply(Bg(Id,Ld,_d,md,yd,pd,hd,ld,t.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},t.scaleUtc=function(){return kh.apply(Bg(lp,op,$d,qd,Hd,jd,hd,ld,t.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},t.scan=function(t,n){if(r=t.length){var r,i,a=0,o=0,s=t[o];for(null==n&&(n=e);++a<r;)(n(i=t[a],s)<0||0!==n(s,s))&&(s=i,o=a);return 0===n(s,s)?o:void 0}},t.schemeAccent=$g,t.schemeBlues=Fy,t.schemeBrBG=ny,t.schemeBuGn=by,t.schemeBuPu=wy,t.schemeCategory10=Wg,t.schemeDark2=Gg,t.schemeGnBu=My,t.schemeGreens=$y,t.schemeGreys=Vy,t.schemeOrRd=Ty,t.schemeOranges=tv,t.schemePRGn=iy,t.schemePaired=Vg,t.schemePastel1=Xg,t.schemePastel2=Jg,t.schemePiYG=oy,t.schemePuBu=Ry,t.schemePuBuGn=Ey,t.schemePuOr=ly,t.schemePuRd=Py,t.schemePurples=Jy,t.schemeRdBu=cy,t.schemeRdGy=hy,t.schemeRdPu=Oy,t.schemeRdYlBu=py,t.schemeRdYlGn=yy,t.schemeReds=Ky,t.schemeSet1=Zg,t.schemeSet2=Kg,t.schemeSet3=Qg,t.schemeSpectral=my,t.schemeTableau10=ty,t.schemeYlGn=By,t.schemeYlGnBu=Dy,t.schemeYlOrBr=Yy,t.schemeYlOrRd=Uy,t.select=Pt,t.selectAll=function(t){return"string"==typeof t?new Rt([document.querySelectorAll(t)],[document.documentElement]):new Rt([null==t?[]:t],Nt)},t.selection=St,t.selector=Z,t.selectorAll=Q,t.set=fa,t.shuffle=function(t,e,n){for(var r,i,a=(null==n?t.length:n)-(e=null==e?0:+e);a;)i=Math.random()*a--|0,r=t[a+e],t[a+e]=t[i+e],t[i+e]=r;return t},t.stack=function(){var t=pv([]),e=Zm,n=Jm,r=Km;function i(i){var a,o,s=t.apply(this,arguments),l=i.length,u=s.length,c=new Array(u);for(a=0;a<u;++a){for(var f,h=s[a],d=c[a]=new Array(l),p=0;p<l;++p)d[p]=f=[0,+r(i[p],h,p,i)],f.data=i[p];d.key=h}for(a=0,o=e(c);a<u;++a)c[o[a]].index=a;return n(c,o),c}return i.keys=function(e){return arguments.length?(t="function"==typeof e?e:pv(Vv.call(e)),i):t},i.value=function(t){return arguments.length?(r="function"==typeof t?t:pv(+t),i):r},i.order=function(t){return arguments.length?(e=null==t?Zm:"function"==typeof t?t:pv(Vv.call(t)),i):e},i.offset=function(t){return arguments.length?(n=null==t?Jm:t,i):n},i},t.stackOffsetDiverging=function(t,e){if((s=t.length)>0)for(var n,r,i,a,o,s,l=0,u=t[e[0]].length;l<u;++l)for(a=o=0,n=0;n<s;++n)(i=(r=t[e[n]][l])[1]-r[0])>0?(r[0]=a,r[1]=a+=i):i<0?(r[1]=o,r[0]=o+=i):(r[0]=0,r[1]=i)},t.stackOffsetExpand=function(t,e){if((r=t.length)>0){for(var n,r,i,a=0,o=t[0].length;a<o;++a){for(i=n=0;n<r;++n)i+=t[n][a][1]||0;if(i)for(n=0;n<r;++n)t[n][a][1]/=i}Jm(t,e)}},t.stackOffsetNone=Jm,t.stackOffsetSilhouette=function(t,e){if((n=t.length)>0){for(var n,r=0,i=t[e[0]],a=i.length;r<a;++r){for(var o=0,s=0;o<n;++o)s+=t[o][r][1]||0;i[r][1]+=i[r][0]=-s/2}Jm(t,e)}},t.stackOffsetWiggle=function(t,e){if((i=t.length)>0&&(r=(n=t[e[0]]).length)>0){for(var n,r,i,a=0,o=1;o<r;++o){for(var s=0,l=0,u=0;s<i;++s){for(var c=t[e[s]],f=c[o][1]||0,h=(f-(c[o-1][1]||0))/2,d=0;d<s;++d){var p=t[e[d]];h+=(p[o][1]||0)-(p[o-1][1]||0)}l+=f,u+=h*f}n[o-1][1]+=n[o-1][0]=a,l&&(a-=u/l)}n[o-1][1]+=n[o-1][0]=a,Jm(t,e)}},t.stackOrderAppearance=Qm,t.stackOrderAscending=ex,t.stackOrderDescending=function(t){return ex(t).reverse()},t.stackOrderInsideOut=function(t){var e,n,r=t.length,i=t.map(nx),a=Qm(t),o=0,s=0,l=[],u=[];for(e=0;e<r;++e)n=a[e],o<s?(o+=i[n],l.push(n)):(s+=i[n],u.push(n));return u.reverse().concat(l)},t.stackOrderNone=Zm,t.stackOrderReverse=function(t){return Zm(t).reverse()},t.stratify=function(){var t=th,e=eh;function n(n){var r,i,a,o,s,l,u,c=n.length,f=new Array(c),h={};for(i=0;i<c;++i)r=n[i],s=f[i]=new Cf(r),null!=(l=t(r,i,n))&&(l+="")&&(h[u=Zf+(s.id=l)]=u in h?Qf:s);for(i=0;i<c;++i)if(s=f[i],null!=(l=e(n[i],i,n))&&(l+="")){if(!(o=h[Zf+l]))throw new Error("missing: "+l);if(o===Qf)throw new Error("ambiguous: "+l);o.children?o.children.push(s):o.children=[s],s.parent=o}else{if(a)throw new Error("multiple roots");a=s}if(!a)throw new Error("no root");if(a.parent=Kf,a.eachBefore(function(t){t.depth=t.parent.depth+1,--c}).eachBefore(Tf),a.parent=null,c>0)throw new Error("cycle");return a}return n.id=function(e){return arguments.length?(t=Uf(e),n):t},n.parentId=function(t){return arguments.length?(e=Uf(t),n):e},n},t.style=lt,t.sum=function(t,e){var n,r=t.length,i=-1,a=0;if(null==e)for(;++i<r;)(n=+t[i])&&(a+=n);else for(;++i<r;)(n=+e(t[i],i,t))&&(a+=n);return a},t.svg=uo,t.symbol=function(){var t=pv(em),e=pv(64),n=null;function r(){var r;if(n||(n=r=Zi()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),r)return n=null,r+""||null}return r.type=function(e){return arguments.length?(t="function"==typeof e?e:pv(e),r):t},r.size=function(t){return arguments.length?(e="function"==typeof t?t:pv(+t),r):e},r.context=function(t){return arguments.length?(n=null==t?null:t,r):n},r},t.symbolCircle=em,t.symbolCross=nm,t.symbolDiamond=am,t.symbolSquare=cm,t.symbolStar=um,t.symbolTriangle=hm,t.symbolWye=ym,t.symbols=vm,t.text=eo,t.thresholdFreedmanDiaconis=function(t,n,r){return t=d.call(t,s).sort(e),Math.ceil((r-n)/(2*(M(t,.75)-M(t,.25))*Math.pow(t.length,-1/3)))},t.thresholdScott=function(t,e,n){return Math.ceil((n-e)/(3.5*u(t)*Math.pow(t.length,-1/3)))},t.thresholdSturges=k,t.tickFormat=Hh,t.tickIncrement=_,t.tickStep=w,t.ticks=b,t.timeDay=md,t.timeDays=xd,t.timeFormatDefaultLocale=Tg,t.timeFormatLocale=dp,t.timeFriday=Td,t.timeFridays=zd,t.timeHour=yd,t.timeHours=vd,t.timeInterval=sd,t.timeMillisecond=ld,t.timeMilliseconds=ud,t.timeMinute=pd,t.timeMinutes=gd,t.timeMonday=wd,t.timeMondays=Nd,t.timeMonth=Ld,t.timeMonths=Dd,t.timeSaturday=Cd,t.timeSaturdays=Od,t.timeSecond=hd,t.timeSeconds=dd,t.timeSunday=_d,t.timeSundays=Ed,t.timeThursday=Ad,t.timeThursdays=Pd,t.timeTuesday=kd,t.timeTuesdays=Rd,t.timeWednesday=Md,t.timeWednesdays=Sd,t.timeWeek=_d,t.timeWeeks=Ed,t.timeYear=Id,t.timeYears=Bd,t.timeout=pr,t.timer=ur,t.timerFlush=cr,t.touch=jt,t.touches=function(t,e){null==e&&(e=Dt().touches);for(var n=0,r=e?e.length:0,i=new Array(r);n<r;++n)i[n]=It(t,e[n]);return i},t.transition=Lr,t.transpose=E,t.tree=function(){var t=nh,e=1,n=1,r=null;function i(i){var l=function(t){for(var e,n,r,i,a,o=new sh(t,0),s=[o];e=s.pop();)if(r=e._.children)for(e.children=new Array(a=r.length),i=a-1;i>=0;--i)s.push(n=e.children[i]=new sh(r[i],i)),n.parent=e;return(o.parent=new sh(null,0)).children=[o],o}(i);if(l.eachAfter(a),l.parent.m=-l.z,l.eachBefore(o),r)i.eachBefore(s);else{var u=i,c=i,f=i;i.eachBefore(function(t){t.x<u.x&&(u=t),t.x>c.x&&(c=t),t.depth>f.depth&&(f=t)});var h=u===c?1:t(u,c)/2,d=h-u.x,p=e/(c.x+h+d),g=n/(f.depth||1);i.eachBefore(function(t){t.x=(t.x+d)*p,t.y=t.depth*g})}return i}function a(e){var n=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(n){!function(t){for(var e,n=0,r=0,i=t.children,a=i.length;--a>=0;)(e=i[a]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(e);var a=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+t(e._,i._),e.m=e.z-a):e.z=a}else i&&(e.z=i.z+t(e._,i._));e.parent.A=function(e,n,r){if(n){for(var i,a=e,o=e,s=n,l=a.parent.children[0],u=a.m,c=o.m,f=s.m,h=l.m;s=ih(s),a=rh(a),s&&a;)l=rh(l),(o=ih(o)).a=e,(i=s.z+f-a.z-u+t(s._,a._))>0&&(ah(oh(s,e,r),e,i),u+=i,c+=i),f+=s.m,u+=a.m,h+=l.m,c+=o.m;s&&!ih(o)&&(o.t=s,o.m+=f-c),a&&!rh(l)&&(l.t=a,l.m+=u-h,r=e)}return r}(e,i,e.parent.A||r[0])}function o(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function s(t){t.x*=e,t.y=t.depth*n}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i},t.treemap=function(){var t=fh,e=!1,n=1,r=1,i=[0],a=qf,o=qf,s=qf,l=qf,u=qf;function c(t){return t.x0=t.y0=0,t.x1=n,t.y1=r,t.eachBefore(f),i=[0],e&&t.eachBefore(Xf),t}function f(e){var n=i[e.depth],r=e.x0+n,c=e.y0+n,f=e.x1-n,h=e.y1-n;f<r&&(r=f=(r+f)/2),h<c&&(c=h=(c+h)/2),e.x0=r,e.y0=c,e.x1=f,e.y1=h,e.children&&(n=i[e.depth+1]=a(e)/2,r+=u(e)-n,c+=o(e)-n,(f-=s(e)-n)<r&&(r=f=(r+f)/2),(h-=l(e)-n)<c&&(c=h=(c+h)/2),t(e,r,c,f,h))}return c.round=function(t){return arguments.length?(e=!!t,c):e},c.size=function(t){return arguments.length?(n=+t[0],r=+t[1],c):[n,r]},c.tile=function(e){return arguments.length?(t=Uf(e),c):t},c.padding=function(t){return arguments.length?c.paddingInner(t).paddingOuter(t):c.paddingInner()},c.paddingInner=function(t){return arguments.length?(a="function"==typeof t?t:Ff(+t),c):a},c.paddingOuter=function(t){return arguments.length?c.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):c.paddingTop()},c.paddingTop=function(t){return arguments.length?(o="function"==typeof t?t:Ff(+t),c):o},c.paddingRight=function(t){return arguments.length?(s="function"==typeof t?t:Ff(+t),c):s},c.paddingBottom=function(t){return arguments.length?(l="function"==typeof t?t:Ff(+t),c):l},c.paddingLeft=function(t){return arguments.length?(u="function"==typeof t?t:Ff(+t),c):u},c},t.treemapBinary=function(t,e,n,r,i){var a,o,s=t.children,l=s.length,u=new Array(l+1);for(u[0]=o=a=0;a<l;++a)u[a+1]=o+=s[a].value;!function t(e,n,r,i,a,o,l){if(e>=n-1){var c=s[e];return c.x0=i,c.y0=a,c.x1=o,void(c.y1=l)}for(var f=u[e],h=r/2+f,d=e+1,p=n-1;d<p;){var g=d+p>>>1;u[g]<h?d=g+1:p=g}h-u[d-1]<u[d]-h&&e+1<d&&--d;var y=u[d]-f,v=r-y;if(o-i>l-a){var m=(i*v+o*y)/r;t(e,d,y,i,a,m,l),t(d,n,v,m,a,o,l)}else{var x=(a*v+l*y)/r;t(e,d,y,i,a,o,x),t(d,n,v,i,x,o,l)}}(0,l,t.value,e,n,r,i)},t.treemapDice=Jf,t.treemapResquarify=hh,t.treemapSlice=lh,t.treemapSliceDice=function(t,e,n,r,i){(1&t.depth?lh:Jf)(t,e,n,r,i)},t.treemapSquarify=fh,t.tsv=io,t.tsvFormat=$a,t.tsvFormatBody=Ga,t.tsvFormatRow=Xa,t.tsvFormatRows=Va,t.tsvFormatValue=Ja,t.tsvParse=Fa,t.tsvParseRows=Wa,t.utcDay=qd,t.utcDays=Fd,t.utcFriday=Zd,t.utcFridays=ip,t.utcHour=Hd,t.utcHours=Ud,t.utcMillisecond=ld,t.utcMilliseconds=ud,t.utcMinute=jd,t.utcMinutes=Yd,t.utcMonday=Gd,t.utcMondays=tp,t.utcMonth=op,t.utcMonths=sp,t.utcSaturday=Kd,t.utcSaturdays=ap,t.utcSecond=hd,t.utcSeconds=dd,t.utcSunday=$d,t.utcSundays=Qd,t.utcThursday=Jd,t.utcThursdays=rp,t.utcTuesday=Vd,t.utcTuesdays=ep,t.utcWednesday=Xd,t.utcWednesdays=np,t.utcWeek=$d,t.utcWeeks=Qd,t.utcYear=lp,t.utcYears=up,t.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},t.variance=l,t.version="5.16.0",t.voronoi=function(){var t=ix,e=ax,n=null;function r(r){return new Yx(r.map(function(n,i){var a=[Math.round(t(n,i,r)/Dx)*Dx,Math.round(e(n,i,r)/Dx)*Dx];return a.index=i,a.data=n,a}),n)}return r.polygons=function(t){return r(t).polygons()},r.links=function(t){return r(t).links()},r.triangles=function(t){return r(t).triangles()},r.x=function(e){return arguments.length?(t="function"==typeof e?e:rx(+e),r):t},r.y=function(t){return arguments.length?(e="function"==typeof t?t:rx(+t),r):e},r.extent=function(t){return arguments.length?(n=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],r):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},r.size=function(t){return arguments.length?(n=null==t?null:[[0,0],[+t[0],+t[1]]],r):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},r},t.window=st,t.xml=so,t.zip=function(){return E(arguments)},t.zoom=function(){var e,n,r=Vx,i=Xx,a=Qx,o=Zx,s=Kx,l=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],c=250,f=jn,h=U("start","zoom","end"),d=500,p=150,g=0;function y(t){t.property("__zoom",Jx).on("wheel.zoom",k).on("mousedown.zoom",M).on("dblclick.zoom",A).filter(s).on("touchstart.zoom",T).on("touchmove.zoom",C).on("touchend.zoom touchcancel.zoom",E).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(t,e){return(e=Math.max(l[0],Math.min(l[1],e)))===t.k?t:new qx(e,t.x,t.y)}function m(t,e,n){var r=e[0]-n[0]*t.k,i=e[1]-n[1]*t.k;return r===t.x&&i===t.y?t:new qx(t.k,r,i)}function x(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function b(t,e,n){t.on("start.zoom",function(){_(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){_(this,arguments).end()}).tween("zoom",function(){var t=this,r=arguments,a=_(t,r),o=i.apply(t,r),s=null==n?x(o):"function"==typeof n?n.apply(t,r):n,l=Math.max(o[1][0]-o[0][0],o[1][1]-o[0][1]),u=t.__zoom,c="function"==typeof e?e.apply(t,r):e,h=f(u.invert(s).concat(l/u.k),c.invert(s).concat(l/c.k));return function(t){if(1===t)t=c;else{var e=h(t),n=l/e[2];t=new qx(n,s[0]-e[0]*n,s[1]-e[1]*n)}a.zoom(null,t)}})}function _(t,e,n){return!n&&t.__zooming||new w(t,e)}function w(t,e){this.that=t,this.args=e,this.active=0,this.extent=i.apply(t,e),this.taps=0}function k(){if(r.apply(this,arguments)){var t=_(this,arguments),e=this.__zoom,n=Math.max(l[0],Math.min(l[1],e.k*Math.pow(2,o.apply(this,arguments)))),i=Bt(this);if(t.wheel)t.mouse[0][0]===i[0]&&t.mouse[0][1]===i[1]||(t.mouse[1]=e.invert(t.mouse[0]=i)),clearTimeout(t.wheel);else{if(e.k===n)return;t.mouse=[i,e.invert(i)],Er(this),t.start()}Gx(),t.wheel=setTimeout(function(){t.wheel=null,t.end()},p),t.zoom("mouse",a(m(v(e,n),t.mouse[0],t.mouse[1]),t.extent,u))}}function M(){if(!n&&r.apply(this,arguments)){var e=_(this,arguments,!0),i=Pt(t.event.view).on("mousemove.zoom",function(){if(Gx(),!e.moved){var n=t.event.clientX-s,r=t.event.clientY-l;e.moved=n*n+r*r>g}e.zoom("mouse",a(m(e.that.__zoom,e.mouse[0]=Bt(e.that),e.mouse[1]),e.extent,u))},!0).on("mouseup.zoom",function(){i.on("mousemove.zoom mouseup.zoom",null),qt(t.event.view,e.moved),Gx(),e.end()},!0),o=Bt(this),s=t.event.clientX,l=t.event.clientY;Ut(t.event.view),$x(),e.mouse=[o,this.__zoom.invert(o)],Er(this),e.start()}}function A(){if(r.apply(this,arguments)){var e=this.__zoom,n=Bt(this),o=e.invert(n),s=e.k*(t.event.shiftKey?.5:2),l=a(m(v(e,s),n,o),i.apply(this,arguments),u);Gx(),c>0?Pt(this).transition().duration(c).call(b,l,n):Pt(this).call(y.transform,l)}}function T(){if(r.apply(this,arguments)){var n,i,a,o,s=t.event.touches,l=s.length,u=_(this,arguments,t.event.changedTouches.length===l);for($x(),i=0;i<l;++i)o=[o=jt(this,s,(a=s[i]).identifier),this.__zoom.invert(o),a.identifier],u.touch0?u.touch1||u.touch0[2]===o[2]||(u.touch1=o,u.taps=0):(u.touch0=o,n=!0,u.taps=1+!!e);e&&(e=clearTimeout(e)),n&&(u.taps<2&&(e=setTimeout(function(){e=null},d)),Er(this),u.start())}}function C(){if(this.__zooming){var n,r,i,o,s=_(this,arguments),l=t.event.changedTouches,c=l.length;for(Gx(),e&&(e=clearTimeout(e)),s.taps=0,n=0;n<c;++n)i=jt(this,l,(r=l[n]).identifier),s.touch0&&s.touch0[2]===r.identifier?s.touch0[0]=i:s.touch1&&s.touch1[2]===r.identifier&&(s.touch1[0]=i);if(r=s.that.__zoom,s.touch1){var f=s.touch0[0],h=s.touch0[1],d=s.touch1[0],p=s.touch1[1],g=(g=d[0]-f[0])*g+(g=d[1]-f[1])*g,y=(y=p[0]-h[0])*y+(y=p[1]-h[1])*y;r=v(r,Math.sqrt(g/y)),i=[(f[0]+d[0])/2,(f[1]+d[1])/2],o=[(h[0]+p[0])/2,(h[1]+p[1])/2]}else{if(!s.touch0)return;i=s.touch0[0],o=s.touch0[1]}s.zoom("touch",a(m(r,i,o),s.extent,u))}}function E(){if(this.__zooming){var e,r,i=_(this,arguments),a=t.event.changedTouches,o=a.length;for($x(),n&&clearTimeout(n),n=setTimeout(function(){n=null},d),e=0;e<o;++e)r=a[e],i.touch0&&i.touch0[2]===r.identifier?delete i.touch0:i.touch1&&i.touch1[2]===r.identifier&&delete i.touch1;if(i.touch1&&!i.touch0&&(i.touch0=i.touch1,delete i.touch1),i.touch0)i.touch0[1]=this.__zoom.invert(i.touch0[0]);else if(i.end(),2===i.taps){var s=Pt(this).on("dblclick.zoom");s&&s.apply(this,arguments)}}}return y.transform=function(t,e,n){var r=t.selection?t.selection():t;r.property("__zoom",Jx),t!==r?b(t,e,n):r.interrupt().each(function(){_(this,arguments).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()})},y.scaleBy=function(t,e,n){y.scaleTo(t,function(){return this.__zoom.k*("function"==typeof e?e.apply(this,arguments):e)},n)},y.scaleTo=function(t,e,n){y.transform(t,function(){var t=i.apply(this,arguments),r=this.__zoom,o=null==n?x(t):"function"==typeof n?n.apply(this,arguments):n,s=r.invert(o),l="function"==typeof e?e.apply(this,arguments):e;return a(m(v(r,l),o,s),t,u)},n)},y.translateBy=function(t,e,n){y.transform(t,function(){return a(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),i.apply(this,arguments),u)})},y.translateTo=function(t,e,n,r){y.transform(t,function(){var t=i.apply(this,arguments),o=this.__zoom,s=null==r?x(t):"function"==typeof r?r.apply(this,arguments):r;return a(Fx.translate(s[0],s[1]).scale(o.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof n?-n.apply(this,arguments):-n),t,u)},r)},w.prototype={start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){Ct(new Ux(y,t,this.that.__zoom),h.apply,h,[t,this.that,this.args])}},y.wheelDelta=function(t){return arguments.length?(o="function"==typeof t?t:Hx(+t),y):o},y.filter=function(t){return arguments.length?(r="function"==typeof t?t:Hx(!!t),y):r},y.touchable=function(t){return arguments.length?(s="function"==typeof t?t:Hx(!!t),y):s},y.extent=function(t){return arguments.length?(i="function"==typeof t?t:Hx([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),y):i},y.scaleExtent=function(t){return arguments.length?(l[0]=+t[0],l[1]=+t[1],y):[l[0],l[1]]},y.translateExtent=function(t){return arguments.length?(u[0][0]=+t[0][0],u[1][0]=+t[1][0],u[0][1]=+t[0][1],u[1][1]=+t[1][1],y):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},y.constrain=function(t){return arguments.length?(a=t,y):a},y.duration=function(t){return arguments.length?(c=+t,y):c},y.interpolate=function(t){return arguments.length?(f=t,y):f},y.on=function(){var t=h.on.apply(h,arguments);return t===h?y:t},y.clickDistance=function(t){return arguments.length?(g=(t=+t)*t,y):Math.sqrt(g)},y},t.zoomIdentity=Fx,t.zoomTransform=Wx,Object.defineProperty(t,"__esModule",{value:!0})}),function(t,e){t.Papa=function(){"use strict";function t(t){this._handle=null,this._paused=!1,this._finished=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(t){var e=c(t);e.chunkSize=parseInt(e.chunkSize),t.step||t.chunk||(e.chunkSize=null),this._handle=new a(e),this._handle.streamer=this,this._config=e}.call(this,t),this.parseChunk=function(t){if(this.isFirstChunk&&h(this._config.beforeFirstChunk)){var e=this._config.beforeFirstChunk(t);void 0!==e&&(t=e)}this.isFirstChunk=!1;var n=this._partialLine+t;this._partialLine="";var r=this._handle.parse(n,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var i=r.meta.cursor;this._finished||(this._partialLine=n.substring(i-this._baseIndex),this._baseIndex=i),r&&r.data&&(this._rowCount+=r.data.length);var a=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(y)p.postMessage({results:r,workerId:b.WORKER_ID,finished:a});else if(h(this._config.chunk)){if(this._config.chunk(r,this._handle),this._paused)return;r=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(r.data),this._completeResults.errors=this._completeResults.errors.concat(r.errors),this._completeResults.meta=r.meta),!a||!h(this._config.complete)||r&&r.meta.aborted||this._config.complete(this._completeResults,this._input),a||r&&r.meta.paused||this._nextChunk(),r}},this._sendError=function(t){h(this._config.error)?this._config.error(t):y&&this._config.error&&p.postMessage({workerId:b.WORKER_ID,error:t,finished:!1})}}function e(e){var n;(e=e||{}).chunkSize||(e.chunkSize=b.RemoteChunkSize),t.call(this,e),this._nextChunk=g?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(t){this._input=t,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(n=new XMLHttpRequest,this._config.withCredentials&&(n.withCredentials=this._config.withCredentials),g||(n.onload=f(this._chunkLoaded,this),n.onerror=f(this._chunkError,this)),n.open("GET",this._input,!g),this._config.chunkSize){var t=this._start+this._config.chunkSize-1;n.setRequestHeader("Range","bytes="+this._start+"-"+t),n.setRequestHeader("If-None-Match","webkit-no-cache")}try{n.send()}catch(t){this._chunkError(t.message)}g&&0===n.status?this._chunkError():this._start+=this._config.chunkSize}},this._chunkLoaded=function(){if(4==n.readyState){if(n.status<200||n.status>=400)return void this._chunkError();this._finished=!this._config.chunkSize||this._start>function(t){var e=t.getResponseHeader("Content-Range");return null===e?-1:parseInt(e.substr(e.lastIndexOf("/")+1))}(n),this.parseChunk(n.responseText)}},this._chunkError=function(t){var e=n.statusText||t;this._sendError(e)}}function n(e){(e=e||{}).chunkSize||(e.chunkSize=b.LocalChunkSize),t.call(this,e);var n,r,i="undefined"!=typeof FileReader;this.stream=function(t){this._input=t,r=t.slice||t.webkitSlice||t.mozSlice,i?((n=new FileReader).onload=f(this._chunkLoaded,this),n.onerror=f(this._chunkError,this)):n=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var t=this._input;if(this._config.chunkSize){var e=Math.min(this._start+this._config.chunkSize,this._input.size);t=r.call(t,this._start,e)}var a=n.readAsText(t,this._config.encoding);i||this._chunkLoaded({target:{result:a}})},this._chunkLoaded=function(t){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(t.target.result)},this._chunkError=function(){this._sendError(n.error)}}function r(e){var n;e=e||{},t.call(this,e),this.stream=function(t){return t,n=t,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var t=this._config.chunkSize,e=t?n.substr(0,t):n;return n=t?n.substr(t):"",this._finished=!n,this.parseChunk(e)}}}function i(e){e=e||{},t.call(this,e);var n=[],r=!0;this.stream=function(t){this._input=t,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._nextChunk=function(){n.length?this.parseChunk(n.shift()):r=!0},this._streamData=f(function(t){try{n.push("string"==typeof t?t:t.toString(this._config.encoding)),r&&(r=!1,this.parseChunk(n.shift()))}catch(t){this._streamError(t)}},this),this._streamError=f(function(t){this._streamCleanUp(),this._sendError(t.message)},this),this._streamEnd=f(function(){this._streamCleanUp(),this._finished=!0,this._streamData("")},this),this._streamCleanUp=f(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function a(t){function e(){if(v&&l&&(i("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+b.DefaultDelimiter+"'"),l=!1),t.skipEmptyLines)for(var e=0;e<v.data.length;e++)1===v.data[e].length&&""===v.data[e][0]&&v.data.splice(e--,1);return n()&&function(){if(v){for(var t=0;n()&&t<v.data.length;t++)for(var e=0;e<v.data[t].length;e++)y.push(v.data[t][e]);v.data.splice(0,1)}}(),function(){if(!v||!t.header&&!t.dynamicTyping)return v;for(var e=0;e<v.data.length;e++){for(var n=t.header?{}:[],a=0;a<v.data[e].length;a++){var o=a,s=v.data[e][a];t.header&&(o=a>=y.length?"__parsed_extra":y[a]),s=r(o,s),"__parsed_extra"===o?(n[o]=n[o]||[],n[o].push(s)):n[o]=s}v.data[e]=n,t.header&&(a>y.length?i("FieldMismatch","TooManyFields","Too many fields: expected "+y.length+" fields but parsed "+a,e):a<y.length&&i("FieldMismatch","TooFewFields","Too few fields: expected "+y.length+" fields but parsed "+a,e))}return t.header&&v.meta&&(v.meta.fields=y),v}()}function n(){return t.header&&0===y.length}function r(e,n){return!0===(t.dynamicTyping[e]||t.dynamicTyping)?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&function(t){return u.test(t)?parseFloat(t):t}(n):n}function i(t,e,n,r){v.errors.push({type:t,code:e,message:n,row:r})}var a,s,l,u=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,f=this,d=0,p=!1,g=!1,y=[],v={data:[],errors:[],meta:{}};if(h(t.step)){var m=t.step;t.step=function(r){if(v=r,n())e();else{if(e(),0===v.data.length)return;d+=r.data.length,t.preview&&d>t.preview?s.abort():m(v,f)}}}this.parse=function(n,r,i){if(t.newline||(t.newline=function(t){var e=(t=t.substr(0,1048576)).split("\r"),n=t.split("\n"),r=n.length>1&&n[0].length<e[0].length;if(1===e.length||r)return"\n";for(var i=0,a=0;a<e.length;a++)"\n"===e[a][0]&&i++;return i>=e.length/2?"\r\n":"\r"}(n)),l=!1,t.delimiter)"function"==typeof t.delimiter&&(t.delimiter=t.delimiter(n),v.meta.delimiter=t.delimiter);else{var u=function(e,n){for(var r,i,a,s=[",","\t","|",";",b.RECORD_SEP,b.UNIT_SEP],l=0;l<s.length;l++){var u=s[l],c=0,f=0;a=void 0;for(var h=new o({delimiter:u,newline:n,preview:10}).parse(e),d=0;d<h.data.length;d++){var p=h.data[d].length;f+=p,void 0!==a?p>1&&(c+=Math.abs(p-a),a=p):a=p}h.data.length>0&&(f/=h.data.length),(void 0===i||c<i)&&f>1.99&&(i=c,r=u)}return t.delimiter=r,{successful:!!r,bestDelimiter:r}}(n,t.newline);u.successful?t.delimiter=u.bestDelimiter:(l=!0,t.delimiter=b.DefaultDelimiter),v.meta.delimiter=t.delimiter}var f=c(t);return t.preview&&t.header&&f.preview++,a=n,s=new o(f),v=s.parse(a,r,i),e(),p?{meta:{paused:!0}}:v||{meta:{paused:!1}}},this.paused=function(){return p},this.pause=function(){p=!0,s.abort(),a=a.substr(s.getCharIndex())},this.resume=function(){p=!1,f.streamer.parseChunk(a)},this.aborted=function(){return g},this.abort=function(){g=!0,s.abort(),v.meta.aborted=!0,h(t.complete)&&t.complete(v),a=""}}function o(t){var e=(t=t||{}).delimiter,n=t.newline,r=t.comments,i=t.step,a=t.preview,o=t.fastMode,s=t.quoteChar||'"';if(("string"!=typeof e||b.BAD_DELIMITERS.indexOf(e)>-1)&&(e=","),r===e)throw"Comment character same as delimiter";!0===r?r="#":("string"!=typeof r||b.BAD_DELIMITERS.indexOf(r)>-1)&&(r=!1),"\n"!=n&&"\r"!=n&&"\r\n"!=n&&(n="\n");var l=0,u=!1;this.parse=function(t,c,f){function h(t){w.push(t),A=l}function d(e){return f?g():(void 0===e&&(e=t.substr(l)),M.push(e),l=v,h(M),_&&y(),g())}function p(e){l=e,h(M),M=[],N=t.indexOf(n,l)}function g(t){return{data:w,errors:k,meta:{delimiter:e,linebreak:n,aborted:u,truncated:!!t,cursor:A+(c||0)}}}function y(){i(g()),w=[],k=[]}if("string"!=typeof t)throw"Input must be a string";var v=t.length,m=e.length,x=n.length,b=r.length,_="function"==typeof i;l=0;var w=[],k=[],M=[],A=0;if(!t)return g();if(o||!1!==o&&-1===t.indexOf(s)){for(var T=t.split(n),C=0;C<T.length;C++){var M=T[C];if(l+=M.length,C!==T.length-1)l+=n.length;else if(f)return g();if(!r||M.substr(0,b)!==r){if(_){if(w=[],h(M.split(e)),y(),u)return g()}else h(M.split(e));if(a&&C>=a)return w=w.slice(0,a),g(!0)}}return g()}for(var E=t.indexOf(e,l),N=t.indexOf(n,l),R=new RegExp(s+s,"g");;)if(t[l]!==s)if(r&&0===M.length&&t.substr(l,b)===r){if(-1===N)return g();l=N+x,N=t.indexOf(n,l),E=t.indexOf(e,l)}else if(-1!==E&&(E<N||-1===N))M.push(t.substring(l,E)),l=E+m,E=t.indexOf(e,l);else{if(-1===N)break;if(M.push(t.substring(l,N)),p(N+x),_&&(y(),u))return g();if(a&&w.length>=a)return g(!0)}else{var S=l;for(l++;;){var S=t.indexOf(s,S+1);if(-1===S)return f||k.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:w.length,index:l}),d();if(S===v-1){var P=t.substring(l,S).replace(R,s);return d(P)}if(t[S+1]!==s){if(t[S+1]===e){M.push(t.substring(l,S).replace(R,s)),l=S+1+m,E=t.indexOf(e,l),N=t.indexOf(n,l);break}if(t.substr(S+1,x)===n){if(M.push(t.substring(l,S).replace(R,s)),p(S+1+x),E=t.indexOf(e,l),_&&(y(),u))return g();if(a&&w.length>=a)return g(!0);break}}else S++}}return d()},this.abort=function(){u=!0},this.getCharIndex=function(){return l}}function s(t){var e=t.data,n=m[e.workerId],r=!1;if(e.error)n.userError(e.error,e.file);else if(e.results&&e.results.data){var i={abort:function(){r=!0,l(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:u,resume:u};if(h(n.userStep)){for(var a=0;a<e.results.data.length&&(n.userStep({data:[e.results.data[a]],errors:e.results.errors,meta:e.results.meta},i),!r);a++);delete e.results}else h(n.userChunk)&&(n.userChunk(e.results,i,e.file),delete e.results)}e.finished&&!r&&l(e.workerId,e.results)}function l(t,e){var n=m[t];h(n.userComplete)&&n.userComplete(e),n.terminate(),delete m[t]}function u(){throw"Not implemented."}function c(t){if("object"!=typeof t)return t;var e=t instanceof Array?[]:{};for(var n in t)e[n]=c(t[n]);return e}function f(t,e){return function(){t.apply(e,arguments)}}function h(t){return"function"==typeof t}var d,p="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==p?p:{},g=!p.document&&!!p.postMessage,y=g&&/(\?|&)papaworker(=|&|$)/.test(p.location.search),v=!1,m={},x=0,b={};if(b.parse=function(t,a){if((a=a||{}).dynamicTyping=a.dynamicTyping||!1,a.worker&&b.WORKERS_SUPPORTED){var o=function(){if(!b.WORKERS_SUPPORTED)return!1;if(!v&&null===b.SCRIPT_PATH)throw new Error("Script path cannot be determined automatically when Papa Parse is loaded asynchronously. You need to set Papa.SCRIPT_PATH manually.");var t=b.SCRIPT_PATH||d;t+=(-1!==t.indexOf("?")?"&":"?")+"papaworker";var e=new p.Worker(t);return e.onmessage=s,e.id=x++,m[e.id]=e,e}();return o.userStep=a.step,o.userChunk=a.chunk,o.userComplete=a.complete,o.userError=a.error,a.step=h(a.step),a.chunk=h(a.chunk),a.complete=h(a.complete),a.error=h(a.error),delete a.worker,void o.postMessage({input:t,config:a,workerId:o.id})}var l=null;return"string"==typeof t?l=a.download?new e(a):new r(a):!0===t.readable&&"function"==typeof t.read&&"function"==typeof t.on?l=new i(a):(p.File&&t instanceof File||t instanceof Object)&&(l=new n(a)),l.stream(t)},b.unparse=function(t,e){function n(t){if("object"!=typeof t)return[];var e=[];for(var n in t)e.push(n);return e}function r(t,e){var n="";"string"==typeof t&&(t=JSON.parse(t)),"string"==typeof e&&(e=JSON.parse(e));var r=t instanceof Array&&t.length>0,a=!(e[0]instanceof Array);if(r&&o){for(var u=0;u<t.length;u++)u>0&&(n+=s),n+=i(t[u],u);e.length>0&&(n+=l)}for(var c=0;c<e.length;c++){for(var f=r?t.length:e[c].length,h=0;h<f;h++){h>0&&(n+=s);var d=r&&a?t[h]:h;n+=i(e[c][d],h)}c<e.length-1&&(n+=l)}return n}function i(t,e){if(null==t)return"";t=t.toString().replace(c,u+u);var n="boolean"==typeof a&&a||a instanceof Array&&a[e]||function(t,e){for(var n=0;n<e.length;n++)if(t.indexOf(e[n])>-1)return!0;return!1}(t,b.BAD_DELIMITERS)||t.indexOf(s)>-1||" "===t.charAt(0)||" "===t.charAt(t.length-1);return n?u+t+u:t}var a=!1,o=!0,s=",",l="\r\n",u='"';"object"==typeof e&&("string"==typeof e.delimiter&&1===e.delimiter.length&&-1===b.BAD_DELIMITERS.indexOf(e.delimiter)&&(s=e.delimiter),("boolean"==typeof e.quotes||e.quotes instanceof Array)&&(a=e.quotes),"string"==typeof e.newline&&(l=e.newline),"string"==typeof e.quoteChar&&(u=e.quoteChar),"boolean"==typeof e.header&&(o=e.header));var c=new RegExp(u,"g");if("string"==typeof t&&(t=JSON.parse(t)),t instanceof Array){if(!t.length||t[0]instanceof Array)return r(null,t);if("object"==typeof t[0])return r(n(t[0]),t)}else if("object"==typeof t)return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),t.data instanceof Array&&(t.fields||(t.fields=t.meta&&t.meta.fields),t.fields||(t.fields=t.data[0]instanceof Array?t.fields:n(t.data[0])),t.data[0]instanceof Array||"object"==typeof t.data[0]||(t.data=[t.data])),r(t.fields||[],t.data||[]);throw"exception: Unable to serialize unrecognized input"},b.RECORD_SEP=String.fromCharCode(30),b.UNIT_SEP=String.fromCharCode(31),b.BYTE_ORDER_MARK="\ufeff",b.BAD_DELIMITERS=["\r","\n",'"',b.BYTE_ORDER_MARK],b.WORKERS_SUPPORTED=!g&&!!p.Worker,b.SCRIPT_PATH=null,b.LocalChunkSize=10485760,b.RemoteChunkSize=5242880,b.DefaultDelimiter=",",b.Parser=o,b.ParserHandle=a,b.NetworkStreamer=e,b.FileStreamer=n,b.StringStreamer=r,b.ReadableStreamStreamer=i,p.jQuery){var _=p.jQuery;_.fn.parse=function(t){function e(){if(0!==i.length){var e=i[0];if(h(t.before)){var r=t.before(e.file,e.inputElem);if("object"==typeof r){if("abort"===r.action)return void function(e,n,r,i){h(t.error)&&t.error({name:e},n,r,i)}("AbortError",e.file,e.inputElem,r.reason);if("skip"===r.action)return void n();"object"==typeof r.config&&(e.instanceConfig=_.extend(e.instanceConfig,r.config))}else if("skip"===r)return void n()}var a=e.instanceConfig.complete;e.instanceConfig.complete=function(t){h(a)&&a(t,e.file,e.inputElem),n()},b.parse(e.file,e.instanceConfig)}else h(t.complete)&&t.complete()}function n(){i.splice(0,1),e()}var r=t.config||{},i=[];return this.each(function(t){var e="INPUT"===_(this).prop("tagName").toUpperCase()&&"file"===_(this).attr("type").toLowerCase()&&p.FileReader;if(!e||!this.files||0===this.files.length)return!0;for(var n=0;n<this.files.length;n++)i.push({file:this.files[n],inputElem:this,instanceConfig:_.extend({},r)})}),e(),this}}return y?p.onmessage=function(t){var e=t.data;if(void 0===b.WORKER_ID&&e&&(b.WORKER_ID=e.workerId),"string"==typeof e.input)p.postMessage({workerId:b.WORKER_ID,results:b.parse(e.input,e.config),finished:!0});else if(p.File&&e.input instanceof File||e.input instanceof Object){var n=b.parse(e.input,e.config);n&&p.postMessage({workerId:b.WORKER_ID,results:n,finished:!0})}}:b.WORKERS_SUPPORTED&&(d=function(){var t=document.getElementsByTagName("script");return t.length?t[t.length-1].src:""}(),document.body?document.addEventListener("DOMContentLoaded",function(){v=!0},!0):v=!0),e.prototype=Object.create(t.prototype),e.prototype.constructor=e,n.prototype=Object.create(t.prototype),n.prototype.constructor=n,r.prototype=Object.create(r.prototype),r.prototype.constructor=r,i.prototype=Object.create(t.prototype),i.prototype.constructor=i,b}()}(this),function(t){var e={},n={};e.render=function(t,e){var n,r={};if("object"==typeof t)return"rgb"===e&&(n=["R","G","B","RGB"]),"hsv"===e&&(n=["H","S","V","HSV"]),"hsl"===e&&(n=["H","S","L","HSL"]),r[n[0]]=t[0],r[n[1]]=t[1],r[n[2]]=t[2],r[n[3]]=t[0]+" "+t[1]+" "+t[2],r.a=t,r},e.paddedHex=function(t){return 1===(t=(10>t?"0":"")+t.toString(16)).length?"0"+t:t},Number.prototype.round=function(t){return parseFloat(this.toFixed(t||10))},n.rgb2hex=function(t,n,r){return"#"+(t=e.paddedHex(t))+(n=void 0!==n?e.paddedHex(n):t)+(r=void 0!==r?e.paddedHex(r):t)},n.hex2rgb=function(t){return 6===(t=t.replace("#","")).length?e.render([parseInt(t.substr(0,2),16),parseInt(t.substr(2,2),16),parseInt(t.substr(4,2),16)],"rgb"):parseInt(t,16)},n.hex2hsv=function(t){t="#"==t.charAt(0)?t.substring(1,7):t;var n=parseInt(t.substring(0,2),16)/255,r=parseInt(t.substring(2,4),16)/255;t=parseInt(t.substring(4,6),16)/255;var i,a,o=0,s=0,l=(s=Math.min(n,r,t),Math.max(n,r,t)),u=l-s,c=l;return 0===u?s=o=0:(s=u/l,i=((l-n)/6+u/2)/u,a=((l-r)/6+u/2)/u,u=((l-t)/6+u/2)/u,n==l?o=u-a:r==l?o=1/3+i-u:t==l&&(o=2/3+a-i),0>o&&(o+=1),1<o&&(o-=1)),e.render([Math.round(360*o),Math.round(100*s),Math.round(100*c)],"hsv")},n.hsv2rgb=function(t,n,r){var i,a,o,s=[];switch("object"==typeof t?(i=t[0],n=t[1],t=t[2]):(i=t,t=r),n/=100,t/=100,a=i/60-(r=Math.floor(i/60%6)),i=t*(1-n),o=t*(1-a*n),n=t*(1-(1-a)*n),r){case 0:s=[t,n,i];break;case 1:s=[o,t,i];break;case 2:s=[i,t,n];break;case 3:s=[i,o,t];break;case 4:s=[n,i,t];break;case 5:s=[t,i,o]}return e.render([Math.min(255,Math.floor(256*s[0])),Math.min(255,Math.floor(256*s[1])),Math.min(255,Math.floor(256*s[2]))],"rgb")},n.rgb2hsl=function(t,n,r){var i,a,o,s,l;if("object"==typeof t?(i=t[0],n=t[1],t=t[2]):(i=t,t=r),i/=255,n/=255,t/=255,s=((r=Math.max(i,n,t))+(a=Math.min(i,n,t)))/2,r==a)o=a=0;else{switch(l=r-a,a=.5<s?l/(2-r-a):l/(r+a),r){case i:o=(n-t)/l+(n<t?6:0);break;case n:o=(t-i)/l+2;break;case t:o=(i-n)/l+4}o/=6}return e.render([Math.floor(360*o),(100*a).round(1),(100*s).round(1)],"hsl")},n.hsv2hsl=function(t,n,r){var i,a,o,s,l,u;return"object"==typeof t?(i=t[0],a=t[1],o=t[2]):(i=t,a=n,o=r),i=(o=this.hsv2rgb(i,a,o)).R/255,a=o.G/255,s=o.B/255,o=((l=Math.max(i,a,s))+(u=Math.min(i,a,s)))/2,l!=u&&(n=.5>o?(l-u)/(l+u):(l-u)/(2-l-u),t=i==l?(a-s)/(l-u):a==l?2+(s-i)/(l-u):4+(i-a)/(l-u)),e.render([Math.floor(t),Math.floor(n),Math.floor(r)],"hsl")},n.name2hex=function(t){return void 0===(t={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}[t=t.toLowerCase()])?"Invalid Color Name":t},n.name2rgb=function(t){return t=this.name2hex(t),/^[a-fA-F0-9#]{7}$/.test(t)?this.hex2rgb(t):e.render(["Invalid Color Name","Invalid Color Name","Invalid Color Name"],"rgb")},n.name2hsv=function(t){return t=this.name2hex(t),/^[a-fA-F0-9#]{7}$/.test(t)?this.hex2hsv(t):e.render(["Invalid Color Name","Invalid Color Name","Invalid Color Name"],"hsv")},n.complement=function(t,n,r){var i;return"string"==typeof t&&/(#([A-Fa-f0-9]){3}(([A-Fa-f0-9]){3})?)/.test(t)?(n="#",6===(t=t.replace("#","")).length&&(n+=e.paddedHex(255-this.hex2rgb(t.substr(0,2))),n+=e.paddedHex(255-this.hex2rgb(t.substr(2,2))),n+=e.paddedHex(255-this.hex2rgb(t.substr(4,2)))),3===t.length&&(n+=e.paddedHex(255-this.hex2rgb(t.substr(0,1)+t.substr(0,1))),n+=e.paddedHex(255-this.hex2rgb(t.substr(1,1)+t.substr(1,1))),n+=e.paddedHex(255-this.hex2rgb(t.substr(2,1)+t.substr(2,1)))),n):(void 0!==t&&void 0!==n&&void 0!==r&&(i=[255-t,255-n,255-r]),"object"==typeof t&&(i=[255-t[0],255-t[1],255-t[2]]),e.render(i,"rgb"))},n.rand=function(t){var n,r;if("hex"===t||void 0===t){for(t="",r=0;6>r;r++)n=Math.floor(16*Math.random()),t+="0123456789abcdef".substring(n,n+1);return"#"+t}if("rgb"==t)return t=Math.floor(-254*Math.random()+255),n=Math.floor(-254*Math.random()+255),r=Math.floor(-254*Math.random()+255),e.render([t,n,r],"rgb")},t.Colors=t.$c=n}(window),function(t){if(define=void 0,module=void 0,exports=void 0,"object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;(e=(e=(e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).d3||(e.d3={})).layout||(e.layout={})).cloud=t()}}(function(){return function t(e,n,r){function i(o,s){if(!n[o]){if(!e[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[o]={exports:{}};e[o][0].call(c.exports,function(t){return i(e[o][1][t]||t)},c,c.exports,t,e,n,r)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(t,e,n){var r=t("d3-dispatch").dispatch,i=Math.PI/180,a=64,o=2048;function s(t){return t.text}function l(){return"serif"}function u(){return"normal"}function c(t){return Math.sqrt(t.value)}function f(){return 30*(~~(6*Math.random())-3)}function h(){return 1}function d(t,e,n,r){if(!e.sprite){var s=t.context,l=t.ratio;s.clearRect(0,0,(a<<5)/l,o/l);var u=0,c=0,f=0,h=n.length;for(--r;++r<h;){e=n[r],s.save(),s.font=e.style+" "+e.weight+" "+~~((e.size+1)/l)+"px "+e.font;var d=s.measureText(e.text+"m").width*l,p=e.size<<1;if(e.rotate){var g=Math.sin(e.rotate*i),y=Math.cos(e.rotate*i),v=d*y,m=d*g,x=p*y,b=p*g;d=Math.max(Math.abs(v+b),Math.abs(v-b))+31>>5<<5,p=~~Math.max(Math.abs(m+x),Math.abs(m-x))}else d=d+31>>5<<5;if(p>f&&(f=p),u+d>=a<<5&&(u=0,c+=f,f=0),c+p>=o)break;s.translate((u+(d>>1))/l,(c+(p>>1))/l),e.rotate&&s.rotate(e.rotate*i),s.fillText(e.text,0,0),e.padding&&(s.lineWidth=2*e.padding,s.strokeText(e.text,0,0)),s.restore(),e.width=d,e.height=p,e.xoff=u,e.yoff=c,e.x1=d>>1,e.y1=p>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,u+=d}for(var _=s.getImageData(0,0,(a<<5)/l,o/l).data,w=[];--r>=0;)if((e=n[r]).hasText){for(var k=(d=e.width)>>5,M=(p=e.y1-e.y0,0);M<p*k;M++)w[M]=0;if(null==(u=e.xoff))return;c=e.yoff;for(var A=0,T=-1,C=0;C<p;C++){for(M=0;M<d;M++){var E=k*C+(M>>5),N=_[(c+C)*(a<<5)+(u+M)<<2]?1<<31-M%32:0;w[E]|=N,A|=N}A?T=C:(e.y0++,p--,C--,c++)}e.y1=e.y0+T,e.sprite=w.slice(0,(e.y1-e.y0)*k)}}}function p(t,e,n){n>>=5;for(var r,i=t.sprite,a=t.width>>5,o=t.x-(a<<4),s=127&o,l=32-s,u=t.y1-t.y0,c=(t.y+t.y0)*n+(o>>5),f=0;f<u;f++){r=0;for(var h=0;h<=a;h++)if((r<<l|(h<a?(r=i[f*a+h])>>>s:0))&e[c+h])return!0;c+=n}return!1}function g(t,e){var n=t[0],r=t[1];e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>r.x&&(r.x=e.x+e.x1),e.y+e.y1>r.y&&(r.y=e.y+e.y1)}function y(t){var e=t[0]/t[1];return function(t){return[e*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function v(){return document.createElement("canvas")}function m(t){return"function"==typeof t?t:function(){return t}}e.exports=function(){var t=[256,256],e=s,n=l,i=c,b=u,_=u,w=f,k=h,M=y,A=[],T=1/0,C=r("word","end"),E=null,N=Math.random,R={},S=v;function P(e,n,r){t[0],t[1];for(var i,a,o,s,l,u=n.x,c=n.y,f=Math.sqrt(t[0]*t[0]+t[1]*t[1]),h=M(t),d=N()<.5?1:-1,g=-d;(i=h(g+=d))&&(a=~~i[0],o=~~i[1],!(Math.min(Math.abs(a),Math.abs(o))>=f));)if(n.x=u+a,n.y=c+o,!(n.x+n.x0<0||n.y+n.y0<0||n.x+n.x1>t[0]||n.y+n.y1>t[1]||r&&p(n,e,t[0])||r&&(l=r,!((s=n).x+s.x1>l[0].x&&s.x+s.x0<l[1].x&&s.y+s.y1>l[0].y&&s.y+s.y0<l[1].y)))){for(var y,v=n.sprite,m=n.width>>5,x=t[0]>>5,b=n.x-(m<<4),_=127&b,w=32-_,k=n.y1-n.y0,A=(n.y+n.y0)*x+(b>>5),T=0;T<k;T++){y=0;for(var C=0;C<=m;C++)e[A+C]|=y<<w|(C<m?(y=v[T*m+C])>>>_:0);A+=x}return delete n.sprite,!0}return!1}return R.canvas=function(t){return arguments.length?(S=m(t),R):S},R.start=function(){var r=function(t){t.width=t.height=1;var e=Math.sqrt(t.getContext("2d").getImageData(0,0,1,1).data.length>>2);t.width=(a<<5)/e,t.height=o/e;var n=t.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:e}}(S()),s=function(t){for(var e=[],n=-1;++n<t;)e[n]=0;return e}((t[0]>>5)*t[1]),l=null,u=A.length,c=-1,f=[],h=A.map(function(t,r){return t.text=e.call(this,t,r),t.font=n.call(this,t,r),t.style=b.call(this,t,r),t.weight=_.call(this,t,r),t.rotate=w.call(this,t,r),t.size=~~i.call(this,t,r),t.padding=k.call(this,t,r),t}).sort(function(t,e){return e.size-t.size});return E&&clearInterval(E),E=setInterval(p,0),p(),R;function p(){for(var e=Date.now();Date.now()-e<T&&++c<u&&E;){var n=h[c];n.x=t[0]*(N()+.5)>>1,n.y=t[1]*(N()+.5)>>1,d(r,n,h,c),n.hasText&&P(s,n,l)&&(f.push(n),C.word(n),l?g(l,n):l=[{x:n.x+n.x0,y:n.y+n.y0},{x:n.x+n.x1,y:n.y+n.y1}],n.x-=t[0]>>1,n.y-=t[1]>>1)}c>=u&&(R.stop(),C.end(f,l))}},R.stop=function(){return E&&(clearInterval(E),E=null),R},R.timeInterval=function(t){return arguments.length?(T=null==t?1/0:t,R):T},R.words=function(t){return arguments.length?(A=t,R):A},R.size=function(e){return arguments.length?(t=[+e[0],+e[1]],R):t},R.font=function(t){return arguments.length?(n=m(t),R):n},R.fontStyle=function(t){return arguments.length?(b=m(t),R):b},R.fontWeight=function(t){return arguments.length?(_=m(t),R):_},R.rotate=function(t){return arguments.length?(w=m(t),R):w},R.text=function(t){return arguments.length?(e=m(t),R):e},R.spiral=function(t){return arguments.length?(M=x[t]||t,R):M},R.fontSize=function(t){return arguments.length?(i=m(t),R):i},R.padding=function(t){return arguments.length?(k=m(t),R):k},R.random=function(t){return arguments.length?(N=t,R):N},R.on=function(){var t=C.on.apply(C,arguments);return t===C?R:t},R};var x={archimedean:y,rectangular:function(t){var e=4*t[0]/t[1],n=0,r=0;return function(t){var i=t<0?-1:1;switch(Math.sqrt(1+4*i*t)-i&3){case 0:n+=e;break;case 1:r+=4;break;case 2:n-=e;break;default:r-=4}return[n,r]}}}},{"d3-dispatch":2}],2:[function(t,e,n){(function(t){"use strict";function e(t){var e,n=-1,r=t.length,i={},a={},o=this;for(o.on=function(t,e){if(t=function(t){var e=(t+="").indexOf("."),n=t;if(e>=0?t=t.slice(0,e):n+=".",t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}(t),arguments.length<2)return(e=a[t.name])&&e.value;if(t.type){var n=i[t.type],r=a[t.name];r&&(r.value=null,l=n.indexOf(r),i[t.type]=n=n.slice(0,l).concat(n.slice(l+1)),delete a[t.name]),e&&(e={value:e},a[t.name]=e,n.push(e))}else if(null==e)for(var s in i)if(e=a[s+t.name]){e.value=null;var l=(n=i[s]).indexOf(e);i[s]=n.slice(0,l).concat(n.slice(l+1)),delete a[e.name]}return o};++n<r;){if(!(e=t[n]+"")||e in o)throw new Error("illegal or duplicate type: "+e);i[e]=[],o[e]=s(e)}function s(t){return function(){for(var e,n=i[t],r=-1,a=n.length;++r<a;)(e=n[r].value)&&e.apply(this,arguments);return o}}}function n(){return new e(arguments)}n.prototype=e.prototype,t.dispatch=n})("object"==typeof n&&void 0!==e?n:this.dispatch={})},{}]},{},[1])(1)}),d3.functor=function(t){return"function"==typeof t?t:function(){return t}},d3.tip=function(t){var e=function(){return"n"},n=function(){return[0,0]},r=function(){return" "},i=f(),a=null,o=null,s=null;function l(t){var e;a="svg"===(e=(e=t).node()).tagName.toLowerCase()?e:e.ownerSVGElement,o=a.createSVGPoint(),document.body.appendChild(i);var n="."+d3.select(i).attr("class");$("body").append("<style> "+n+':after {box-sizing:border-box;display:inline;font-size:10px;width:100%;line-height:1;color:rgba(0,0,0,0.8);content: "▼";position:absolute;text-align:center;} </style>'),$("body").append("<style> "+n+".n:after {margin:-2px 0 0 0;top:100%;left:0;} </style>")}l.show=function(){var t=Array.prototype.slice.call(arguments);t[t.length-1]instanceof SVGElement&&(s=t.pop());var i,a=r.apply(this,t),o=n.apply(this,t),f=e.apply(this,t),d=h(),p=c.length,g=document.documentElement.scrollTop||document.body.scrollTop,y=document.documentElement.scrollLeft||document.body.scrollLeft;for(d.html(a).style("position","absolute").style("opacity",1).style("pointer-events","none").style("line-height","1").style("padding","6px").style("background","rgba(0, 0, 0, 0.8)").style("color","#fff").style("border-radius","4px").style("font-size","12px");p--;)d.classed(c[p],!1);return i=u[f].apply(this),d.classed(f,!0).style("top",i.top+o[0]+g+"px").style("left",i.left+o[1]+y+"px"),l},l.hide=function(){return h().style("opacity",0).style("pointer-events","none"),l},l.attr=function(t,e){if(arguments.length<2&&"string"==typeof t)return h().attr(t);var n=Array.prototype.slice.call(arguments);return d3.selection.prototype.attr.apply(h(),n),l},l.style=function(t,e){if(arguments.length<2&&"string"==typeof t)return h().style(t);var n=Array.prototype.slice.call(arguments);if(1===n.length){var r=n[0];Object.keys(r).forEach(function(t){return d3.selection.prototype.style.apply(h(),[t,r[t]])})}return l},l.direction=function(t){return arguments.length?(e=null==t?t:d3.functor(t),l):e},l.offset=function(t){return arguments.length?(n=null==t?t:d3.functor(t),l):n},l.html=function(t){return arguments.length?(r=null==t?t:d3.functor(t),l):r},l.destroy=function(){return i&&(h().remove(),i=null),l};var u={n:function(){var t=d();return{top:t.n.y-i.offsetHeight,left:t.n.x-i.offsetWidth/2}},s:function(){var t=d();return{top:t.s.y,left:t.s.x-i.offsetWidth/2}},e:function(){var t=d();return{top:t.e.y-i.offsetHeight/2,left:t.e.x}},w:function(){var t=d();return{top:t.w.y-i.offsetHeight/2,left:t.w.x-i.offsetWidth}},nw:function(){var t=d();return{top:t.nw.y-i.offsetHeight,left:t.nw.x-i.offsetWidth}},ne:function(){var t=d();return{top:t.ne.y-i.offsetHeight,left:t.ne.x}},sw:function(){var t=d();return{top:t.sw.y,left:t.sw.x-i.offsetWidth}},se:function(){var t=d();return{top:t.se.y,left:t.e.x}}},c=Object.keys(u);function f(){var t=d3.select(document.createElement("div"));return t.style("position","absolute").style("top","0px").style("opacity",0).style("pointer-events","none").style("box-sizing","border-box"),t.node()}function h(){return null===i&&(i=f(),document.body.appendChild(i)),d3.select(i)}function d(){for(var e=s||d3.event.target;void 0===e.getScreenCTM&&"undefined"===e.parentNode;)e=e.parentNode;if("map"==t){var n=d3.select(e).attr("id").split("-");e=d3.select("#"+n[0]+"-text-"+n[n.length-1]).node()}var r={},i=e.getScreenCTM(),a=e.getBBox(),l=a.width,u=a.height,c=a.x,f=a.y;return o.x=c,o.y=f,r.nw=o.matrixTransform(i),o.x+=l,r.ne=o.matrixTransform(i),o.y+=u,r.se=o.matrixTransform(i),o.x-=l,r.sw=o.matrixTransform(i),o.y-=u/2,r.w=o.matrixTransform(i),o.x+=l,r.e=o.matrixTransform(i),o.x-=l/2,o.y-=u/2,r.n=o.matrixTransform(i),o.y+=u,r.s=o.matrixTransform(i),r}return l},function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("d3-selection"),require("d3-transition")):"function"==typeof define&&define.amd?define(["d3-selection","d3-transition"],e):e(t.d3,t.d3)}(this,function(t,e){"use strict";t.selection.prototype.attrs=function(e){return("function"==typeof e?function(e,n){return e.each(function(){var e=n.apply(this,arguments),r=t.select(this);for(var i in e)r.attr(i,e[i])})}:function(t,e){for(var n in e)t.attr(n,e[n]);return t})(this,e)},t.selection.prototype.styles=function(e,n){return("function"==typeof e?function(e,n,r){return e.each(function(){var e=n.apply(this,arguments),i=t.select(this);for(var a in e)i.style(a,e[a],r)})}:function(t,e,n){for(var r in e)t.style(r,e[r],n);return t})(this,e,null==n?"":n)},t.selection.prototype.properties=function(e){return("function"==typeof e?function(e,n){return e.each(function(){var e=n.apply(this,arguments),r=t.select(this);for(var i in e)r.property(i,e[i])})}:function(t,e){for(var n in e)t.property(n,e[n]);return t})(this,e)},e.transition.prototype.attrs=function(e){return("function"==typeof e?function(e,n){return e.each(function(){var r=n.apply(this,arguments),i=t.select(this).transition(e);for(var a in r)i.attr(a,r[a])})}:function(t,e){for(var n in e)t.attr(n,e[n]);return t})(this,e)},e.transition.prototype.styles=function(e,n){return("function"==typeof e?function(e,n,r){return e.each(function(){var i=n.apply(this,arguments),a=t.select(this).transition(e);for(var o in i)a.style(o,i[o],r)})}:function(t,e,n){for(var r in e)t.style(r,e[r],n);return t})(this,e,null==n?"":n)}}),Number.prototype.format=function(){if(0==this)return 0;for(var t=/(^[+-]?\d+)(\d{3})/,e=this+"";t.test(e);)e=e.replace(t,"$1,$2");return e},String.prototype.format=function(){var t=parseFloat(this);return isNaN(t)?"0":t.format()},Number.prototype.isInteger=function(){return(0^this)==+this},function(){var t=function(){var t=this;this.init=function(e,n,r){if(this.element=e,t.element=e,this.options=n,t.options=n,this.config=r,t.config=r,n.width_old=null==n.width?"100%":n.width,n.height_old=null==n.height?"100%":n.height,n.width&&n.width.toString().indexOf("%")>0){var i=$(e.selector).width();i=0==(i=0==i?$(window).width():i)?$(window).attr("screen").width:i;var a=Number(n.width.replace("%",""));n.width=i*(a/100)}if(n.height&&n.height.toString().indexOf("%")>0){var o=$(e.selector).height();o=0==(o=0==o?$(window).height():o)?$(window).attr("screen").height:o;a=Number(n.height.replace("%",""));n.height=o*(a/100)}if(n.width=n.width?Number(n.width):$(e.selector).width(),n.height=n.height?Number(n.height):$(e.selector).height(),n.width=0==n.width?$(window).width():n.width,n.width=0==n.width?$(window).attr("screen").width:n.width,n.height=0==n.height?$(window).height():n.height,n.height=0==n.height?$(window).attr("screen").height:n.height,n.type!=r.CHART_TYPE_CLOUD&&(n.fontColor=n.fontColor?n.fontColor:"#343434"),n.dataCsv||n.dataRand||n.dataUrl);else if(n.data&&n.dataType)switch(n.dataType){case r.DATA_TYPE_JSON:n.data=n.data,n.dataCsv=null,n.dataRand=null;break;case r.DATA_TYPE_CSV:n.dataCsv=n.data,n.data=null,n.dataRand=null;break;case r.DATA_TYPE_RAND:n.dataRand=n.data,n.data=null,n.dataCsv=null}},this.resize=function(){var t=this.options,e=this.element;if(t.width_old&&t.width_old.toString().indexOf("%")>0){var n=$(e.selector).width();n=0==(n=0==n?$(window).width():n)?$(window).attr("screen").width:n;var r=Number(t.width_old.replace("%",""));t.width=n*(r/100)}if(t.height_old&&t.height_old.toString().indexOf("%")>0){var i=$(e.selector).height();i=0==(i=0==i?$(window).height():i)?$(window).attr("screen").height:i;r=Number(t.height_old.replace("%",""));t.height=i*(r/100)}},this.setColors=function(){var t=this.options;if(t.color)if($.isArray(this.options.color))t.color=d3.scaleOrdinal().range(t.color);else{var e=d3.keys(this.options.color),n=d3.values(this.options.color);this.options.color=d3.scaleOrdinal().domain(e).range(n)}else t.color=t.color?t.color:d3.scaleOrdinal().range(["#aec7e8","#b5cf6b","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"])},this.defaultStyle=function(){var t=this.options,e=(this.element,this.config);switch(t.type){case e.CHART_TYPE_LINE:}},this.render=function(){var t=this.options,e=this.element,n=this.config;t.svg?this.svg=t.svg:(d3.select(e.selector).select("svg").remove(),t.type!=n.CHART_TYPE_TABLE&&t.type!=n.CHART_TYPE_RAPID_TABLE&&t.type!=n.CHART_TYPE_GEO_MAP&&t.type!=n.CHART_TYPE_MAP&&(this.svg=d3.select(e.selector).append("svg:svg").attr("width",t.width).attr("height",t.height).style("background-color",t.backgroundColor).style("overflow","hidden").append("g"))),this.setOptions(),this.options.dataUrl?this.ajax(this.options.dataUrl,this.options.dataParams,this.setData):this.draw(),"horizontal"==t.legend.type?this.horizontalLegend():"vertical"==t.legend.type&&this.verticalLegend(),this.setWatermark()},this.setOptions=function(){var t=this.options,e=t.margin,n=t.width-e.left-e.right,r=t.height-e.top-e.bottom;if(t.axis.inner){var i={x:t.y.x?t.y.x:5,y:t.y.y?t.y.y:0,align:t.y.align?t.y.align:"start",usePath:null==t.y.usePath||t.y.usePath};if(t.y.grid)"undefined"!=t.y.grid.dash&&null!=t.y.grid.dash&&t.y.grid.dash,"undefined"!=t.y.grid.height&&null!=t.y.grid.height&&t.y.grid.height,"undefined"!=t.y.grid.width&&null!=t.y.grid.width&&t.y.grid.width;$.extend(!0,t.y,i)}"quad_scatter"==t.type&&(t.y.grid||(t.y.grid={},t.y.grid.width=0)),"bubble"!=t.type&&(t.axis.text.style.fill=t.axis.text.style.fill?t.axis.text.style.fill:"#545454",t.axis.text.style["font-size"]=t.axis.text.style["font-size"]?t.axis.text.style["font-size"]:"12px")},this.afterCall=function(){this.options.afterCall()},this.setData=function(t){if("string"==typeof t&&(t=$.parseJSON(t)),this.options.dataType)switch(this.options.dataType){case config.DATA_TYPE_JSON:this.options.data=t,this.options.dataCsv=null,this.options.dataRand=null;break;case config.DATA_TYPE_CSV:this.options.dataCsv=t,this.options.data=null,this.options.dataRand=null;break;case config.DATA_TYPE_RAND:this.options.dataRand=t,this.options.data=null,this.options.dataCsv=null}else this.options.data=t;this.draw()},this.ajax=function(t,e,n,r,i,a){if($.support.cors=!0,t){var o=this;$.ajax({url:t,crossDomain:!0,global:!1,type:a,data:e,dataType:"json",async:!0,cache:!1,success:function(t,e,r,a){n&&n.call(o,t,i)},error:function(i,a,o){$.getJSON(t,e).done(function(t){n(t)}).fail(function(t,e,n){r&&r(t,e,n)})}})}},this.click=function(t){this.options.click&&this.options.click(t)},this.digits=function(t){return-1!=t.toString().indexOf(".")?Number(t):t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},this.parseCSV=function(t){if(this.options.dataCsv){var e=$.trim(this.options.dataCsv),n=Papa.parse(e,{header:!0,skipEmptyLines:!0}).data;for(var r in n)n[r].value&&(n[r].value=Number(n[r].value));this.options.dataCsv=null,this.options.data=n}},this.parseJSON=function(){if(this.options.data){var t=this.options.data;for(var e in t)t[e].value&&(t[e].value=Number(t[e].value))}if(this.options.data&&this.options.dataKeys){var n=d3.keys(this.options.dataKeys),r=d3.values(this.options.dataKeys);if($.isArray(t))!function t(e){for(var i in e){var a=e[i],o=d3.keys(a),s=d3.values(a);for(var l in n){for(var u in o)if(r[l]==o[u]){e[i][n[l]]=e[i][o[u]],e[i].value&&(e[i].value=Number(e[i].value));break}$.isArray(s[l])&&t(s[l])}e[i].value&&(e[i].value=Number(e[i].value))}}(t);else for(var i in t){for(var a in n)if(i==r[a]){t[n[a]]=t[r[a]];break}var o=t[i];$.isArray(o)&&s(o)}this.options.data=t}function s(t){for(var e in t){var i=t[e],a=d3.keys(i),o=d3.values(i);for(var l in n)for(var u in a){if(r[l]==a[u]){t[e][n[l]]=t[e][a[u]];break}$.isArray(o[u])&&s(o[u])}t[e].value&&(t[e].value=Number(t[e].value))}}},this.parseHierarchyJson=function(){var t=this.options.data,e=(d3.map(),t[0]);for(var n in e.children=[],t){var r=t[n];e.id==r.parent?e.children.push(r):i(r,e.children)}function i(t,e){for(var n in e){var r=e[n];r.id==t.parent?r.children?r.children.push(t):r.children=[t]:i(t,r.children)}}return e},this.isInt=function(t){return Number(t)===t&&t%1==0},this.isNull=function(t){return"NaN"==t||""==t||null==t||null==t||"undefined"==t||null!=t&&"object"==typeof t&&!Object.keys(t).length},this.sort=function(t,e){return t.value>e.value?-1:t.value<e.value?1:0},this.lineType=function(t){var e=d3.curveCardinal;switch(t){case"basis":e=d3.curveBasis;break;case"basis-closed":e=d3.curveBasisClosed;break;case"basis-open":e=d3.curveBasisOpen;break;case"bundle":e=d3.curveBundle;break;case"cardinal-closed":e=d3.curveCardinalClosed;break;case"cardinal-open":e=d3.curveCardinalOpen;break;case"catmull-rom":e=d3.curveCatmullRom;break;case"catmull-rom-closed":e=d3.curveCatmullRomClosed;break;case"catmull-rom-open":e=d3.curveCatmullRomOpen;break;case"linear":e=d3.curveLinear;break;case"linear-closed":e=d3.curveLinearClosed;break;case"monotonex":e=d3.curveMonotoneX;break;case"monotoney":e=d3.curveMonotoneY;break;case"natural":e=d3.curveNatural;break;case"step":e=d3.curveStep;break;case"step-after":e=d3.curveStepAfter;break;case"step-before":e=d3.curveStepBefore}return e},this.drawAxis=function(t,e,n,r){var i=this.options,a=i.margin,o=(i.type,i.width-a.left-a.right),s=i.height-a.top-a.bottom,l=d3.scaleBand();switch(i.x.space&&l.padding(i.x.space),i.type){case"scatter":case"quad_scatter":l=d3.scaleLinear()}l.domain(e).range([i.x.padding,o-i.x.padding]);var u=d3.scaleLinear();switch(i.type){case"scatter_band":u=d3.scaleBand()}u.range([s,0]),"%"==this.options.tickSuffix?d.domain([0,100]):"scatter_band"==i.type?u.domain(n):u.domain(n).nice(),i.y.range&&u.range(i.y.range);var c=d3.axisBottom(l),f=d3.axisLeft(u);i.x.tickSkip&&c.tickValues(l.domain().filter(function(t,e){return!(e%i.x.tickSkip)})),i.y.ticks&&f.ticks(i.y.ticks);var h=this.svg.append("g").attr("class","x axis").attr("transform","translate(0, "+s+")").attr("y",10).call(c),d=this.svg.append("g").attr("class","y axis").attr("x",-10).call(f);if(this.xScale=l,this.yScale=u,this.xAxis=c,this.yAxis=f,this.x=h,this.y=d,i.axis&&i.axis.right){var p=i.y.right.padding.top?i.y.right.padding.top:0,g=d3.scaleLinear().range([s,p]),y=d3.axisRight(g);i.y.right.ticks&&y.ticks(i.y.right.ticks),g.domain([0,d3.max(i.line.data,function(t){return t.value})]).nice();var v=this.svg.append("g").attr("class","y-right axis").attr("transform","translate( "+o+", 0 )").call(y);this.yRightScale=g,this.yRightAxis=y,this.yRight=v}},this.styleAxis=function(t,e,n,r){var i=this,a=this.options,o=a.margin,s=(a.type,a.width-o.left-o.right),l=a.height-o.top-o.bottom,u=this.svg.select(".x"),c=this.svg.select(".y");if(a.x&&a.x.grid){var f=null!=(d=a.x).grid.dash?d.grid.dash:"2,2",h=null!=d.grid.height?d.grid.height:l;u.selectAll(".tick line").attr("stroke-dasharray",f),a.x.line.y=-h}if(a.y&&a.y.grid){f=null!=(d=a.y).grid.dash?d.grid.dash:"2,2";var d,p=null!=d.grid.width?d.grid.width:s;c.selectAll(".tick line").attr("stroke-dasharray",f),a.y.line.x=p}function g(t,e){t.select("path").style("stroke",e.line.color?e.line.color:"#d8d8d8").style("stroke-width",e.usePath?e.line.width?e.line.width:1:0),e&&i.setObject(t,e);var n=t.selectAll(".tick text");i.setObject(n,a.text),i.setObject(n,e.text),e.align&&n.style("text-anchor",e.align),e.color&&n.style("fill",e.color),null!=e.x&&n.attr("x",e.x),null!=e.y&&n.attr("y",e.y),null!=e.rotate&&n.attr("transform","rotate("+e.rotate+")");var r=t.selectAll("line");null!=e.line.x&&r.attr("x2",e.line.x),null!=e.line.y&&r.attr("y2",e.line.y),r.style("stroke",e.line.color?e.line.color:"#d8d8d8"),r.style("stroke-width",e.line.width?e.line.width:1),e.line&&i.setObject(r,e.line)}if(g(u,a.x),g(c,a.y),a.line&&a.line.data){var y=this.svg.select(".y-right");g(y,a.y.right),y.selectAll(".tick text").text(function(t,e){return a.y.right.format?a.y.right.format(t):t})}a.axis&&a.axis.inner&&(u.select("path").attr("d","M0.5,0V0.5H"+s+".5V0"),c.select("path").attr("d","M0,"+l+".5H0.5V0.5H0")),"scatter_band"==a.type&&(u.select("path").attr("d","M0.5,0V0.5H"+s+".5V"+-l),c.select("path").attr("d","M0,"+l+".5H0.5V0.5H"+s)),c.selectAll(".tick text").text(function(t,e){return a.y.format?a.y.format(t):t});var v=d3.timeParse(a.x.inputFormat),m=d3.timeFormat(a.x.outputFormat);u.selectAll(".x .tick text").text(function(t,e){return a.x.format?a.x.format(t,v(t),m(v(t)),e):i.isNull(a.x.outputFormat)||i.isNull(a.x.inputFormat)?t:m(v(t))}),!0===a.x.wrap&&this.svg.selectAll(".x .tick text").call(i.wrap,a.wrapWidth)},this.setObject=function(t,e,n){if(e&&e.attr)for(var r in e.attr){var i=e.attr[r];t.attr(r,i)}if(e&&e.style)for(var r in e.style){i=e.style[r];t.style(r,i)}},this.drawTooltip=function(e,n){var r=this.element[0].id,i=this.options,a=e.append("defs").append("filter").attr("id",r+"-drop-shadow").attr("height","130%");a.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",5).attr("result","blur"),a.append("feOffset").attr("in","blur").attr("dx",1).attr("dy",1).attr("result","offsetBlur");var o=a.append("feMerge");o.append("feMergeNode").attr("in","offsetBlur"),o.append("feMergeNode").attr("in","SourceGraphic");var s=e.append("g").attr("class",r+"-tooltip").style("position","absolute").style("top","0px").style("left","0px").attr("min-width",200).style("display","none").style("pointer-events","visibleStroke");this.setObject(s.selectAll("text"),i.text);var l=n||0;i.tooltip.nodeMax&&(l=i.tooltip.nodeMax,i.tooltip.nodeMax>n&&(l=n)),i.line.data&&(l+=1);var u=s.append("rect").attr("x",13).attr("y",13).attr("height",55+20*l).attr("width",208).style("filter","url(#"+r+"-drop-shadow)").style("pointer-events","visibleStroke").attr("fill","#ffffff").style("opacity",.8).attr("rx",1).attr("ry",1);i.tooltip.rect&&t.setObject(u,i.tooltip.rect);s.append("g").attr("class",r+"-tip-g");return n&&n>0&&this.drawTooltipLabel(n),s},this.drawTooltipLabel=function(e){var n=this.element[0].id,r=this.options,i=d3.selectAll("."+n+"-tip-g"),a=i.append("text").attr("class",n+"-tip-title").attr("x",33).attr("y",44).attr("text-anchor","left").style("font-size","13px").style("fill","#6A7C87");r.tooltip.text&&t.setObject(a,r.tooltip.text),r.tooltip.title&&t.setObject(a,r.tooltip.title);for(var o=0;o<e&&!(r.tooltip.nodeMax<=o);o++)s(n,o);function s(e,n){if("world_map"!=r.type)var a=i.append("circle").attr("class",e+"-tip-circle-"+n).attr("cx",36).attr("cy",68).attr("r",4);var o=i.append("text").attr("class",e+"-tip-text-"+n).attr("x",45).attr("y",72).attr("text-anchor","left").style("font-size","12px").style("fill","#6A7C87"),s=i.append("text").attr("class",e+"-tip-value-"+n).attr("x",183).attr("y",72).attr("text-anchor","right").style("font-size","12px").style("font-weight","bold").style("fill","#404247");r.tooltip.text&&(t.setObject(o,r.tooltip.text),t.setObject(s,r.tooltip.text)),r.tooltip.circle&&t.setObject(a,r.tooltip.circle),r.tooltip.name&&t.setObject(o,r.tooltip.name),r.tooltip.value&&t.setObject(s,r.tooltip.value)}r.line.data&&s(n,e)},this.moveTooltip=function(e,n,r,i,a,o){var s=this.options;if(!1!==s.tooltip.enabled){e.style("display","block");var l=this.element[0].id,u=s.width-s.margin.left-s.margin.right,c=s.height-s.margin.bottom-s.margin.top,f=d3.timeParse(s.x.inputFormat),h=d3.timeFormat(s.tooltip.dateFormat),d=d3.format(",d"),p=0,g=[];if("bar"==o)g.push({title:r.name,name:r.name,value:r.value,color:r.color?r.color:t.getColor(r)});else if("stackedbar"==o){for(var y in r.data)if("name"!=y){var v=r.data[y];(_={title:r.data.name,name:y,value:v}).color=r.colors?r.colors[y]:t.getColor(y),g.push(_)}if(s.line.data)(_={title:(b=s.line.data[r.idx]).x,name:b.name,value:b.value}).color=b.color?b.color:t.getColor(b.name),g.push(_);"grouped"!=s.bar.type&&(g=g.reverse())}else if("stackedbar_line"==o){for(var m in r.values){var x=r.values[m];(_={title:x.name,name:x.category,value:x.value}).color=x.color?x.color:t.getColor(x.category),g.push(_)}var b;if(s.line.data)(_={title:(b=s.line.data[r.idx]).x,name:b.name,value:b.value}).color=b.color?b.color:t.getColor(b.name),g.push(_);"grouped"!=s.bar.type&&(g=g.reverse())}else if("world_map"==o){if(r.data){for(var m in r.data){var _={title:r.name?r.name:r.properties.name,name:r.data[m].name,value:r.data[m].value};g.push(_)}this.drawTooltipLabel(r.data.length),e.select("rect").attr("height",55+20*r.data.length)}}else{for(var m in n){var w=(_=n[m]).data;for(var k in w){var M=w[k];if(M.date==r){if(s.tooltip.nodeMax<=p)break;var A=""!=s.tooltip.dateFormat?h(f(M.date)):M.date;g.push({title:A,name:M.name,value:M.value,color:M.color}),p++;break}}}g.sort(t.sort)}return g.map(function(t,e){if("avg"==t.name||"평균선"==t.name){var n=g.splice(e,1);g.push(n[0])}}),function(t){var n=t[0].title;o&&o.indexOf("bar")>=0&&""!=s.tooltip.dateFormat&&(n=h(f(t[0].title)));var n=e.select("."+l+"-tip-title").attr("x",33).attr("y",44).text(n),r=0;d3.map(t,function(t){r+=Number(t.value)});var p=d3.max(t,function(t){return Number(t.value)}),g=[n.node().getBBox().width];for(var y in t){if(s.tooltip.nodeMax<=y)break;var v=t[y];v.total=r,v.max=p;var m="world_map"==s.type?35:45,x=e.select("."+l+"-tip-text-"+y).attr("x",m).attr("y",72+20*y).text(function(){return s.tooltip.name?s.tooltip.name(v):v.name});g.push(x.node().getBBox().width)}var b=d3.max(g),_=[];for(var y in t){if(s.tooltip.nodeMax<=y)break;var v=t[y],w=e.select("."+l+"-tip-value-"+y).attr("x",b+75).attr("y",72+20*y).text(function(){return s.tooltip.value?s.tooltip.value(v):d(v.value)}),k=w.node().getBBox().width;if(_.push(k),v.color)e.select("."+l+"-tip-circle-"+y).attr("cx",36).attr("cy",68+20*y).style("fill",function(){return v.color?v.color:s.color(v.name)});else e.select("."+l+"-tip-circle-"+y).at}e.select("rect").attr("width",b+d3.max(_)+75),i+=s.tooltip.x,a+=s.tooltip.y;var M=e.node().getBBox();i>u-M.width/2&&(i=i-M.width/2-2*s.tooltip.x);a<M.height/2?a=M.height/2:a>c-M.height/2-5&&(a=c-M.height/2-5);e.style("display","block").attr("transform","translate("+i+","+(a-M.height/2)+")"),s.tooltip.title&&"center"==s.tooltip.title.align&&e.select("."+l+"-tip-title").attr("x",(b+d3.max(_)+100)/2)}(g),e}},this.parser=function(t){var e=[],n=d3.map();for(var r in t){var i=t[r];if(n.has(i.name)){var a=n.get(i.name);a.push(i),n.set(i.name,a)}else n.set(i.name,[i])}for(var r in n)"object"==typeof n[r]&&e.push(n[r]);var o=[];for(var r in e){i=e[r];var s={};s.name=i[0].name,s.data=e[r],s.total=l(e[r]),u(e[r]),i[0]&&i[0].color&&(s.color=i[0].color),o.push(s)}function l(t){var e=0;for(var n in t){e+=t[n].value}return e}function u(t){for(var e in t){var n=t[e].labels;n&&(t[e].labels_array=n.split("|"))}}return o},this.uniqueId=function(){var t=new Date;return[t.getYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()].join("")},this.collapse=function(e,n){var r=this.options.collapse,i=r.data,a={};a="function"==typeof i.params?i.params(e):i.params,t.ajax(i.url,a,this.addChildren,i.fail,{d:e,callback:n},r.httpType)},this.addChildren=function(e,n){var r=n.d,i=n.callback,a=t.options,o=a.collapse.data.parser(e,r),s=[];for(var l in o){var u=o[l];(u=d3.hierarchy(u)).depth=r.depth+1,u.height=r.height-1,u.parent=r,s.push(u)}a.collapse.loading.src&&d3.select("#"+this.element[0].id+"-"+r.data.id+"-loading").remove(),s.length>0&&(r.children=s,r._children=null,r.data.children=o,r.data._children=null,i&&i(r)),a.click&&t.click(r)},this.clicked=function(e,n){var r=this.options.clicked,i=r.data,a={};a="function"==typeof i.params?i.params(e.d):i.params,e.callback=n,t.ajax(i.url,a,this.clickedCallback,i.fail,e,r.httpType)},this.clickedCallback=function(e,n){var r=n.d,i=n.callback,a=t.options,o=a.clicked.data,s=o.parser?o.parser(e,r):e;i&&n.type==t.config.CHART_TYPE_MAP&&i(n.key,s),a.click&&a.click(r,e)},this.getColor=function(t){return"function"==typeof this.options.color?this.options.color(t):t.color?t.color:this.options.color(t)},this.verticalLegend=function(t){var e=this.element[0].id,n=this.options,r=n.margin,i=n.width-r.left-r.right,a=n.height-r.top-r.bottom,o=n.data,s={};if(n.legend.data)s=n.legend.data(o);else{var l=d3.map();for(var u in o){var c=o[u];l.has(c.name)||l.set(c.name,c)}s=l.values()}var f=this.svg.append("g").attr("id",e+"-legend");this.setObject(f.selectAll("text"),n.text);var h=n.legend.height?n.legend.height:a,d=n.height-h,p=n.legend.offset?n.legend.offset:5,g=f.selectAll(".legend").data(s).enter().append("g"),y=g.append("rect").attr("x",0).attr("y",5).attr("width",10).attr("height",10).style("fill",function(t,e){return t.color?t.color:n.color(t.name)});this.setObject(y,n.legend.rect),n.legend&&n.legend.text&&n.legend.text.ellipsis&&null==n.legend.text.ellipsis.suffix&&(n.legend.text.ellipsis.suffix="...");var v=g.append("text").attr("x",15).attr("y",15).style("text-anchor","start").style("font-size","13px").text(function(t){return n.tooltip.name?n.tooltip.name(t):n.legend&&n.legend.text&&n.legend.text.ellipsis&&t.name.length>n.legend.text.ellipsis.limit?t.name.substr(0,n.legend.text.ellipsis.limit)+n.legend.text.ellipsis.suffix:t.name});this.setObject(v,n.legend.text),v.append("title").text(function(t){return n.tooltip.name?n.tooltip.name(t):t.name}),f.selectAll("g").attr("transform",function(t,e){var n=d3.select(this).node().getBoundingClientRect().height,r="translate(0,"+d+")";return d+=n+p,r});var m=f.node().getBoundingClientRect(),x=d3.select("#"+e+"-legend").node().getBoundingClientRect();if("right"==n.legend.align){var b=m.width/2,_=-x.height/2-(a-x.height)/4;f.attr("transform","translate("+b+", "+_+")")}b=(b=i/2+r.left-x.width)<a/2?a/2:b,b+=n.legend.x,_+=n.legend.y,f.attr("transform","translate("+b+", "+_+")")},this.horizontalLegend=function(t){var e=this.element[0].id,n=this.options,r=n.margin,i=n.width-r.left-r.right,a=(n.height,r.top,r.bottom,n.data),o=null,s={};if(n.legend.data)s=n.legend.data;else{var l=d3.map();for(var u in a){var c=a[u];l.has(c.name)||l.set(c.name,c)}s=l.values()}for(var u in s)if("avg"==s[u].name||"평균선"==s[u].name){o=s.splice(u,1)[0];break}var f=d3.select("#"+e).select("svg").append("g").attr("id",e+"-legend");this.setObject(f.selectAll("text"),n.text);var h=n.legend.width?n.legend.width:i,d=n.width-h,p=n.legend.offset?n.legend.offset:15,g=f.selectAll(".legend").data(s).enter().append("g"),y=g.append("rect").attr("x",0).attr("y",5).attr("width",10).attr("height",10).style("fill",function(t,e){return t.color?t.color:n.color(t.name)});this.setObject(y,n.legend.rect);var v=g.append("text").attr("x",15).attr("y",15).style("text-anchor","start").style("font-size","13px").text(function(t,e){return n.tooltip.name?n.tooltip.name(t):t.name?t.name:void 0});if(this.setObject(v,n.legend.text),o){var m=f.append("g"),x=m.append("line").attr("x1",0).attr("x2",10).attr("y1",10).attr("y2",10).style("stroke","#676179").style("stroke-width",3).style("stroke-linecap","round").style("stroke-dasharray",".5, 3.5");this.setObject(x,n.legend.avg);v=m.append("text").attr("x",15).attr("y",15).style("text-anchor","start").style("font-size","13px").text("평균선");this.setObject(v,n.legend.text)}f.selectAll("g").attr("transform",function(t,e){var n=d3.select(this).node().getBoundingClientRect().width,r="translate("+d+",0)";return d+=n+p,r});var b=d3.select("#"+e+"-legend").node().getBoundingClientRect();n.legend.margin.right=n.legend.margin.right?n.legend.margin.right:20;var _=n.legend.align.match("right")?i-b.width-n.legend.margin.right:0,w=n.legend.align.match("top")?b.height/2:n.height-2*b.height;f.attr("transform","translate("+_+", "+w+")")},this.wrap=function(t,e){t.each(function(){for(var t,n=d3.select(this),r=n.text().split(/\s+/).reverse(),i=[],a=0,o=n.attr("y"),s=n.attr("x"),l=parseFloat(n.attr("dy")),u=n.text(null).append("tspan").attr("x",s).attr("y",o).attr("dy",l+"em");t=r.pop();)i.push(t),u.text(i.join(" ")),e?u.node().getComputedTextLength()>e&&(a++,i.pop(),u.text(i.join(" ")),i=[t],u=n.append("tspan").attr("x",s).attr("y",o).attr("dy",1.1*a+l+"em").text(t)):(i.pop(),u.text(i.join(" ")),i=[t],u=n.append("tspan").attr("x",s).attr("y",o).attr("dy",1.1*a+l+"em").text(t),a++)})},this.setWatermark=function(){var t=this.options;if(t.watermark&&t.watermark.use){var e=this.element,n=(this.config,d3.select(d3.select(e.selector).node().parentNode));n.select(".davif-logo").remove(),t.watermark.x=t.watermark.x?t.watermark.x:0,t.watermark.y=t.watermark.y?t.watermark.y:0,t.watermark.bottom=null!=t.watermark.bottom?t.watermark.bottom:35,n.append("div").attr("class","davif-logo").append("img").attr("src",t.watermark.src).style("margin-left",t.width-58+t.watermark.x+"px").style("margin-top",t.watermark.y+"px").style("width",58).style("height",25),n.style("margin-bottom",t.watermark.bottom+"px")}}},e=function(){var t=this;this.type="line",this.draw=function(){var e=this.element[0].id,n=this.options.data;n=this.parser(n);var r=this.options,i=(r.type,r.width),a=r.height,o=r.margin,s=(this.config,d3.format(",d"),this.svg.attr("transform","translate("+o.left+","+o.top+")"));if(i=i-r.margin.left-r.margin.right,a=a-r.margin.bottom-r.margin.top,r.axis){var l=s.append("rect").attr("width",i).attr("height",a).attr("fill","none");this.setObject(l,r.axis)}if("%I"==r.x.outputFormat&&r.x.rect){var u=s.append("rect").style("fill","#f8f8f8").style("stroke","none");this.setObject(u,r.x.rect)}var c={};for(var f in n){n[f].data.reduce(function(t,e,n){return c[e.date]||(c[e.date]=n),t},[])}var h=d3.keys(c),d="",p=d3.min(n,function(t){return d3.min(t.data,function(t){return t.value})}),g=d3.max(n,function(t){return d3.max(t.data,function(t){return t.value})});g+=g/10,d=r.tickNagative?[p=-d3.max([g,p]),g]:[0,g],this.drawAxis(n,h,d);var y=this.xScale,v=this.yScale;this.xAxis;"%I"==r.x.outputFormat&&r.x.rect&&(u.attr("x",i/2-r.x.padding).attr("width",i/2+r.x.padding).attr("height",a),this.setObject(u,r.axis.rect));var m=s.append("g").attr("class",e+"-focus").style("display","none"),x=this.lineType(r.line.type),b=d3.line().curve(x).x(function(t,e){return y(t.date)+y.bandwidth()/2}).y(function(t){return v(t.value)}),_=s.append("g").attr("class","lines"),w=_.selectAll("."+e+"-line-group").data(n).enter().append("g").attr("class",e+"-line-group"),k=w.append("path").attr("class",e+"-line").attr("id",function(t){return e+"-"+t.name}).attr("d",function(t){return b(t.data)}).attr("fill","none").style("stroke",function(t,e){return t.color?t.color:(t.color=r.color(t.name),t.color)}).style("stroke-width",r.line.width),M=d3.select("#"+e+"-avg").style("fill","none").style("stroke-width",5).style("stroke-linecap","round").style("stroke-dasharray","0, 10.5");if(r.line.avg&&t.setObject(M,r.line.avg),k.transition().duration(r.duration).ease(d3.easeCubicInOut),r.line&&this.setObject(w,r.line),r.line.maxPoint||r.line.maxPointAll){var A=d3.max(n,function(t){if("cnt"!=t.name&&"all"!=t.name&&"avg"!=t.name&&"평균선"!=t.name)return d3.max(t.data,function(t){return t.value})});d3.entries(n).map(function(e){var n=JSON.parse(JSON.stringify(e.value.data)).sort(t.sort)[0];if("avg"!=n.name&&"평균선"!=n.name&&(!0!==r.line.maxPoint||n.value==A)&&(!0!==r.line.maxPoint||"cnt"!=n.name&&"all"!=n.name)){var i=y(n.date)+y.bandwidth()/2+9,a=v(n.value)+17;Math.PI,s.append("path").attr("d","M0,5.059274L8.306048591020996,-8.059274 -8.306049,-8.059274Z").attr("fill",function(){return n.color?n.color:(n.color=r.color(n.name),n.color)}).attr("transform","translate("+(i-9)+", "+(a-28)+")");r.line.maxPointAll}})}var T=m.append("rect").attr("id",e+"-focus-rect").attr("height",a).attr("width",r.focusRectX&&null!=r.focusRectX.width?r.focusRectX.width:50).attr("x",0).attr("y",0);this.setObject(T,r.focusRectX),m.append("line").attr("id",e+"-focus-line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",a).attr("stroke","#dadee3").attr("stroke-width",1);var C=this.drawTooltip(s,n.length),E=r.icon.use?"block":"none",N=n.filter(function(t){return"avg"!=t.name&&"평균선"!=t.name}),R=_.selectAll(e+"-icon-group").data(N).enter().append("g").attr("class",e+"-icon-group").style("fill",function(t,e){return t.color?t.color:r.color(e)}).style("stroke",function(t){if(t.color)return t.color}).style("stroke-width",2).selectAll(e+"-icon").data(function(t){return t.data}).enter().append("g").attr("class",function(t,n){return e+"-icon-"+n}).style("display",E).append(r.icon.type).attr("cx",function(t){return y(t.date)+y.bandwidth()/2}).attr("cy",function(t){return v(t.value)}).attr("x",function(t){return y(t.date)+y.bandwidth()/2-r.icon.size/2}).attr("y",function(t){return v(t.value)-r.icon.size/2}).attr("r",r.icon.size).attr("width",r.icon.size).attr("height",r.icon.size);this.setObject(R,r.icon);var S=s.append("rect").attr("class","overlay").attr("width",i).attr("height",a).attr("fill","none").on("click",function(e){var r=d3.mouse(S.node())[0],e=y.invert(r),i=L(n[0].data,e),a=n[0].data[i];t.click(a)}).style("pointer-events","all").style("cursor","pointer");1!=r.tooltip.enabled&&"true"!=r.tooltip.enabled||S.on("mouseout",function(){m.transition().duration(r.duration).style("display","none"),C.transition().duration(r.duration).style("display","none"),_.selectAll("."+e+"-icon-group").selectAll("g").style("display",E).selectAll("circle").transition().duration(r.tooltip.duration).attr("r",r.icon.size)}).on("mousemove",function(i){var a=d3.mouse(S.node())[0],i=y.invert(a),o=y(i)+y.bandwidth()/2,s=L(n[0].data,i);_.selectAll("."+e+"-icon-group").selectAll("g").style("display",E).selectAll("circle").transition().duration(100).attr("r",r.icon.size),_.selectAll("."+e+"-icon-"+s).style("display","block").select("circle").transition().duration(100).attr("r",r.icon.hoverSize);var l=d3.mouse(S.node())[1];m.style("display","block").select("line").transition().duration(r.tooltip.duration).attr("x1",o).attr("x2",o),m.select("rect").transition().duration(r.tooltip.duration).attr("x",o-m.select("rect").node().getBBox().width/2).style("width",function(t){if(a<=m.select("rect").node().getBBox().width/2)return m.select("rect").node().getBBox().width-a;m.select("rect").node().getBBox().width}),t.moveTooltip(C,n,i,a,l)}),this.styleAxis(y,v);var P,z,O;d3.bisector(function(t){return t.date}).left;function L(t,e){for(var n in t)if(t[n].date==e)return Number(n)}y.invert=(P=y.domain(),z=y.range(),O=d3.scaleQuantize().domain(z).range(P),function(t){return O(t)});var D=d3.zoom().scaleExtent([1,10]).on("zoom",function(){});s.select(".x");if(s.call(D),r.labels.enabled){r.labels.style||(r.labels.style={},r.labels.style["font-size"]="12px");var I=Number(r.labels.style["font-size"].toString().replace("px","")),B=s.append("g").classed(e+"-labels-group",!0);for(var f in n)for(var j in n[f].data){var Y=n[f].data[j];if(Y.labels_array){Y.labels_attr={rect_width:d3.map(),text_width:d3.map(),rect_x:d3.map(),text_x:d3.map(),rect_y:d3.map(),text_y:d3.map()};A=d3.max(Y.labels_array,function(t){return t.length});var H=B.append("g").attr("id",e+"-labels-scroll-"+j).attr("height",Y.labels_array.length*I*1.5).attr("transform",function(t,e){var r=0;return 0==j?r=5:j==n[f].data.length-1&&(r=-5),"translate("+(y(Y.date)+r)+", "+v(Y.value)+")"}),U=H.selectAll(e+"-labels").data([Y]).enter().append("g").attr("class",e+"-labels").attr("id",function(t,n){return e+"-labels-"+j}).style("cursor","pointer").selectAll(e+"-labels").data(Y.labels_array),q=U.enter().append("rect").attr("class",e+"-labels-rect").attr("id",function(t,n){return e+"-labels-rect-"+j+"-"+n}).attr("width",function(t,e){var n=t.length*I+15;return Y.labels_attr.rect_width.set(e,n),n}).attr("height",1.5*I).attr("x",function(t,e){var n=d3.select(this).node().getBBox(),a=y.bandwidth()/2-n.width/2;return 0==e&&a<0&&(a=r.x.padding),y(Y.date)+n.width>=i&&(a=i-y(Y.date)-n.width-r.x.padding),Y.labels_attr.rect_x.set(e,a),a}).attr("y",function(t,e){var n=d3.select(this).node().getBBox().height*e;return Y.labels_attr.rect_y.set(e,n),n}).style("fill","#fff").style("stroke",function(t,e){return Y.color?Y.color:r.color(e)}).style("stroke-width",2).attr("rx",3).attr("ry",3).on("mouseover",function(){G(this,j)}).on("mouseout",function(){V(this)}),F=U.enter().append("text").attr("class",e+"-labels-text").attr("id",function(t,n){return e+"-labels-text-"+j+"-"+n}).text(function(t){return t}).style("font-size",I+"px").on("mouseover",function(){G(this,j)}).on("mouseout",function(){V(this)});if(F.attr("x",function(t,n){var r=d3.select("#"+e+"-labels-rect-"+j+"-"+n).node().getBBox(),i=d3.select(this).node().getBBox(),a=r.x+(r.width-i.width)/2;return Y.labels_attr.text_width.set(n,i.width),Y.labels_attr.text_x.set(n,a),a}).attr("y",function(t,n){var r=d3.select("#"+e+"-labels-rect-"+j+"-"+n).node().getBBox(),i=r.height*n+r.height/2+I/3;return Y.labels_attr.text_y.set(n,i),i}),q.attr("y",function(t,e){var n=d3.select(this.parentNode).node().getBBox();return v(Y.value)>a/2&&v(Y.value)+n.height>=a?-Y.labels_attr.rect_y.get(e):Y.labels_attr.rect_y.get(e)}),F.attr("y",function(t,e){var n=d3.select(this.parentNode).node().getBBox();return v(Y.value)>a/2&&v(Y.value)+n.height>=a?Y.labels_attr.text_y.get(0)-1.5*I*e:Y.labels_attr.text_y.get(e)}),r.labels.over)q.style("display",function(t,e){return 0==e?"block":"none"}),F.style("display",function(t,e){return 0==e?"block":"none"});else{var W=d3.max(Y.labels_attr.rect_width.values()),$=0;Y.labels_attr.rect_width.each(function(t,e){t==W&&($=Number(e))}),q.attr("width",W).attr("x",Y.labels_attr.rect_x.get($))}X(Y,j)}}function G(t,i){if(r.labels.over){var a=d3.select(t).attr("id").split("-"),o=a[a.length-2],s=(a[a.length-1],n[0].data[o]),l=d3.max(s.labels_attr.rect_width.values()),u=0;s.labels_attr.rect_width.each(function(t,e){t==l&&(u=Number(e))}),d3.select("#"+e+"-labels-"+o).selectAll("rect").transition().duration(r.duration).attr("width",function(t,e){return l}).attr("x",s.labels_attr.rect_x.get(u)).style("display","block"),d3.select("#"+e+"-labels-"+o).selectAll("text").transition().duration(r.duration).attr("x",function(t,e){var n=s.labels_attr.rect_x.get(u),r=s.labels_attr.text_width.get(e);return n+(l-r)/2}).style("display","block")}}function V(t){if(r.labels.over){var i=d3.select(t).attr("id").split("-"),a=i[i.length-2],o=(i[i.length-1],n[0].data[a]);d3.select("#"+e+"-labels-"+a).selectAll("rect").transition().duration(r.duration).attr("width",function(t,e){return o.labels_attr.rect_width.get(e)}).attr("x",function(t,e){return o.labels_attr.rect_x.get(e)}).style("display",function(t,e){return 0==e?"block":"none"}),d3.select("#"+e+"-labels-"+a).selectAll("text").transition().duration(r.duration).attr("x",function(t,e){return o.labels_attr.text_x.get(e)}).style("display",function(t,e){return 0==e?"block":"none"})}}function X(t,n){const i=d3.select("#"+e+"-labels-scroll-"+n);let o=i.node().getBBox(),s=v(Y.value)>a/2;if(r.labels.over){var l=d3.max(t.labels_attr.rect_width.values()),u=0;t.labels_attr.rect_width.each(function(t,e){t==l&&(u=Number(e))}),o={x:t.labels_attr.rect_x.get(u),y:s?-Number(i.attr("height")):0,width:l,height:Number(i.attr("height"))+18}}if(i.attr("height")<a){if(s&&v(Y.value)-o.height>-20)return;if(0==s&&v(Y.value)+o.height<a)return}let c=s?20-v(Y.value):o.y/4-20,f=s?a-(a-v(Y.value)):a-v(Y.value);i.append("clipPath").attr("id",e+"-scrollbox-clip-path-"+n).append("rect").attr("x",o.x).attr("y",c).attr("width",o.width).attr("height",f),H.attr("clip-path","url(#"+e+"-scrollbox-clip-path-"+n+")"),i.insert("rect","g").attr("id",e+"-box-"+n).attr("x",o.x).attr("y",c).attr("width",o.width).attr("height",f).attr("opacity",0),i.on("mousemove",function(){var t=d3.mouse(this),r=t[0],i=t[1];(r<10||r>o.width||(s?i<0:i>0)||i<c)&&d3.select("#"+e+"-labels-"+n).attr("transform","translate(0, -10)")});const h={x:o.x,y:c,width:o.width,height:f-10},d=i.append("rect").attr("width",0).attr("rx",0).attr("ry",0).attr("transform","translate("+h.x+h.width-0+","+h.y+")"),p=d3.select("#"+e+"-labels-"+n).attr("transform","translate(0, -10)"),g=(p.node().getBBox(),o.height,o.height/4);d.attr("height",g);const y=o.height/4;let m=-10;i.on("wheel",function(t){!function(t){0==s?(m-=t,m=Math.min(-10,m),m=Math.max(-o.height+h.height-20,m)):(m-=t,m=Math.max(-10,m),m=Math.min(o.height-h.height,m)),p.attr("transform","translate(0, "+m+")");const e=m/y*(h.height-g);d.attr("y",e)}(event.deltaY)})}}}},n=function(){var t=this;this.type="dendrogram",this.draw=function(){var e=this.element[0].id,n=this.options,r=(this.config,n.data),i=d3.scaleLinear().domain(d3.extent(r,function(t){return+t.value})).range([2,30]),a=d3.scaleLinear().domain(d3.extent(r,function(t){return+t.value})).range([2,15]);r=this.parseHierarchyJson(),width=n.width,height=n.height,margin=n.margin,width=width-n.margin.left-n.margin.right,height=height-n.margin.bottom-n.margin.top;var o,s=this.svg.attr("transform","translate("+margin.left+","+margin.top+")"),l=0,u=d3.tree().size([height,width]);(o=d3.hierarchy(r,function(t){return t.children})).x0=height/2,o.y0=0,o.children&&(o.children.forEach(function t(e){e.children&&(e._children=e.children,e._children.forEach(t),e.children=null)}),function r(c){var f=u(o);var h=f.descendants(),d=f.descendants().slice(1);h.forEach(function(e){if(0==e.depth)return!0;var n=0;if(t.options.depthLength)for(var r=1;r<=e.depth;r++)r<=e.depth&&(n+=t.options.depthLength[r-1]);n=n||e.depth*((t.options.width-75-t.options.margin.left-t.options.margin.right)/3),e.y=n});var p=s.selectAll("g."+e+"-node").data(h,function(t){return t.id||(t.id=++l)});var g=p.enter().append("g").attr("class",e+"-node").attr("transform",function(t){return"translate("+c.y0+","+c.x0+")"});g.append("circle").attr("class",e+"-node").on("click",T);g.append("text").attr("class",e+"-text").attr("dy",".35em").attr("x",function(t){return t.data.value||(t.data.value=0),n.text.x?a(t.data.value)+n.text.x:t.children||t._children?-13:13}).attr("text-anchor",function(t){return n.text.align?n.text.align:t.children||t._children?"end":"start"}).text(function(t){return n.text.length<t.data.name.length?t.data.name.substr(0,n.text.length)+n.text.suffix:t.data.name}).on("click",T);var y=g.append("g").attr("class","btn_remove").attr("id",function(t,n){return e+"-rmv-"+t.id});var v=22/3.5;var m=n.remove&&n.remove.y?n.remove.y:-1;y.append("circle").attr("cx",0).attr("cy",m).attr("r",11).style("fill","#fafafa").style("fill-opacity",.5);var x=y.append("g");x.append("line").attr("x1",-11+v).attr("y1",m).attr("x2",11-v).attr("y2",m);x.append("line").attr("x1",0).attr("y1",m-11+v).attr("x2",0).attr("y2",m+11-v);x.style("stroke-width",1.5).style("stroke","#053759");x.attr("transform","rotate (45,0,0)");n.remove||(n.remove={},n.remove.x=n.remove&&n.remove.x?n.remove.x:17);g.on("mouseover",function(t,r){var i=this;d3.select("#"+e+"-rmv-"+t.id).style("visibility","visible").attr("transform",function(t){var e=d3.select(i).select("text").node().getComputedTextLength();return"translate("+(e+n.remove.x)+", 0)"})}).on("mouseout",function(){d3.selectAll(".btn_remove").style("visibility","hidden")});var b=g.merge(p);b.transition().duration(n.duration).attr("transform",function(t){return"translate("+t.y+","+t.x+")"});b.select("circle."+e+"-node").attr("r",function(t){return t.parent?a(t.data.value):3}).style("fill",function(t){return t.data.category?n.color(t.data.category):t.data.color?t.data.color:n.color(t.data.name)}).style("fill-opacity",.5).style("stroke",function(t){return t.data.category?n.color(t.data.category):t.data.color?t.data.color:n.color?n.color(t.data.name):void 0}).style("stroke-width",1).attr("cursor","pointer");b.select(".btn_remove").on("click",function(t){for(var e in o.children){var n=o.children[e];if(n.data.id==t.data.id){o.children.splice(e,1);break}for(var i in n.children){var a=n.children[i];if(a.data.id==t.data.id){n.children.splice(i,1);break}for(var s in a.children){var l=a.children[s];if(l.data.id==t.data.id){a.children.splice(s,1);break}}}}r(t)}).on("mouseover",function(t,n){d3.select("#"+e+"-rmv-"+t.id).style("visibility","visible")}).style("visibility","hidden").style("cursor","pointer");var _=p.exit().transition().duration(n.duration).attr("transform",function(t){return"translate("+c.y+","+c.x+")"}).remove();_.select("circle").attr("r",1e-6);_.select("text").style("fill-opacity",1e-6);_.select(".btn_remove");var w=s.selectAll("path."+e+"-link").data(d,function(t){return t.id});var k=w.enter().insert("path","g").attr("class",e+"-link").attr("d",function(t){var e={x:c.x0,y:c.y0};return A(e,e)}).style("stroke-width",function(t){return i(t.data.value)});var M=k.merge(w);M.transition().duration(n.duration).attr("d",function(t){return A(t,t.parent)}).style("fill",n.line.style.fill?n.line.style.fill:"none").style("stroke-linecap","round").style("stroke",function(t){return t.data.category?n.color(t.data.category):t.data.color?t.data.color:"lightsteelblue"}).style("stroke-opacity",function(t){return n.line.style["stroke-opacity"]?n.line.style["stroke-opacity"]:.3});n.line&&t.setObject(M,n.line);w.exit().transition().duration(n.duration).attr("d",function(t){var e={x:c.x,y:c.y};return A(e,e)}).remove();h.forEach(function(t){t.x0=t.x,t.y0=t.y});function A(t,e){return path="M "+t.y+" "+t.x+"C "+(t.y+e.y)/2+" "+t.x+","+(t.y+e.y)/2+" "+e.x+","+e.y+" "+e.x,path}function T(i){if(i.children)i._children=i.children,i.children=null,r(i);else if(n.collapse.data&&n.collapse.data.conditions){var a=d3.select(this.parentNode).select("text"),o=Number(a.attr("x"))+Number(a.node().getComputedTextLength());a.attr("y");if(n.collapse.loading.src){var s=d3.select(this.parentNode).append("image").attr("id",e+"-"+i.data.id+"-loading").attr("width",20).attr("x",o).attr("y",-10).attr("xlink:href",n.collapse.loading.src);t.setObject(s,n.collapse.loading)}t.collapse(i,r)}else i.children=i._children,i._children=null,r(i);n.click&&n.click(i)}t.setObject(d3.selectAll("."+e+"-node"),n.node);t.setObject(d3.selectAll("."+e+"-text"),n.text)}(o))}},r=function(){var t=this;this.draw=function(){var e=this.element[0].id,n=this.options,r=(this.config,n.data);for(var i in width=n.width,height=n.height,margin=n.margin,width=width-n.margin.left-n.margin.right,height=height-n.margin.bottom-n.margin.top,r)r[i].name&&(r[i].text=r[i].name),r[i].value&&(r[i].size=r[i].value);var a=d3.min(r,function(t){return t.size=Number(t.size),t.size}),o=d3.max(r,function(t){return t.size=Number(t.size),t.size});n.opacityDomain||(n.opacityDomain=[.6,.65,.75,.85,.95,1]);var s=[];for(var i in n.opacityDomain){var l=Number(n.opacityDomain[i]);0!=i?i!=this.options.opacityDomain.length-1?s.push(o*l):s.push(o):s.push(a)}this.svg.attr("transform","translate("+margin.left+","+margin.top+")");var u=d3.scaleLinear().domain([a,o]).range(n.text.range?n.text.range:[1,30]),c=d3.scaleLinear().domain(s).range(n.opacityDomain),f=this.options.text.padding?this.options.text.padding:2;n.text.rotate=n.text&&n.text.rotate?n.text.rotate:0,n.cloud.spiral=n.cloud&&n.cloud.spiral?"rectangular":n.cloud.spiral,d3.layout.cloud().size([width,height]).padding(f).words(r).rotate(function(t){return~~(2*Math.random())*n.text.rotate}).fontSize(function(t,e){return t.opacity=c(t.size),u(t.size)}).fontWeight(["bold"]).spiral(n.cloud.spiral).on("end",function(r){var i=t.svg.attr("transform","translate("+width/2+","+height/2+")").selectAll("text").data(r).enter().append("text").style("cursor","pointer").style("font-size",function(t){return t.size+"px"}).style("font-weight",600).style("font-family","sans-serif").style("fill-opacity",function(t){return t.opacity}).style("fill",function(t,e){return t.color?t.color:t.category?n.color(t.category):n.color(e)}).attr("id",function(t,n){return t.id?t.id:e+"-id-"+n}).attr("text-anchor","middle").attr("transform",function(t){var e="translate("+[t.x,t.y]+") ";return t.rotate&&(e+="rotate("+t.rotate+")"),e}).text(function(t){return t.text}).on("click",function(e){t.click(e)});n.text&&t.setObject(i,n.text)}).start()}},i=function(){var t=this;this.draw=function(){var e=this.element[0].id,n=this.options.data,r=(this.config,this.svg),i=this.options,a=(i.type,i.width),o=i.height,s=i.margin;a=a-i.margin.left-i.margin.right,o=o-i.margin.bottom-i.margin.top;var l=d3.format(",d"),u=Math.min(a,o)/2,c=r.attr("transform","translate("+(a/2+s.left)+","+(o/2+s.top)+")"),f=i.pie&&i.pie.radius?i.pie.radius:.8,h=d3.arc().innerRadius(0).outerRadius(u*f),d=d3.pie().value(function(t){return t.value}).sort(null);c.append("g").attr("id",e+"-pie").selectAll("path").data(d(n)).enter().append("g").append("path").attr("d",h).attr("fill",function(t,e){return t.data.color?t.color=t.data.color:t.color=i.color(t.data.name),t.color}).style("opacity",.8).style("stroke","white").on("click",function(e){t.options.click(e)}).on("mouseover",function(t){if(d3.selectAll("path").style("opacity",.8),d3.select(this).style("opacity",1),i.tooltip.enabled){var n=r.style("cursor","pointer").append("g").attr("class",e+"-tooltip").style("opacity",0);n.append("text").text(function(){return t.data.name+" ("+l(t.data.value)+")"}).attr("text-anchor","middle");var a=n.select("text").node().getBBox();n.insert("rect","text").attr("x",a.x-2).attr("y",a.y-2).attr("width",a.width+4).attr("height",a.height+4).style("fill","white").style("opacity",.75)}}).on("mousemove",function(t){if(i.tooltip.enabled){var n=d3.mouse(this),r=n[0]+a/2,s=n[1]+o/2-13,l=d3.select("."+e+"-tooltip text").node().getBBox();r-l.width/2<0?r=l.width/2:a-r-l.width/2<0&&(r=a-l.width/2),r-=a/2,s-l.height/2<0?s=l.height+26:o-s-l.height/2<0&&(s=o-l.height/2),s-=o/2,d3.select("."+e+"-tooltip").style("opacity",1).attr("transform","translate("+r+", "+s+")")}}).on("mouseout",function(t){r.select("."+e+"-tooltip").remove(),r.selectAll("path").style("opacity",.8)}).on("touchstart",function(t){r.style("cursor","none")}).each(function(t,e){this._current=e});if(1==i.text.enabled){var p=i.line&&i.line.distance?i.line.distance:0,g=d3.arc().outerRadius(u*f).innerRadius(u*f),y=d3.arc().outerRadius(u*(f+.1)).innerRadius(u*(f+.1));r.append("g").attr("class",e+"-pie-labels"),r.append("g").attr("class",e+"-pie-lines");var v=r.select("."+e+"-pie-lines").selectAll("polyline").data(d(n)).enter().append("polyline").style("opacity",.3).style("stroke","black").style("stroke-width","1px").style("fill","none").attr("points",function(t){var e=y.centroid(t);return e[0]=u*(f+p)*(x(t)<Math.PI?1:-1),[g.centroid(t),y.centroid(t),e]});this.setObject(v,i.line);var m=r.select("."+e+"-pie-labels").selectAll("text").data(d(n)).enter().append("text").attr("dy",".3em").text(function(t){return i.text.ellipsis&&t.data.name.length>i.text.ellipsis.limit?t.data.name.substr(0,i.text.ellipsis.limit)+i.text.ellipsis.suffix:t.data.name}).attr("transform",function(t){var e=y.centroid(t);return e[0]=u*(f+p+.05)*(x(t)<Math.PI?1:-1),"translate("+e+")"}).style("text-anchor",function(t){return x(t)<Math.PI?"start":"end"});function x(t){return t.startAngle+(t.endAngle-t.startAngle)/2}this.setObject(m,i.text)}}},a=function(){this.draw=function(){this.element[0].id;var t=this.options.data,e=(this.config,this.svg),n=this.options,r=(n.type,n.width),i=n.height,a=n.margin;r=r-n.margin.left-n.margin.right,i=i-n.margin.bottom-n.margin.top;var o=t.percent,s=(t.value,n.duration),l=n.donut.foreColor?n.donut.foreColor:"#0a8",u=n.donut.backColor?n.donut.backColor:"#ccc",c=Math.min(r,i)/2,f=d3.scaleOrdinal([l,u]),h=e.attr("transform","translate("+(r/2+a.left)+","+(i/2+a.top)+")");n.donut.innerRadius=n.donut.innerRadius?n.donut.innerRadius:5,n.donut.outerRadius=n.donut.outerRadius?n.donut.outerRadius:0;var d=d3.arc().innerRadius(c-30+n.donut.innerRadius).outerRadius(c+n.donut.outerRadius),p=d3.pie().sort(null);if(h.selectAll("path").data(p([0,1])).enter().append("path").attr("d",d).attr("fill",function(t,e){return f(e)}).each(function(t){this._current=t}).data(p([o/100,1-o/100])).transition().duration(s).attrTween("d",function(t){var e=d3.interpolate(this._current,t);return this._current=e(0),function(t){return d(e(t))}}),n.percent.use&&t.percent){var g=h.append("text").attr("text-anchor","middle").attr("dy",n.percent.y).text(t.percent+n.percent.unit);n.percent.size&&g.style("font-size",n.percent.size+"px"),this.setObject(g,n.percent)}if(n.value.use&&t.value){var y=h.append("text").attr("text-anchor","middle").attr("dy",n.value.y).text(this.digits(t.value)+n.value.unit);n.value.size&&y.style("font-size",n.value.size+"px"),this.setObject(y,n.value)}if(n.name.use&&t.name){var v=h.append("text").attr("text-anchor","middle").attr("dy",n.name.y).text(t.name);n.name.size&&y.style("font-size",n.name.size+"px"),this.setObject(v,n.name)}}},o=function(){var t=this;this.draw=function(){var e=this.element[0].id,n=this.options.data,r=(this.config,this.svg),i=this.options,a=(i.type,i.width),o=i.height,s=i.margin;a=a-i.margin.left-i.margin.right,o=o-i.margin.bottom-i.margin.top;var l=0;d3.map(n,function(t){l+=t.value});var u=Math.min(a,o)/2,c=r.attr("transform","translate("+(a/2+s.left)+","+(o/2+s.top)+")");i.donut.cornerRadius=i.donut.cornerRadius?i.donut.cornerRadius:3,i.donut.padAngle=i.donut.padAngle?i.donut.padAngle:.015,i.donut.innerRadius=i.donut.innerRadius?i.donut.innerRadius:0,i.donut.outerRadius=i.donut.outerRadius?i.donut.outerRadius:0;var f=d3.arc().cornerRadius(i.donut.cornerRadius).padAngle(i.donut.padAngle).innerRadius(u-40+i.donut.innerRadius).outerRadius(u+i.donut.outerRadius),h=d3.pie().value(function(t){return t.value}).sort(null),d=function(t,e){switch(e){case 0:t.transition().duration(500).ease(d3.easeBounce).attr("d",d3.arc().cornerRadius(i.donut.cornerRadius).padAngle(i.donut.padAngle).innerRadius(u-40+i.donut.innerRadius).outerRadius(u+i.donut.outerRadius));break;case 1:i.donut.hoverRadius=i.donut.hoverRadius?i.donut.hoverRadius:10,t.transition().duration(500).ease(d3.easeBounce).attr("d",d3.arc().cornerRadius(i.donut.cornerRadius).padAngle(i.donut.padAngle).innerRadius(u-40+i.donut.innerRadius).outerRadius(u+i.donut.outerRadius+i.donut.hoverRadius))}},p=c.selectAll("path").data(h(n)).enter().append("g").on("click",function(e){t.click(e)}).append("path").attr("d",f).attr("fill",function(t,e){return t.data.color?t.data.color:(t.data.color=i.color(e),t.data.color)}).each(function(t,e){this._current=e});if(null==i.tooltip.use||0!=i.tooltip.use)if(1==i.tooltip.enabled){var g=d3.format(",d");p.on("mouseover",function(n){if(i.tooltip.enabled){var a=r.style("cursor","pointer").append("g").attr("class",e+"-tooltip").style("opacity",0),o=a.append("text").text(function(){return i.tooltip.text&&i.tooltip.text.html?i.tooltip.text.html(n):n.data.name+" ("+g(n.data.value)+")"}).attr("text-anchor","middle"),s=o.node().getBBox();a.insert("rect","text").attr("x",s.x-2).attr("y",s.y-2).attr("width",s.width+4).attr("height",s.height+4).style("fill","white").style("opacity",.75);var l=a.append("rect");t.setObject(o,i.tooltip.text),t.setObject(l,i.tooltip.rect)}}).on("mousemove",function(t){if(i.tooltip.enabled){var n=d3.mouse(this),r=n[0]+a/2,s=n[1]+o/2-13,l=d3.select("."+e+"-tooltip").select("text").node().getBBox();r-l.width/2<0?r=l.width/2:a-r-l.width/2<0&&(r=a-l.width/2),r-=a/2,s-l.height/2<0?s=l.height+26:o-s-l.height/2<0&&(s=o-l.height/2),s-=o/2,d3.select("."+e+"-tooltip").style("opacity",1).attr("transform","translate("+r+", "+s+")")}}).on("mouseout",function(t){r.select("."+e+"-tooltip").remove()})}else p.on("mouseover",function(e){if(y.transition().duration(200).style("display","block"),i.percent&&i.percent.use){var n=e.data.value/l*100;n=Math.round(n*Math.pow(10,i.percent.point))/Math.pow(10,i.percent.point),m.text(n+i.percent.unit).style("fill",e.data.color)}i.value&&i.value.use&&x.text(t.digits(e.data.value)+i.value.unit),i.name&&i.name.use&&b.text(e.data.name),d(d3.select(this).select("path"),1)}).on("mouseout",function(t){y.style("fill",i.color(this._current)).select("."+e+"-text-group").transition().duration(i.duration).style("display","none"),d(d3.select(this).select("path"),0)});var y=c.style("cursor","pointer").append("g").attr("class",e+"-text-group");if(i.percent&&i.percent.use){var v=n[0].value/l*100;v=Math.round(v*Math.pow(10,i.percent.point))/Math.pow(10,i.percent.point);var m=y.append("text").attr("text-anchor","middle").attr("dy",i.percent.y).style("fill",n[0].color).text(v+i.percent.unit);i.percent.size&&m.style("font-size",i.percent.size+"px"),this.setObject(m,i.percent)}if(i.value&&i.value.use){var x=y.append("text").attr("text-anchor","middle").attr("dy",i.value.y).text(this.digits(n[0].value)+i.value.unit);i.value.size&&x.style("font-size",i.value.size+"px"),this.setObject(x,i.value)}if(i.name&&i.name.use){var b=y.append("text").attr("text-anchor","middle").attr("dy",i.name.y).text(n[0].name);i.name.size&&b.style("font-size",i.name.size+"px"),this.setObject(b,i.name)}}},s=function(){var t=this;this.type="bar",this.draw=function(){this.element[0].id;var e=this.options,n=(this.config,e.data);width=e.width,height=e.height,margin=e.margin,width=width-e.margin.left-e.margin.right,height=height-e.margin.bottom-e.margin.top;var r=this.svg.attr("transform","translate("+margin.left+","+margin.top+")");if(e.axis){var i=r.append("rect").attr("width",width).attr("height",height).attr("fill","none");this.setObject(i,e.axis)}var a=d3.max(n,function(t){return t.value}),o=n.map(function(t){return t.name}),s=[0,a+a/10];this.drawAxis(n,o,s);var l=t.xScale,u=t.yScale,c=t.xAxis,f=t.yAxis;!function(){t.svg.node().getBoundingClientRect();t.styleAxis(l,u,c,f);var i=r.selectAll(".bar").data(n),a=i.enter().append("rect").attr("class","bar").attr("x",function(t){return e.bar&&e.bar.width?l.bandwidth()/2-e.bar.width/2+l(t.name):l(t.name)}).attr("y",function(t){return u(t.value)}).attr("width",e.bar&&e.bar.width?e.bar.width:l.bandwidth()).attr("height",function(t){return height-u(t.value)}).style("fill",function(t){return t.color?t.color:(e.color?t.color=e.color(t.name):t.color="#3182bd",t.color)}).on("mouseout",function(){h.style("display","none")}).on("mousemove",d).on("click",function(e){t.click(e)});e.click&&a.style("cursor","pointer");e.rect&&t.setObject(a,e.rect);i.attr("x",function(t){return l(t.name)}).attr("y",function(t){return u(t.value)}).attr("width",l.bandwidth()).attr("height",function(t){return height-u(t.value)}),i.exit().remove()}();var h=this.drawTooltip(this.svg,1);function d(e){var r=d3.mouse(this)[0],i=d3.mouse(this)[1];t.moveTooltip(h,n,e,r,i,"bar")}}},l=function(){var t=this;this.type="stackedbar",this.draw=function(){var e=this.element[0].id,n=this.options,r=(this.config,n.data);width=n.width,height=n.height,margin=n.margin,width=width-n.margin.left-n.margin.right,height=height-n.margin.bottom-n.margin.top;var i=d3.format(".0%"),a=d3.format(""),o=(r=d3.nest().key(function(t){return t.name}).entries(r)).length,s=(r[0].values.length,[]),l=[];r.forEach(function(t){var e=d3.nest().key(function(t){return t.category}).rollup(function(t){return d3.mean(t,function(t){return t.value})}).object(t.values),r=d3.nest().key(function(t){return t.category}).rollup(function(t){var e=t[0];return e.color?e.color:n.color(e.category)}).object(t.values);l.push(r),s.push({key:t.key,values:e})});var u=s.map(function(t,e){var n={name:t.key};return Object.keys(t.values).forEach(function(e){n[e]=t.values[e]}),n}),c=d3.keys(u[0]).slice(1),f=[];u.forEach(function(t){f.push(d3.sum(c,function(e){return t[e]}))});n.duration;var h=d3.transition().duration(n.duration),d=(this.svg.attr("transform","translate("+margin.left+","+margin.top+")"),o=c.length,u.length,d3.stack().keys(c)(u)),p=d3.max(d,function(t){return d3.max(t,function(t){return t[1]})}),g=d3.max(d,function(t){return d3.max(t,function(t){return t[1]-t[0]})}),y=u.map(function(t){return t.name}),v=[0,p];this.drawAxis(r,y,v);var m=this.xScale,x=this.yScale,b=this.xAxis,_=this.yAxis;this.styleAxis(m,x,b,_);var w,k,M,A=this.svg.attr("transform","translate("+margin.left+","+margin.top+")"),T=A.selectAll("."+e+"layer").data(d).enter().append("g").attr("class",e+"layer").attr("id",function(t){return e+"-rect-"+t.key}).selectAll("rect").data(function(t){return t}).enter().append("rect").attr("id",function(t,n){return e+"-rect-"+n}).attr("x",function(t,e){var r=m.bandwidth()/2+m(t.data.name);return n.bar&&n.bar.width&&(r-=n.bar.width/2),r}).attr("y",height).attr("width",n.bar.width?n.bar.width:m.bandwidth()).attr("height",0).style("cursor","pointer").on("mousemove",function(e){var n=d3.mouse(this)[0],i=d3.mouse(this)[1];t.moveTooltip(P,r,e,n,i,"stackedbar")}).on("mouseout",function(){P.style("display","none")}).on("click",function(e){t.click(e)});if(T.transition(h).delay(function(t,e){return 10*e}).attr("y",function(t){return x(t[1])}).attr("height",function(t){return x(t[0])-x(t[1])}),n.bar.type&&("grouped"===n.bar.type?z():"stacked"===n.bar.type?O():"percent"===n.bar.type&&L()),n.bar.change){d3.selectAll("input[name="+n.bar.change.name+"]").on("change",function(){"grouped"===this.value?z():"stacked"===this.value?O():"percent"===this.value&&L()})}if(T.style("fill",function(t){var e=d3.select(this.parentNode).attr("id").split("-"),n=e[e.length-1],r=d3.select(this).attr("id").split("-"),i=r[r.length-1];return t.colors=l[i],t.idx=Number(i),l[i][n]}),n.bar&&n.line&&n.line.data){var C=x;n.axis&&n.axis.right&&(C=this.yRightScale);var E=this.lineType(n.line.type),N=d3.line().curve(E).x(function(t){return m(t.x)+m.bandwidth()/2}).y(function(t){return C(t.value)}),R=this.parser(n.line.data),S=A.append("g").attr("class",e+"-lines").selectAll("."+e+"-line-group").data(R).enter().append("g").attr("class",e+"-line-group").style("pointer-events","all").append("path").attr("d",N(n.line.data)).styles({fill:"none",stroke:"#676179","stroke-width":5,"stroke-linecap":"round","stroke-dasharray":"0, 10.5"});if(n.line&&t.setObject(S,n.line),m.invert=(w=m.domain(),k=m.range(),M=d3.scaleQuantize().domain(k).range(w),function(t){return M(t)}),1==n.tooltip.enabled||"true"==n.tooltip.enabled)A.append("rect").attr("class","overlay").attr("width",width).attr("height",height).attr("fill","none").style("pointer-events","all").style("cursor","pointer").on("mouseout",function(){P.style("display","none")}).on("mousemove",function(){var e=d3.mouse(this)[0],i=d3.mouse(this)[1],a=m.invert(e),o=0;for(var s in n.line.data)n.line.data[s].x==a&&(o=s);r[o].idx=Number(o),t.moveTooltip(P,r,r[o],e,i,"stackedbar_line")})}var P=this.drawTooltip(A,r[0].values.length);function z(){x.domain([0,g]),T.transition(h).attr("x",function(t,e,r){var i=this.parentNode.id.split("-"),a=c.indexOf(i[i.length-1]);return n.bar.width?m(t.data.name)+m.bandwidth()/2+n.bar.width*a-n.bar.width*o/2:m(t.data.name)+m.bandwidth()/o*a}).attr("width",n.bar.width?n.bar.width:m.bandwidth()/o).transition().attr("y",function(t){return height-(x(t[0])-x(t[1]))}).attr("height",function(t){return x(t[0])-x(t[1])}),_.tickFormat(a),A.selectAll(".y.axis").call(_),t.styleAxis(m,x,b,_)}function O(){x.domain([0,p]),T.transition(h).attr("y",function(t){return x(t[1])}).attr("height",function(t){return x(t[0])-x(t[1])}).transition().attr("x",function(t,e){return m.bandwidth()/2-n.bar.width/2+m(t.data.name)}).attr("width",n.bar.width?n.bar.width:m.bandwidth()),_.tickFormat(a),A.selectAll(".y.axis").call(_),t.styleAxis(m,x,b,_)}function L(){x.domain([0,1]),T.transition(h).attr("y",function(t){var e=d3.sum(d3.values(t.data));return x(t[1]/e)}).attr("height",function(t){var e=d3.sum(d3.values(t.data));return x(t[0]/e)-x(t[1]/e)}).transition().attr("x",function(t,e){return m.bandwidth()/2-n.bar.width/2+m(t.data.name)}).attr("width",n.bar.width?n.bar.width:m.bandwidth()),_.tickFormat(i),A.selectAll(".y.axis").call(_),t.styleAxis(m,x,b,_)}}},u=function(){var t=this;this.type="networkmap",this.draw=function(){var e=this.element[0].id,n=this.options.data,r=this.options,i=r.margin,a=r.width,o=r.height;i=r.margin;a=a-i.left-i.right,o=o-i.bottom-i.top;for(var s={distance:r.link.distance?r.link.distance:100,strength:r.link.strength?r.link.strength:-30,nodeRange:r.node.range?r.node.range:[5,20],linkRange:r.link.range?r.link.range:[1,12],textSize:r.text.size?r.text.size:10},l=[],u=[],c=d3.map(),f=0;f<n.length;f++){if((v=n[f]).value,c.has(v.target)){(h=c.get(v.target)).value+=v.value,h.siblings.push(v)}else{var h={id:v.target,value:v.value,siblings:[v]};$.extend(!0,h,v),c.set(v.target,h)}if(c.has(v.source)){(h=c.get(v.source)).value+=v.value,h.siblings.push(v)}else{h={id:v.source,value:v.value,siblings:[v]};$.extend(!0,h,v),c.set(v.source,h)}l.push($.extend(!0,{},v))}c.each(function(t){u.push(t)});var d=this.svg.attr("transform","translate("+i.left+","+i.top+")");d.append("defs").append("marker").attrs({id:e+"-arrowhead",viewBox:"-0 -5 10 10",refX:13,refY:0,orient:"auto",markerWidth:13,markerHeight:13,xoverflow:"visible"}).append("svg:path").attr("d","M 0,-5 L 10 ,0 L 0,5").attr("fill","#999").style("stroke","none");var p=d3.scaleLinear().domain(d3.extent(u,function(t){return+t.value})).range(s.nodeRange),g=d3.scaleLinear().domain(d3.extent(l,function(t){return+t.value})).range(s.linkRange),y=d3.forceSimulation().force("link",d3.forceLink().id(function(t){return t.id}).distance(s.distance)).force("charge",d3.forceManyBody().strength(s.strength)).force("center",d3.forceCenter(a/2,o/2)),v=d.append("g").attr("class","links").selectAll("line").data(l).enter().append("line").styles({stroke:"#999","stroke-opacity":.6});r.link.arrow?v.attr("marker-end","url(#"+e+"-arrowhead)"):v.attr("stroke-width",function(t){return t.s=g(t.value),t.s}),v.append("title").text(function(t){return t.value});var m=d.selectAll("."+e+"-edgepath").data(l).enter().append("path").attrs({class:e+"-edgepath","fill-opacity":0,"stroke-opacity":0,id:function(t,n){return e+"-edgepath"+n}}).style("pointer-events","none");edgelabels=d.selectAll("."+e+"-edgelabel").data(l).enter().append("text").style("pointer-events","none").attrs({class:e+"-edgelabel",id:function(t,n){return e+"-edgelabel"+n},fill:"#545454"}),r.text&&t.setObject(edgelabels,r.text),edgelabels.append("textPath").attr("xlink:href",function(t,n){return"#"+e+"-edgepath"+n}).style("text-anchor","middle").style("pointer-events","none").attr("startOffset","50%").text(function(t){return t.value}),r.path&&t.setObject(edgelabels,r.path);var x=d.append("g").attr("class","nodes").selectAll("g").data(u).enter().append("g");r.click&&x.style("cursor","pointer").on("click",function(t){r.click(t)});var b=d3.tip().attr("class",e+"-d3-tip").offset([-10,0]).html(function(t){if(r.tooltip.html)return r.tooltip.html(t);var e="";return t.id&&(e+=t.id+"<br>"),t.name&&(e+=t.name+"<br>"),t.value&&(e+=t.value+"<br>"),e});r.tooltip.enabled&&d.call(b);var _=x.append("circle").attr("r",function(t){return t.r=p(t.value),t.r}).attr("fill",function(t){return t.color?t.color:t.source_color&&t.id==t.source?t.source_color:t.target_color&&t.id==t.target?t.target_color:r.color(t.id)}).attr("visibility",function(t){if(t.source_type&&r.node.type)for(var e in r.node.type)if(e==t.source_type)return"hidden"}).styles({stroke:"#fff","stroke-width":"1.5px",cursor:"pointer"}).call(d3.drag().on("start",M).on("drag",A).on("end",T));r.node&&t.setObject(_,r.node);var w=x.append("svg:image").attr("xlink:href",function(t){if(r.node.type&&(t.source_type||t.target_type))for(var e in r.node.type){if(t.id==t.source&&e==t.source_type)return r.node.type[e];if(t.id==t.target&&e==t.target_type)return r.node.type[e]}return t.img}).attr("width",function(t){var e=0;return r.node.width?e=r.node.width:t.r&&(e=2*p(t.value)),t.width=e,e}).attr("height",function(t){var e=0;return r.node.height?e=r.node.height:t.r&&(e=2*p(t.value)),t.height=e,e}).attr("transform",function(t){var e=-t.width/2,n=-t.height/2;return r.node.x&&(e+=r.node.x),r.node.y&&(n+=r.node.y),"translate("+e+", "+n+")"}).call(d3.drag().on("start",M).on("drag",A).on("end",T)),k=x.append("text").text(function(t){return t.id+"("+t.value+")"}).attr("dy",0).attr("x",function(t){var e=0;return r.text.x&&(e+=r.text.x),e}).attr("y",function(t){var e=0;return r.text.y&&(e+=r.text.y),e});r.text.wrap&&x.selectAll("text").call(this.wrap,r.text.wrap.width?r.text.wrap.width:null),r.text&&t.setObject(k,r.text),x.append("title").text(function(t){return t.id}),r.tooltip.enabled&&(w.on("mouseover",function(t){b.show(t)}).on("mouseout",function(t){b.hide(t)}),k.on("mouseover",function(t){b.show(t)}).on("mouseout",function(t){b.hide(t)})),this.setObject(k,r.text),this.setObject(_,r.node),this.setObject(w,r.images),this.setObject(edgelabels,r.edge),this.setObject(v,r.link),y.nodes(u).on("tick",function(){_.attr("cx",function(t){return t.x=Math.max(t.r,Math.min(a-t.r,t.x))}).attr("cy",function(t){return t.y=Math.max(t.r,Math.min(o-t.r,t.y))}),w.attr("x",function(t){return t.x=Math.max(t.r,Math.min(a-t.r,t.x))}).attr("y",function(t){return t.y=Math.max(t.r,Math.min(o-t.r,t.y))}),v.attr("x1",function(t){return t.source.x}).attr("y1",function(t){return t.source.y}).attr("x2",function(t){return t.target.x}).attr("y2",function(t){return t.target.y}),k.attr("transform",function(t){var e=p(t.value)+t.x+3,n=t.y+s.textSize/3;return"translate("+e+", "+n+")"}),m.attr("d",function(t){return"M "+t.source.x+" "+t.source.y+" L "+t.target.x+" "+t.target.y}),edgelabels.attr("transform",function(t){if(t.target.x<t.source.x){var e=this.getBBox();return rx=e.x+e.width/2,ry=e.y+e.height/2,"rotate(180 "+rx+" "+ry+")"}return"rotate(0)"})}),y.force("link").links(l);function M(t){d3.event.active||y.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y}function A(t){t.fx=d3.event.x,t.fy=d3.event.y}function T(t){d3.event.active||y.alphaTarget(0),t.fx=null,t.fy=null}x.on("mouseover",function(t){k.style("opacity",function(e){for(var n in e.siblings){var r=e.siblings[n];if(r.source===t.id||r.target===t.id)return 1}return 0}),v.style("opacity",function(e){return e.source.id===t.id||e.target.id===t.id?1:0}),edgelabels.style("opacity",function(e){return e.source.id===t.id||e.target.id===t.id?1:0})}).on("mouseout",function(t){v.style("opacity",1),edgelabels.style("opacity",1),k.style("opacity",1)})}},c=function(){var t=this;this.type="scatter",this.draw=function(){var e=this.element[0].id,n=this.options.data,r=this.options,i=r.margin,a=r.width,o=r.height;a=a-(i=r.margin).left-i.right,o=o-i.bottom-i.top;var s=this.svg.attr("transform","translate("+i.left+","+i.top+")"),l=d3.extent(n,function(t){return+t.x}),u=d3.extent(n,function(t){return+t.y});t.drawAxis(n,l,u),function(i){var a=t.xScale,l=t.yScale,u=t.xAxis,c=t.yAxis,f=d3.transition().duration(r.duration).ease(d3.easeQuadOut);a.domain(d3.extent(n,function(t){return+t.x})),l.domain(d3.extent(n,function(t){return+t.y})),t.styleAxis(a,l,u,c);var h=d3.scaleLinear().domain(d3.extent(n,function(t){return+t.value})).range(r.node.range?r.node.range:[5,20]),d=s.selectAll("."+e+"-dot").data(n);d.enter().append("circle").attr("r",function(t){return h(t.value)}).attr("stroke","white").attr("stroke-width","2px").attr("fill",function(t){return t.color?t.color:(t.category?t.color=r.color(t.category):t.color=r.color(t.name),t.color)}).attr("class",e+"-dot").attr("id",function(t,n){return e+"-dot-"+n}).attr("cy",o).attr("cx",0).merge(d).transition(f).attr("cy",function(t,e){return l(t.y)}).attr("cx",function(t,e){return a(t.x)});r.text.over&&d3.selectAll("."+e+"-dot").on("mouseover",function(t){var e=d3.select(this).attr("id");d3.select("#"+e.replace("dot","label")).style("opacity",1)}).on("mouseout",function(){y.style("opacity",0)});var p=s.selectAll("."+e+"-dot").on("click",function(e){t.click(e)});r.node&&t.setObject(p,r.node);d.exit().remove(),r.text.x=t.isNull(r.text.x)?0:r.text.x,r.text.y=t.isNull(r.text.y)?0:r.text.y;var g=s.selectAll("."+e+"-label").data(n);g.enter().append("text").attr("class",e+"-label").attr("id",function(t,n){return e+"-label-"+n}).attr("x",0).attr("y",o).merge(g).transition(f).attr("x",function(t){return a(t.x)+h(t.value)+r.text.x}).attr("y",function(t){return l(t.y)+h(t.value)/2+r.text.y}).text(function(t){return t.name}),d3.selectAll("."+e+"-label").attr("x",function(t){return a(t.x)+r.text.x}).attr("y",function(t){return l(t.y)+h(t.value)/2+r.text.y});var y=s.selectAll("."+e+"-label").on("click",function(e){t.click(e)});r.text.over&&y.style("opacity",0);r.text&&t.setObject(y,r.text);g.exit().remove(),s.select(".x.axis").transition(f).call(u),s.select(".y.axis").transition(f).call(c)}()}},f=function(){var t=this;this.type="scatter_band",this.draw=function(){var e=this.element[0].id,n=this.options.data,r=this.options,i=r.margin,a=r.width,o=r.height;a=a-(i=r.margin).left-i.right,o=o-i.bottom-i.top;var s=this.svg.attr("transform","translate("+i.left+","+i.top+")"),l=n.map(function(t){return t.x}),u=n.map(function(t){return t.y});t.drawAxis(n,l,u);var c=d3.tip().attr("class",e+"-d3-tip").offset([-10,0]).html(function(e){return r.tooltip.html?r.tooltip.html(e):e.x+"<br>"+e.y+"<br>"+t.digits(e.value)});r.tooltip.enabled&&s.call(c),function(i){var a=t.xScale,o=t.yScale,l=t.xAxis,u=t.yAxis,f=d3.transition().duration(r.duration).ease(d3.easeQuadOut),h=d3.scaleLinear().domain(d3.extent(n,function(t){return+t.value})).range(r.node.range?r.node.range:[5,20]),d=s.selectAll("."+e+"-dot").data(n),p=(d.enter().append("circle").attr("r",function(t){return h(t.value)}).attr("stroke","white").attr("stroke-width","2px").attr("fill",function(t){return t.color?t.color:(t.category?t.color=r.color(t.category):t.color=r.color(t.name),t.color)}).attr("class",e+"-dot").attr("id",function(t,n){return e+"-dot-"+n}).merge(d).transition(f).attr("cy",function(t,e){return o(t.y)+o.bandwidth()/2}).attr("cx",function(t,e){return a(t.x)+a.bandwidth()/2}),s.selectAll("."+e+"-dot").on("click",function(e){t.click(e)}).on("mouseover",function(t){c.show(t)}).on("mouseout",function(t){c.hide(t)}));r.node&&t.setObject(p,r.node);d.exit().remove(),t.styleAxis(a,o,l,u)}()}},h=function(){var t=this;this.type="table",this.parseJson=function(){var t=this.options.data;"string"==typeof t&&(t=$.parseJSON(t));var e=[],n=[];for(var r in t[0])n.push(r);for(var i in e.push(n),t){var a=[],o=t[i];for(var s in o)a.push(o[s]);e.push(a)}this.options.data=e},this.draw=function(){var e=this.element,n=this.options,r=n.data,i=n.width-n.margin.left-n.margin.right,a=n.height-n.margin.top-n.margin.bottom,o={};o.headerUse=n.headerUse,o.headerWidth=n.headerWidth?n.headerWidth:[30,40,30],o.defaultCss=!n.defaultCss||n.defaultCss,o.tableClass=n.tableClass?n.tableClass:{},o.tableClass.table=n.tableClass.table?n.tableClass.table:"davif-table",o.tableClass.tr=n.tableClass.table?n.tableClass.tr:"davif-tr",o.tableClass.tr_header=n.tableClass.table?n.tableClass.tr_header:"davif-header-row",o.tableClass.tr_row=n.tableClass.tr_row?n.tableClass.tr_row:"davif-row",o.tableClass.td=n.tableClass.td?n.tableClass.td:"davif-cell",o.tableClass.th=n.tableClass.th?n.tableClass.th:"davif-header";var s=d3.keys(r[0]);d3.select(e.selector).select("table").remove();!function(r,s){var l=d3.select(e.selector).append("table").attr("class",o.tableClass.table).attr("width",i).attr("height",a).style("background-color",n.backgroundColor).style("border-collapse","collapse").style("margin-top",n.margin.top+"px").style("margin-bottom",n.margin.bottom+"px").style("margin-left",n.margin.left+"px").style("margin-right",n.margin.right+"px");if(thead=l.append("thead"),tbody=l.append("tbody"),1==o.headerUse){var u=thead.append("tr").attr("class",o.tableClass.tr+" "+o.tableClass.tr_header).selectAll("th").data(s).enter().append("th").attr("class",function(t){return o.tableClass.th+" "+t}).style("color",n.fontColor).style("font-family",n.font).style("font-size",n.fontSize+"px").style("text-align","center").style("padding","5px").text(function(t){return t});o.headerWidth&&u.style("width",function(t,e){return o.headerWidth[e]+"%"})}var c=tbody.selectAll("tr."+o.tableClass.tr_row).data(r).enter().append("tr").attr("class",o.tableClass.tr+" "+o.tableClass.tr_row),f=c.selectAll("td."+o.tableClass.td).data(function(t){return s.map(function(e){return{column:e,value:t[e]}})}).enter().append("td").attr("class",o.tableClass.td).style("color",n.fontColor).style("text-anchor","middle").style("text-align","center").style("padding","5px").style("font-family",n.font).style("font-size",n.fontSize+"px").html(function(t){return t.value});"end"==n.fontAlign&&(n.fontAlign="center"),l.selectAll("th").style("border-top","3px solid #4062f7").style("border-bottom","1px solid #bbb").style("border-left","1px solid #d5d5d5").style("background-color","#e2e2e2").style("color",n.fontColor).style("font-size",n.fontSize+"px").style("font-family",n.font).style("font-color",n.fontColor).style("font-weight","bold"),l.select("th").style("border-left",null),l.selectAll("td").style("border-bottom","1px solid #d5d5d5").style("font-size",n.fontSize+"px").style("font-family",n.font).style("font-color",n.fontColor).style("border-left","1px solid #d5d5d5"),l.selectAll("td:first-child").style("border-left","none"),l.selectAll("tr:nth-child(odd)").style("background-color","#f7f7f7"),0==o.headerUse&&l.selectAll("tr:first-child").style("border-top","1px solid #d5d5d5"),t.setObject(l,n.table),t.setObject(c,n.rows),t.setObject(f,n.cells)}(r,s)}},d=function(){var t=this;this.type="radar",this.sorted=function(e){for(var n=[],r=0;r<e.length;r++){var i=e[r].data,a=0;for(var o in i){var s=i[o];a+=Number(s.value)}n.push({name:i[0].name,value:a})}n.sort(t.sort);var l=[];for(var r in n){s=n[r];for(var o in e){i=e[o];if(s.name==i.name){l.push(i);break}}}return l},this.draw=function(){var t=this.element[0].id,e=this.options.data,n=this.config,r=(this.svg,this.options),i=(r.type,r.width),a=r.height,o=r.margin;i=i-r.margin.left-r.margin.right,a=a-r.margin.bottom-r.margin.top,e=this.parser(e),e=this.sorted(e),r.axis=r.axis?r.axis:{};for(var s=Math.PI/2,l=(n={w:i,h:a,margin:o,labelFactor:r.axis.labelFactor?r.axis.labelFactor:1.25,wrapWidth:r.axis.wrapWidth?r.axis.wrapWidth:60,opacityArea:r.axis.opacityArea?r.axis.opacityArea:.35,dotRadius:r.axis.dotRadius?r.axis.dotRadius:4,opacityCircles:r.axis.opacityCircles?r.axis.opacityCircles:.1,strokeWidth:r.axis.strokeWidth?r.axis.strokeWidth:2,unit:r.axis.unit?r.axis.unit:"건",format:r.axis.format?r.axis.format:".0f",levels:r.axis.levels?r.axis.levels:5},0),u=0;u<e.length;u++)for(var c=0;c<e[u].data.length;c++)e[u].data[c].id=e[u].name,e[u].data[c].value>l&&(l=e[u].data[c].value);var f=e[0].data.map(function(t,e){return t.date}),h=f.length,d=r.height/2-o.bottom-o.top-80,p=d3.format(n.format),g=2*Math.PI/h,y=d3.scaleLinear().range([0,d]).domain([0,l]),v=d3.select(this.element.selector);v.select("svg").remove();var m=v.append("svg").attr("width",n.w+n.margin.left+n.margin.right).attr("height",n.h+n.margin.top+n.margin.bottom).attr("class",t+"-radar").append("g").attr("transform","translate("+(n.w/2+n.margin.left)+","+(n.h/2+n.margin.top)+")"),x=m.append("g").attr("class",t+"-axisWrapper");x.selectAll("."+t+"-levels").data(d3.range(1,n.levels+1).reverse()).enter().append("circle").attr("class",t+"-gridCircle").attr("r",function(t){return d/n.levels*t}).style("fill","#CDCDCD").style("stroke","#CDCDCD").style("fill-opacity",n.opacityCircles),!0===r.axis.label&&x.selectAll("."+t+"-axisLabel").data(d3.range(1,n.levels+1).reverse()).enter().append("text").attr("class",t+"-axisLabel").attr("x",4).attr("y",function(t){return-t*d/n.levels}).attr("dy","0.4em").style("font-size",r.font.size+"px").attr("fill","#737373").text(function(t){return p(l*t/n.levels)+n.unit});var b=x.selectAll("."+t+"-axis").data(f).enter().append("g").attr("class",t+"-axis");b.append("line").attr("x1",0).attr("y1",0).attr("x2",function(t,e){return y(1.1*l)*Math.cos(g*e-s)}).attr("y2",function(t,e){return y(1.1*l)*Math.sin(g*e-s)}).attr("class",t+"-line").style("stroke","#828282").style("stroke-width","0.25px"),b.append("text").attr("class",t+"-legend").style("font-size",r.font.size+"px").attr("text-anchor","middle").attr("dy","0.35em").attr("x",function(t,e){return y(l*n.labelFactor)*Math.cos(g*e-s)}).attr("y",function(t,e){return y(l*n.labelFactor)*Math.sin(g*e-s)}).text(function(t){return t}).call(this.wrap,n.wrapWidth),r.line.type=r.line.type?r.line.type:"cardinal-closed";var _=this.lineType(r.line.type),w=d3.radialLine().curve(_).radius(function(t){return y(t.value)}).angle(function(t,e){return e*g}),k=m.selectAll("."+t+"-radarWrapper").data(e).enter().append("g").attr("class",t+"-radarWrapper");k.append("path").attr("class",t+"-radarArea").attr("d",function(t){return w(t.data)}).style("fill",function(t,e){return t.color?t.color:r.color(t.name)}).style("fill-opacity",n.opacityArea).on("mouseover",function(e,n){v.selectAll("."+t+"-radarArea").transition().duration(r.duration).style("fill-opacity",.1),d3.select(this).transition().duration(200).style("fill-opacity",.7)}).on("mouseout",function(){v.selectAll("."+t+"-radarArea").transition().duration(r.duration).style("fill-opacity",n.opacityArea)}),k.append("path").attr("class",t+"-radarStroke").attr("d",function(t,e){return w(t.data)}).style("stroke-width",n.strokeWidth+"px").style("stroke",function(t,e){return t.color?t.color:r.color(t.name)}).style("fill","none"),k.selectAll("."+t+"-radarCircle").data(function(t){return t.data}).enter().append("circle").attr("class",t+"-radarCircle").attr("r",n.dotRadius).attr("cx",function(t,e){return y(t.value)*Math.cos(g*e-s)}).attr("cy",function(t,e){return y(t.value)*Math.sin(g*e-s)}).style("fill",function(t,e){return t.color?t.color:r.color(t.name)}).style("fill-opacity",.8),m.selectAll("."+t+"-radarCircleWrapper").data(e).enter().append("g").attr("class",t+"-radarCircleWrapper").selectAll("."+t+"-radarInvisibleCircle").data(function(t){return t.data}).enter().append("circle").attr("class",t+"-radarInvisibleCircle").attr("r",1.5*n.dotRadius).attr("cx",function(t,e){return y(t.value)*Math.cos(g*e-s)}).attr("cy",function(t,e){return y(t.value)*Math.sin(g*e-s)}).style("fill","none").style("pointer-events","all").on("mouseover",function(t,e){M.attr("x",this.cx.baseVal.value-10).attr("y",this.cy.baseVal.value-10).transition().style("display","block").text(p(t.value)+n.unit)}).on("mouseout",function(){M.transition().duration(r.duration).style("display","none").text("")});var M=m.append("text").attr("class",t+"-tooltip").attr("x",0).attr("y",0).style("opacity",1).style("font-size","12px").style("display","none").attr("text-anchor","middle").attr("dy","0.35em")}},p=function(){var t=this;this.type="treemap",this.draw=function(){var e=this.element[0].id,n=this.options.data,r=this.svg,i=this.options,a=(i.type,i.width),o=i.height;i.margin,this.config;a=a-i.margin.left-i.margin.right,o=o-i.margin.bottom-i.margin.top;var s=d3.max(n,function(t){return t.value});var l=d3.format(",d"),u=d3.treemap().tile(d3.treemapResquarify).size([a,o]).round(!0).paddingInner(1);!function n(a){r.html("");if(a.length<=0)return;a={name:"tree",children:a};var o=d3.hierarchy(a,function(t){return t.children}).sum(function(t){return t.value}).sort(function(t,e){return e.data.value-t.data.value});u(o);var c=r.selectAll("g").data(o.leaves()).enter().append("g").attr("transform",function(t){return"translate("+t.x0+","+t.y0+")"});var f=c.append("rect").attr("id",function(t){return e+"-node"}).attr("width",function(t){return t.x1-t.x0}).attr("height",function(t){return t.y1-t.y0}).style("fill",function(t){return i.valueRange?function(t,e){var n=i.valueRange,r=e.value/t*100,a="";for(var o in n)r>n[o]&&r<=n[o-1]&&(a=i.colorRange[o-1]);return e.color=a,a}(s,t.data):t.data.color?t.data.color:t.data.category?i.color(t.data.category):i.color(t.data.name)}).style("stroke-width","3px").style("stroke","#fff").on("mouseover",function(t,n){d3.select("#"+e+"-rmv-"+n).style("visibility","visible").attr("transform",function(t){return"translate("+(t.x1-t.x0-15)+",15)"})}).on("mouseout",function(){g.style("visibility","hidden")});t.setObject(f,i.rect);var h=c.append("text").style("font-size",i.font.size+"px").style("fill",function(t){return"function"==typeof i.font.color?i.font.color(t.data):i.font.color}).attr("text-anchor",i.font.align).attr("x",function(t){var e=Number(d3.select(this.parentNode).select("rect").attr("width"));return e/2}).attr("y",function(t){var e=Number(d3.select(this.parentNode).select("rect").attr("height"));return e/2}).text(function(t){return t.data.name});t.setObject(h,i.text);i.click&&(f.style("cursor","pointer").on("click",function(e){t.click(e)}),h.style("cursor","pointer").on("click",function(e){t.click(e)}));var d=c.append("title").text(function(t){return t.data.name+"\n"+l(t.value)});t.setObject(d,i.title);var p=22/3.5;var g=c.append("g").on("click",function(t,e,r,o){var s=[];for(var l in a.children)t.data.name!=a.children[l].name&&s.push(a.children[l]);n(s),i.remove&&i.remove.click&&i.remove.click(t,s)}).on("mouseover",function(t,n){d3.select("#"+e+"-rmv-"+n).style("visibility","visible")}).style("visibility","hidden").style("cursor","pointer").attr("class","btn_remove").attr("id",function(t,n){return e+"-rmv-"+n});g.append("circle").attr("cx",0).attr("cy",0).attr("r",11).style("fill","#fafafa").style("fill-opacity",.5);var y=g.append("g");y.append("line").attr("x1",-11+p).attr("y1",0).attr("x2",11-p).attr("y2",0);y.append("line").attr("x1",0).attr("y1",-11+p).attr("x2",0).attr("y2",11-p);y.style("stroke-width",1.5).style("stroke","#053759");y.attr("transform","rotate (45,0,0)")}(n)}},g=function(){var t=this;this.self=this,this.draw=function(){var e=this.element[0].id,n=this.options.data,r=(this.config,this.svg,this.options),i=(r.type,r.width),a=r.height,o=r.margin;i=i-r.margin.left-r.margin.right,a=a-r.margin.bottom-r.margin.top;var s={};!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.d3=t.d3||{})}(self,function(t){"use strict";t.forceAttract=function(t){var e=void 0,n=void 0,r=void 0,i=void 0;function a(t){for(var r=void 0,a=void 0,o=void 0,s=0;s<e.length;s++)r=e[s],a=n[s],o=i[s],r.vx+=(a[0]-r.x)*o*t,r.vy+=(a[1]-r.y)*o*t}function o(){if(e){i=new Array(e.length);for(var a=0;a<e.length;a++)i[a]=r(e[a],a,e);n=new Array(e.length);for(var o=0;o<e.length;o++)n[o]=t(e[o],o,e)}}return a.initialize=function(t){e=t,o()},a.strength=function(t){return null==t?r:(r="function"==typeof t?t:function(){return+t},o(),a)},a.target=function(e){return null==e?t:(t="function"==typeof e?e:function(){return e},o(),a)},r||a.strength(.1),t||a.target([0,0]),a},Object.defineProperty(t,"__esModule",{value:!0})}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.d3=t.d3||{})}(self,function(t){"use strict";t.forceCluster=function(t){var e=void 0,n=[],r=.1,i=0;function a(t){t*=r*t;var a=void 0,o=void 0,s=void 0,l=void 0,u=void 0;e.forEach(function(e,r){(a=n[r])&&a!==e&&(o=e.x-a.x,s=e.y-a.y,l=Math.sqrt(o*o+s*s),u=e.radius+(a.radius||0),l&&l!=u&&(l=(l-u)/l*t,e.x-=o*=l,e.y-=s*=l,a.x+=(1-i)*o,a.y+=(1-i)*s))})}function o(){if(e){var r=void 0,i=e.length;for(n=new Array(i),r=0;r<i;r++)n[r]=t(e[r],r,e)}}return"function"!=typeof t&&(t=function(){return t}),a.initialize=function(t){e=t,o()},a.centers=function(e){return null==e?t:(t="function"==typeof e?e:function(t,n){return e[n]},o(),a)},a.strength=function(t){return null==t?r:(r=+t,a)},a.centerInertia=function(t){return null==t?i:(i=+t,a)},a},Object.defineProperty(t,"__esModule",{value:!0})});n=this.options.data;var l=r.node.padding?r.node.padding:0,u=r.node.add?Number(r.node.add):0,c=d3.scaleLinear().domain(d3.extent(n,function(t){return+t.value})).range(r.node.range),f=d3.max(n,function(t){return t.value}),h=[];for(var d in n){var p=n[d];p.category||(n[d].value=f/1.5,n[d].category="top",h.push(p.name))}var g=d3.map(),y=0;d3.map(n,function(t){g.has(t.category)||g.set(t.category,y++)});var v=[],m=[],x=r.colorRange?r.colorRange:r.color.range();if(r.valueRagne){for(var d in v=r.valueRagne,x)m.push(Number(d));m.push(x.length-1)}else{var b=d3.min(n,function(t){return t.value});f=d3.max(n,function(t){return t.value});v=[b];var _=r.node.maxLevel?r.node.maxLevel:x.length;for(d=0;d<_;d++)v.push(v[d]+f/_),m.push(Number(d));m.push(_-1)}var w=d3.scaleLinear().domain(v).range(m),k=n.length,M=g.size(),A=d3.range(k).map(function(t){var e=n[t],o=g.get(e.category),l=r.node.top&&r.node.top.r?r.node.top.r:40,f="top"==e.category?l:c(e.value);return e.x=200*Math.cos(o/M*2*Math.PI)+i/2+Math.random(),e.y=200*Math.sin(o/M*2*Math.PI)+a/2+Math.random(),e.cluster=o,e.radius=f+u,(!s[e.category]||e.r<s[e.category].r)&&(s[e.category]=e),e}),T=d3.forceSimulation().force("center",d3.forceCenter(i/2,a/2)).force("attract",d3.forceAttract().target([i/2,a/2]).strength(.01)).force("cluster",d3.forceCluster().centers(function(t){return s[t.cluster]}).strength(.5).centerInertia(.1)).force("collide",d3.forceCollide(function(t){return t.radius+l}).strength(0)).on("tick",function(t){E.attr("cx",function(t){return t.x=Math.max(t.radius,Math.min(i-t.radius,t.x))}).attr("cy",function(t){return t.y=Math.max(t.radius,Math.min(a-t.radius,t.y))}).attr("r",function(t){return t.radius}),S.attr("x",function(t){return t.x=Math.max(t.radius,Math.min(i-t.radius,t.x))}).attr("y",function(t){return t.y=Math.max(t.radius,Math.min(a-t.radius,t.y))})}).nodes(A),C=this.svg.attr("transform","translate("+o.left+","+o.top+")").selectAll("g").data(A).enter().append("g"),E=C.append("circle").attr("id",function(t){if("top"==t.category)return e+"-bubble-top"}).style("fill",function(t){return"top"==t.category?"#fff":(t.level=Math.floor(w(t.value)),r.colorRange?x[t.level]:t.color?t.color:r.color(t.name))}).style("stroke",function(t){if("top"==t.category)return"#44404b"}).style("stroke-width",function(t){if("top"==t.category)return"5px"}).on("click",function(e){r.click&&t.click(e)}).style("cursor","pointer").call(d3.drag().on("start",function(t){d3.event.active||T.alphaTarget(.3).restart();t.fx=t.x,t.fy=t.y}).on("drag",function(t){t.fx=d3.event.x,t.fy=d3.event.y}).on("end",function(t){d3.event.active||T.alphaTarget(0);t.fx=null,t.fy=null}));this.setObject(E,r.node);var N=d3.select("#"+e+"-bubble-top");r.node.top&&this.setObject(N,r.node.top);var R=r.text.size?r.text.size:1,S=C.append("text").attr("transform",function(t){return"translate(0,"+t.radius/10+")"}).text(function(t){return r.text.ellipsis&&t.radius<r.text.ellipsis.radius&&t.name.length>r.text.ellipsis.limit?t.name.substr(0,r.text.ellipsis.limit)+r.text.ellipsis.suffix:t.name}).style("text-anchor","middle").style("fill",function(t){return"top"==t.category?"#000":"function"==typeof r.font.color?r.font.color(t):r.font.color}).style("font-family",r.font.name).style("font-size",function(t){return 2*t.radius<=d3.select(this).node().getComputedTextLength()?t.fs=Math.min(2*t.radius,2*t.radius/this.getComputedTextLength()*10):t.fs=t.radius/4,t.fs+=+R,t.fs+"px"}).style("fill-opacity",function(t,e){"top"==t.category?d3.select(this).style("opacity",1):2*t.r<=d3.select(this).node().getComputedTextLength()?d3.select(this).style("opacity",0):d3.select(this).style("opacity",1)}).style("cursor","pointer").on("click",function(e){r.click&&t.click(e)});if(this.setObject(S,r.text),E.append("title").text(function(e){return"top"==e.category?e.name:e.name+" : "+t.digits(e.value)+"건"}),S.append("title").text(function(e){return"top"==e.category?e.name:e.name+" : "+t.digits(e.value)+"건"}),!r.node.remove||0!=r.node.remove.use){var P=22/3.5,z=C.append("g").on("click",function(t,i,a,o){var s=[];for(var l in n)t.name!=n[l].name&&s.push(n[l]);r.data=s,$("#"+e).visualization(r),r.remove&&r.remove.click&&r.remove.click(t)}).on("mouseover",function(t,n){d3.select("#"+e+"-rmv-"+n).style("visibility","visible")}).style("visibility","hidden").style("cursor","pointer").attr("class","btn_remove").attr("id",function(t,n){return e+"-rmv-"+n}),O=(z.append("circle").attr("cx",0).attr("cy",0).attr("r",11).style("fill","#fafafa").style("fill-opacity",.5),z.append("g"));O.append("line").attr("x1",-11+P).attr("y1",0).attr("x2",11-P).attr("y2",0),O.append("line").attr("x1",0).attr("y1",-11+P).attr("x2",0).attr("y2",11-P),O.style("stroke-width",1.5).style("stroke","#053759"),O.attr("transform","rotate (45,0,0)");var L=function(t){"top"!=t.category&&d3.select(this).select(".btn_remove").style("visibility","visible").attr("transform",function(){var t=d3.select(this.parentNode).select("circle");return"translate("+(Number(t.attr("cx"))+Number(t.attr("r")/1.5))+","+(Number(t.attr("cy"))-Number(t.attr("r")/1.1))+")"})},D=function(){z.style("visibility","hidden")};C.on("mouseover",L).on("mousemove",L).on("mouseout",D).on("mouseleave",D)}var I=d3.timer(function(t){var e=t/150;T.force("collide").strength(.5*Math.pow(e,2)),e>=1&&I.stop()})}},y=function(){this.self=this,this.draw=function(){this.element[0].id;var t=this.options.data,e=(this.config,this.svg),n=this.options,r=(n.type,n.width),i=n.height;n.margin;r=r-n.margin.left-n.margin.right,i=i-n.margin.bottom-n.margin.top;d3.scaleLinear().domain(d3.extent(t,function(t){return+t.value})).range(n.node.range?n.node.range:[1,20]);n.node.add=n.node.add?Number(n.node.add):0,n.node.padding=n.node.padding?Number(n.node.padding):0;var a={children:t},o=d3.pack(a).size([r,i]).padding(n.node.padding+n.node.add),s=(e=this.svg,d3.hierarchy(a).sum(function(t){return t.value})),l=e.selectAll(".node").data(o(s).descendants()).enter().filter(function(t){return!t.children}).append("g").attr("class","node").attr("transform",function(t){return"translate("+t.x+","+t.y+")"});if(n.click&&l.attr("cursor","pointer").on("click",function(t){n.click(t)}),l.append("title").text(function(t){return t.data.name+" : "+t.data.value}),l.append("circle").attr("r",function(t){return t.r+n.node.add}).style("fill",function(t,e){return t.data.category?n.color(t.data.category):n.color(t.data.name)}),l.append("text").attr("dy",".2em").style("text-anchor","middle").text(function(t){var e=t.data.name;return n.text.ellipsis&&e.length>n.text.ellipsis.limit?e.substr(0,n.text.ellipsis.limit)+n.text.ellipsis.suffix:e}).attr("font-size",function(t){return(t.r+n.node.add)/5+n.text.size+"px"}).attr("fill",n.font.color?n.font.color:"white"),n.value&&n.value.show){var u=l.append("text").attr("dy","1.3em").style("text-anchor","middle").text(function(t){return t.data.value}).attr("font-size",function(t){return(t.r+n.node.add)/5+n.text.size+"px"}).attr("fill",n.font.color?n.font.color:"white");n.value&&this.setObject(u,n.value)}}},v=function(){var t=this;this.type="heatmap",this.draw=function(){var e=this.element[0].id,n=this.options,r=n.margin,i=n.width-n.margin.left-n.margin.right,a=n.height-n.margin.bottom-n.margin.top;n.legend.use&&(a-=35);var o=n.data,s=n.axis&&n.axis.name?n.axis.name:["mon","tue","wed","thu","fri","sat","sun"],l=d3.range(24),u=Math.floor(i/l.length),c=Math.floor(a/s.length),f=this.svg.attr("transform","translate("+r.left+","+Number(r.top)+")"),h=[],d=[],p=n.colorRange;if(n.valueRagne){for(var g in h=n.valueRagne,p)d.push(Number(g));d.push(p.length-1)}else{var y=d3.min(o,function(t){return t.value}),v=d3.max(o,function(t){return t.value});for(var g in h=[y],p)h.push(h[g]+v/p.length),d.push(Number(g));d.push(p.length-1)}var m=d3.scaleLinear().domain(h).range(d),x=f.selectAll("."+e+"-dayLabel").data(s).enter().append("text").text(function(t){return t}).attr("x",0).attr("y",function(t,e){return e*c}).style("text-anchor","end").style("font-family",this.options.font).attr("transform","translate(-6,"+c/1.5+")").attr("class",function(t,e){return e>=0&&e<=4?"dayLabel mono axis axis-workweek":"dayLabel mono axis"});n.text&&t.setObject(x,n.text);var b=f.selectAll(".timeLabel").data(l).enter().append("text").text(function(t){var e;return t=12==(e=t)?e+"pm":0==e?"0am":e>12?e-12:e}).attr("x",function(t,e){return e*u}).attr("y",0).style("font-family",this.options.font).style("text-anchor","middle").attr("transform","translate("+u/2+", -6)").attr("class",function(t,e){return e>=8&&e<=17?"timeLabel mono axis axis-worktime":"timeLabel mono axis"});n.text&&t.setObject(b,n.text);var _=f.selectAll(".hour").data(o).enter().append("rect").attr("x",function(t){return(t.hour-1)*u}).attr("y",function(t){return(t.day-1)*c}).attr("class",e+"-hour").attr("width",u).attr("height",c).style("stroke","white").style("stroke-opacity",.6).style("fill",function(t){return t.color||(t.color=p[Math.floor(m(t.value))]),t.color}).on("click",function(e){t.click(e)});n.rect&&t.setObject(d3.selectAll("."+e+"-hour"),n.rect),n.getRange&&n.getRange(h,p),n.text.suffix=n.text.suffix?n.text.suffix:"",_.append("title").text(function(t){return t.value+n.text.suffix})}},m=function(){var t=this;this.type="hierarchy_tree",this.draw=function(){var e,n=this.element[0].id,r=this.options,i=r.margin,a=r.width-r.margin.left-r.margin.right,o=(r.height,r.margin.bottom,r.margin.top,r.color,this.parseHierarchyJson()),s=r.node.interval?r.node.interval:20,l=.15*(a-i.left-i.right),u=0,c=d3.linkHorizontal().x(function(t){return t.y}).y(function(t,e){return t.x}),f=this.svg.attr("transform","translate("+i.left+","+i.top+")");if((e=d3.hierarchy(o)).x0=0,e.y0=0,!1===r.collapse.open){!function t(e){for(var n in e.children){var r=e.children[n];r.children&&(t(r),r._children=r.children,r.children=null)}}(e)}function h(a){var o=e.descendants(),h=Math.max(r.height,o.length*s+i.top+i.bottom);d3.select("#"+n).transition().duration(r.duration).attr("height",h),d3.select("#"+n).select("svg").transition().duration(r.duration).attr("height",h);var p=-1,g=null;e.eachBefore(function(t){g&&(g.depth==t.depth?p++:g.depth>t.depth&&(p+=2)),t.id=t.id||(t.id=++u),t.x=p*s,t.y=t.depth>0?t.depth*r.depthLength[t.depth-1]:0,g=t});var y=f.selectAll(".link").data(e.links(),function(t){return t.target.id}),v=y.enter().insert("path","g").attr("class","link").style("fill","none").style("stroke","#9ecae1").style("stroke-width",1.5).attr("d",function(t,e){var n={x:a.x0,y:a.y0};return c({source:n,target:n})}).transition().duration(r.duration).attr("d",c);r.link&&t.setObject(v,r.link),y.transition().duration(r.duration).attr("d",c),y.exit().transition().duration(r.duration).attr("d",function(t,e){var n={x:a.x,y:a.y};return c({source:n,target:n})}).remove();var m=f.selectAll(".node").data(o,function(t){return t.id||(t.id=++u)}),x=m.enter().append("g").attr("class","node").attr("transform",function(t){return"translate("+a.y0+","+a.x0+")"}).style("opacity",0);function b(t,e){for(var i in r.parent[t].style)d3.selectAll("."+n+"-htree-parent-"+t).style(i,function(e){return r.parent[t].style[i]});for(var i in r.parent[t].attr)d3.selectAll("."+n+"-htree-parent-"+t).attr(i,function(e){return r.parent[t].attr[i]})}var _=x.append("rect").attr("class",function(t){return t.parent?n+"-htree-rect":n+"-htree-parent-rect"}).attr("y",-s/2).attr("height",s).attr("width",l).style("fill",function(t){return t._children?"#aec7e8":"#fff"}).style("fill-opacity",1).style("stroke","#3182bd").style("stroke-width",1.5).style("cursor","pointer").on("click",d);r.rect&&t.setObject(_,r.rect),r.parent.rect&&b("rect");var w=x.append("text").attr("class",function(t){return t.parent?n+"-htree-text":n+"-htree-parent-text"}).attr("y",0).attr("x",l/2).attr("dy",".35em").style("text-anchor","middle").style("cursor","pointer").attr("data-value",function(t){return t.data.name}).text(function(t){return t.data.name}).on("click",d);function k(e){e.append("title").text(function(e){return r.node.title?r.node.title(e):e.data.value?e.data.name+" : "+t.digits(e.data.value)+"건":e.data.name})}r.text&&t.setObject(w,r.text),r.parent.text&&(d3.selectAll("."+n+"-htree-parent-text").attr("y",function(t){if(!t.parent)return(d3.select(this.parentNode).select("rect").attr("height")-20)/2-Number(r.parent.text.style["font-size"].replace("px",""))}),b("text")),k(_),k(w),x.transition().duration(r.duration).attr("transform",function(t,e){return t.y,"translate("+t.y+","+t.x+")"}).style("opacity",1),m.transition().duration(r.duration).attr("transform",function(t,e){return"translate("+t.y+","+t.x+")"}).style("opacity",1).select("rect").style("fill",function(t){return t.parent&&r.rect.style.fill?r.rect.style.fill(t):!t.parent&&r.parent.rect.style.fill?r.parent.rect.style.fill:t._children?"#aec7e8":"#fff"}).style("stroke",function(t){if(t.parent)return r.rect.style.stroke?r.rect.style.stroke(t):"#3182bd"}),m.exit().transition().duration(r.duration).attr("transform",function(t){return"translate("+a.y+","+a.x+")"}).style("opacity",0).remove(),e.each(function(t,e){t.x0=t.x,t.y0=t.y})}function d(e){if(0==e.depth||r.node.limitLevel&&e.depth>=r.node.limitLevel)r.click&&t.click(e);else if(e.children&&e.children.length>0)e._children=e.children,e.children=null,h(e),r.click&&t.click(e);else if(r.collapse.data&&r.collapse.data.conditions){var i=d3.select(this.parentNode).select("text"),a=Number(i.attr("x"))+Number(i.node().getComputedTextLength());i.attr("y");if(r.collapse.loading.src){var o=d3.select(this.parentNode).append("image").attr("id",n+"-"+e.data.id+"-loading").attr("width",20).attr("x",a).attr("y",-20).attr("xlink:href",r.collapse.loading.src);t.setObject(o,r.collapse.loading)}t.collapse(e,h)}else e.children=e._children,e._children=null,h(e),r.click&&t.click(e)}h(e)}},x=function(){var t=this;this.type="update_bar",this.draw=function(){var e=this.element[0].id,n=this.options,r=n.margin,i=(n.type,n.data),a=n.width-r.left-r.right,o=n.height-r.top-r.bottom,s={};i=i.reduce(function(t,e,n){return e.value.isInteger()||(e.value=Number(e.value)),s[e.date]?s[e.date].push(e):s[e.date]=[e],s});var l=Object.keys(i).map(function(t){return t}),u=l[l.length-1],c=l[0],f=n.rect&&!1===n.rect.sort?i[c]:g(i[c]),h=f.map(v),d=5,p=function(t,e){return 40*e};function g(t){return t.sort(function(t,e){return e.value-t.value})}function y(t){return t.value}function v(t){return t.name}var m=d3.scaleLinear().range([0,a]).domain([0,d3.max(i[c],function(t){return t.value})]),x=d3.scaleBand().rangeRound([0,o],.1).padding(.1);function b(t,e,n){var r=d3.max(e,function(t){return t.value});m.domain([0,r]);var i=t.select(".axis--x");i.empty()&&(i=t.append("g").attr("class","axis axis--x")),i.transition(n).attr("transform","translate("+d+","+o+")").call(d3.axisBottom(m)),i.select("path").style("display","none")}function _(t,e,n){var r=t.select(".axis--y");r.empty()&&(r=t.append("g").attr("class","axis axis--y")),r.transition(n).call(d3.axisLeft(x)).selectAll("g").delay(p),r.select("path").style("display","none")}function w(e,r,i){var a=e.select(".bars-g");a.empty()&&(a=e.append("g").attr("class","bars-g"));var o=a.selectAll(".bar").data(r,v),s=a.selectAll("text").data(r,v);o.exit().remove(),s.exit().remove();var l=o.enter().append("rect").attr("class","bar").attr("x",d).style("fill-opacity",0).merge(o).transition(i).style("fill-opacity",.9).style("fill",function(t){return t.color?t.color:t.category?n.color(t.category):n.color?n.color(t.name):"#3182bd"}).attr("y",function(t){return x(v(t))}).attr("width",function(t){return m(y(t))}).attr("height",x.bandwidth()).delay(p);n.rect&&t.setObject(l,n.rect);var u=s.enter().append("text").attr("class","bar-text").style("fill","#777").style("font-weight","bold").style("font-size","12px").merge(s).transition(i).attr("text-anchor","start").attr("x",function(t){return m(y(t))+10}).attr("y",function(t){return x(v(t))+x.bandwidth()/2}).tween("text",function(t){var e=d3.select(this),n=e.text(),r=d3.interpolateRound(n,t.value);return function(t){e.text(r(t))}}).delay(p);n.text&&t.setObject(u,n.text)}var k=this.svg.attr("transform","translate("+r.left+","+r.top+")");x.domain(h),b(k,f),_(k),w(k,f),function(r,i,s){var l=r.append("text").attr("transform","translate("+a/1.4+","+o/1.05+")").attr("class",e+"-bar-date").attr("dy",".1em").attr("dx","-3em").style("opacity",.5).style("fill","#b1b1b1").text(function(t){return i[0].date});n.date&&t.setObject(l,n.date)}(k,f),n.rotation=null!=n.rotation&&n.rotation,n.interval=null==n.interval?1e3:n.interval;var M=1,A=d3.interval(function(){var t=d3.transition().duration(n.duration),r=l[M++],a=n.rect&&!1===n.rect.sort?i[r]:g(i[r]);f=a,x.domain(f.map(v)),b(k,f,t),_(k,0,t),w(k,f,t),function(t,n,r){t.select("."+e+"-bar-date").transition(r).attr("opacity",.5).text(function(t){return n[0].date})}(k,f,t),r===u&&(n.rotation?M=1:A.stop())},n.interval)}},b=function(){var t=this;this.type="horizontal_bar",this.draw=function(){var e=this.options,n=e.margin,r=(e.type,e.data),i=e.width-n.left-n.right,a=e.height-n.top-n.bottom,o=r.map(c),s=5,l=function(t,e){return 40*e};function u(t){return t.value}function c(t){return t.name}var f=d3.scaleLinear().range([0,i]).domain([0,d3.max(r,function(t){return t.value})]),h=d3.scaleBand().rangeRound([0,a],.1).padding(.1);var d,p,g,y=this.svg.attr("transform","translate("+n.left+","+n.top+")");h.domain(o),function(t,n,r){var i=d3.max(n,function(t){return t.value});f.domain([0,i]);var o=t.select(".axis--x");o.empty()&&(o=t.append("g").attr("class","axis axis--x")),e.x&&!1===e.x.gridUse&&o.style("display","none"),o.transition(r).attr("transform","translate("+s+","+a+")").call(d3.axisBottom(f))}(y,r),(g=(d=y).select(".axis--y")).empty()&&(g=d.append("g").attr("class","axis axis--y")),g.transition(p).call(d3.axisLeft(h)).selectAll("g").delay(l),g.select("path").style("display","none"),function(n,r,i){var a=n.select(".bars-g");a.empty()&&(a=n.append("g").attr("class","bars-g"));var o=a.selectAll(".bar").data(r,c),d=a.selectAll("text").data(r,c);o.exit().remove(),d.exit().remove();var p=o.enter().append("rect").attr("class","bar").attr("x",s).style("fill-opacity",0).on("mouseout",function(){v.style("display","none")}).on("mousemove",m);e.click&&p.on("click",function(e){t.click(e)}).style("cursor","pointer"),p.merge(o).transition(i).style("fill-opacity",.9).style("fill",function(t){return t.color?t.color:(t.category?t.color=e.color(t.category):e.color?t.color=e.color(t.name):t.color="#3182bd",t.color)}).attr("y",function(t){return h(c(t))}).attr("width",function(t){return f(u(t))}).attr("height",h.bandwidth()).delay(l),t.setObject(p,e.rect);var g=d.enter().append("text").attr("class","bar-text").style("fill","#777").style("font-weight","bold").style("font-size","12px").merge(d).transition(i).attr("text-anchor","start").attr("x",function(t){return f(u(t))+10}).attr("y",function(t){return h(c(t))+h.bandwidth()/2}).tween("text",function(t){var e=d3.select(this),n=e.text(),r=d3.interpolateRound(n,t.value);return function(t){e.text(r(t))}}).delay(l);t.setObject(g,e.text)}(y,r);var v=this.drawTooltip(this.svg,1);function m(e){var n=d3.mouse(this)[0],i=d3.mouse(this)[1];t.moveTooltip(v,r,e,n,i,"bar")}}},_=function(){var t=this;this.type="radar_table",this.draw=function(){var e=this.element[0].id,n=this.options.data,r=this.config,i=(this.svg,this.options),a=(i.type,i.width),o=i.height,s=i.margin;if(a=a-i.margin.left-i.margin.right,o=o-i.margin.bottom-i.margin.top,(n=this.parser(n)).length>1){var l={name:"blank",data:JSON.parse(JSON.stringify(n[0].data)),total:0};for(var u in l.data)l.data[u].value=0;n.push(l)}i.rotate=i.rotate?i.rotate:0;var c=Math.PI/(2+i.rotate),f=(r={w:a,h:o,margin:s,labelFactor:i.axis.labelFactor?i.axis.labelFactor:1.25,wrapWidth:i.axis.wrapWidth?i.axis.wrapWidth:60,opacityArea:i.axis.opacityArea?i.axis.opacityArea:.35,dotRadius:i.axis.dotRadius?i.axis.dotRadius:4,opacityCircles:i.axis.opacityCircles?i.axis.opacityCircles:.1,strokeWidth:i.axis.strokeWidth?i.axis.strokeWidth:2,unit:i.axis.unit?i.axis.unit:"건",format:i.axis.format?i.axis.format:".0f",levels:i.axis.levels?i.axis.levels:5},d3.max(n,function(t){return d3.max(t.data,function(t){return t.value})})),h=d3.min(n,function(t){return d3.min(t.data,function(t){return t.value})}),d={},p=[];for(var u in n){var g=n[u];for(var y in g.data){var v=g.data[y];d[v.key]||(d[v.key]=0),d[v.key]+=v.value,p.push(v.category)}}var m=p.reduce(function(t,e){return-1===t.indexOf(e)&&t.push(e),t},[]),x=n.map(function(t,e){return t.name}).reverse(),b=x.length,_=m.length,w=i.height/2-s.bottom-s.top-80,k=(d3.format(r.format),2*Math.PI/_);i.radius&&(w+=i.radius);var M=w/b/4,A=d3.scaleLinear().domain([h,f]).range(i.node.range?i.node.range:[0,15]),T=d3.scaleLinear().range([0,w]).domain([0,f]),C=d3.scaleBand().range([w/(1==b?2:b),w+M]).domain(x),E=d3.select(this.element.selector);E.select("svg").remove();var N=E.append("svg").attr("width",r.w+r.margin.left+r.margin.right).attr("height",r.h+r.margin.top+r.margin.bottom).attr("class","radar").append("g").attr("transform","translate("+(r.w/2+r.margin.left)+","+(r.h/2+r.margin.top)+")"),R=N.append("g").attr("class",e+"axisWrapper");if(i.outer){var S=R.append("circle").attr("r",function(t){return i.outer.r||(i.outer.r=1.25),w/(b+1)*(b+i.outer.r)}).style("fill","#f3baac").style("stroke","#f3baac").style("stroke-width",30);if(i.outer.half&&1==i.outer.half.use){var P=R.append("path").attr("transform","translate(0, 0)").attr("d",d3.arc().innerRadius(w/(b+1)*(b+i.outer.r)+i.outer.half.r).outerRadius(0).startAngle(3.14).endAngle(6.28)).attr("fill","#5ed8ec");i.outer.half&&this.setObject(P,i.outer.half)}i.outer&&this.setObject(S,i.outer)}var z=R.selectAll("."+e+"gridCircle").data(d3.range(1,b+2).reverse()).enter().append("circle").attr("class",e+"gridCircle").attr("r",function(t){return w/(b+1)*t}).style("fill","#fff").style("stroke","#CDCDCD").style("fill-opacity",r.opacityCircles);i.grid&&this.setObject(z,i.grid);var O=R.selectAll("."+e+"axis").data(m).enter().append("g").attr("class",e+"axis"),L=O.append("line").attr("x1",0).attr("y1",0).attr("x2",function(t,e){return T(1.1*f)*Math.cos(k*e-c)}).attr("y2",function(t,e){return T(1.1*f)*Math.sin(k*e-c)}).attr("class",e+"line").style("stroke","#828282").style("stroke-width","0.25px");i.axis&&i.axis.line&&this.setObject(L,i.axis.line);var D=O.append("text").attr("class",e+"legend").style("font-size","11px").attr("text-anchor","middle").attr("dy","0.35em").attr("x",function(t,e){return T(f*r.labelFactor)*Math.cos(k*e-c)}).attr("y",function(t,e){return T(f*r.labelFactor)*Math.sin(k*e-c)}).text(function(t){return t}).call(this.wrap,r.wrapWidth);if(D.append("title").text(function(t){return t}),i.axis&&i.axis.text&&this.setObject(D,i.axis.text),i.center){var I=R.append("g");if(I.append("circle").attr("r",function(t){return i.center.r?i.center.r:w/(b+1)*1.1}).style("fill","#fff").style("stroke","#fff").style("fill-opacity",1),i.center.line&&this.setObject(B,i.center.line),i.center.text.name){var B=I.append("text").attr("y",0).attr("dy","0.4em").style("font-size","10px").attr("fill","#737373").text(i.center.text.name);B.attr("x",function(t){return-this.getComputedTextLength()}),i.center.text&&this.setObject(B,i.center.text)}}var j=this.lineType(i.line.type);d3.radialLine().curve(j).radius(function(t){return T(t.value)}).angle(function(t,e){return e*k});function Y(t){return i.node.pos?C(t.name)+(M-i.node.pos):i.node.range?C(t.name)+(M-i.node.range[0]):C(t.name)+M}var H=N.selectAll("."+e+"-radarWrapper").data(n).enter().append("g").attr("class",e+"-radarWrapper").selectAll("."+e+"-radar-circle").data(function(t){return t.data}).enter().append("circle").attr("class",e+"-radar-circle").attr("id",function(t){if(i.node.id)return i.node.id(t)}).attr("r",0).attr("cx",function(t,e){return Y(t)*Math.cos(k*e-c)}).attr("cy",function(t,e){return Y(t)*Math.sin(k*e-c)}).style("fill",function(t,e){return t.color?t.color:i.color(t.name)}).style("cursor","pointer").style("fill-opacity",.8);i.node&&this.setObject(H,i.node),H.append("title").text(function(e){var n=e.name,r=0==e.value?0:e.value/d[e.key]*100;return r=Math.floor(r),e.value&&(n+=" : "+r+"%("+t.digits(e.value)+"건)"),n}),H.transition().duration(i.duration).attr("r",function(t,e){return 0==t.value?0:A(t.value)});N.selectAll("."+e+"radarCircleWrapper").data(n).enter().append("g").attr("class",e+"radarCircleWrapper"),N.append("text").attr("class",e+"tooltip").attr("x",0).attr("y",0).style("font-size","12px").style("display","none").attr("text-anchor","middle").attr("dy","0.35em")}},w=function(){var t=this;this.type="map",this.draw=function(){var e=this.element[0].id,n=this.options.data,r=(this.config,this.svg,this.options),i=(r.type,r.width),a=r.height;r.margin;i=i-r.margin.left-r.margin.right,a=a-r.margin.bottom-r.margin.top;r.color;if(n[0]&&n[0].value){var o=0;d3.map(n,function(t){o+=t.value}),d3.map(n,function(t){t.percent=t.value/o*100})}var s={"전국":{center:[126.8,35.95],scale:5600},seoul:{center:[126.93,37.5],scale:59e3},incheon:{center:[126.35,37.44],scale:3e4},"gyeonggi-do":{center:[126.95,37.55],scale:17e3},"gangwon-do":{center:[127.9,37.8],scale:1e4},"gyeongsangbuk-do":{center:[128.5,36.3],scale:12e3},"gyeongsangnam-do":{center:[128.25,35.5],scale:15e3},ulsan:{center:[129.18,35.5],scale:55e3},sejongsi:{center:[127.15,36.5],scale:6e4},busan:{center:[129,35.1],scale:5e4},"chungcheongbuk-do":{center:[127.65,36.5],scale:15e3},"chungcheongnam-do":{center:[126.7,36.6],scale:15e3},daejeon:{center:[127.4,36.33],scale:5e4},"jeollabuk-do":{center:[127,35.8],scale:17e3},"jeollanam-do":{center:[126.6,34.8],scale:12e3},"jeju-do":{center:[126.6,33.35],scale:3e4},daegu:{center:[128.5,35.8],scale:55e3},gwangju:{center:[126.85,35.15],scale:6e4}},l=skorea_topo_simple_json,u=d3.format(","),c=d3.tip(this.type).attr("class",e+"-d3-tip");d3.scaleSqrt();!function o(f,h){r.map.x&&(s[f].center[0]=s[f].center[0]+r.map.x);r.map.y&&(s[f].center[1]=s[f].center[1]+r.map.y);f=f.toLowerCase();var d=d3.geoMercator().center(s[f].center).scale(s[f].scale).translate([i/2,a/2]);var p=d3.geoPath().projection(d);var g=d3.geoGraticule();d3.select("#"+e).select("svg").remove();var y=d3.select("#"+e).append("svg").attr("width",i).attr("height",a);y.append("path").datum(g).attr("class",e+"-graticule").attr("d",p);var v="전국"==f?"provinces":"municipalities";area=l[v];var m=topojson.feature(area,area.objects["skorea_"+v+"_geo"]).features;var x=d3gis.getAreaList(f);var b=[];if("전국"!=f)for(var _ in m){var w=m[_],k=w.properties;for(var M in x)if(k.name==x[M]||k.name.indexOf(x[M])>=0){if("incheon"==f&&("11020"==k.code||"11040"==k.code||"11250"==k.code||"11230"==k.code||"23320"==k.code||"31104"==k.code||"31103"==k.code))continue;if("seoul"==f&&("26010"==k.code||"25020"==k.code||"23010"==k.code))continue;if("ulsan"==f&&"21080"==k.code)continue;b.push(w);break}}else b=m;var A=y.selectAll("."+e+"-country").data(b).enter().insert("path","."+e+"-graticule").attr("class",e+"-country").attr("d",p).attr("id",function(t){return e+"-path-"+t.properties.code}).style("fill","#ddd").style("stroke","#999").style("cursor","pointer").on("click",C);var T=y.selectAll("."+e+"-gis-text").data(b).enter().append("text").attr("class",e+"-gis-text").attr("id",function(t){return e+"-text-"+t.properties.code}).attr("transform",function(t){var e=p.centroid(t);switch(t.properties.name){case"경기도":e[1]+=35;break;case"인천광역시":e[1]+=15;break;case"충청남도":e[1]+=12}return"translate("+e[0]+","+e[1]+")"}).attr("dy",".35em").style("text-anchor","middle").style("font-size","12px").style("font-weight","bold").style("fill","#434656").style("cursor","pointer").text(function(t){return d3gis.textFilter(t.properties.name)}).on("click",C);T.style("opacity",r.text.mouseover?0:1);r.text.color&&T.style("fill",function(t){return r.text.color(t)});r.tooltip.enabled&&y.call(c);function C(e){if(c.hide(),r.click&&r.click(e,f),r.beforeClick&&r.beforeClick(e),"전국"==f&&r.clicked){var n={};n.d=e,n.zone=f,n.type=t.type,n.key=e.properties.name_eng.toLowerCase(),t.clicked(n,o)}}function E(t){if(r.text.mouseover){var n=d3.select(this).attr("id").split("-");d3.select("#"+e+"-text-"+n[n.length-1]).style("opacity",1)}r.tooltip.enabled&&c.show(t)}function N(t){if(r.text.mouseover){var n=d3.select(this).attr("id").split("-");d3.select("#"+e+"-text-"+n[n.length-1]).style("opacity",0)}r.tooltip.enabled&&c.hide(t)}!function(e){if(!e)return;c.offset([-10,0]).html(function(t){for(var n in e)if(("전국"==f?t.properties.name_eng.toLowerCase():t.properties.name)==e[n].name&&e[n].value)return t.properties.name+": "+u(e[n].value);return t.properties.name}),A.style("fill",function(t){for(var n in e)if(("전국"==f?t.properties.name_eng.toLowerCase():t.properties.name).indexOf(e[n].name)>=0){if(e[n].color){t.color=e[n].color;break}t.color=r.color(d3gis.getLevel(e[n].percent));break}return t.color||(t.color=r.map.defaultColor?r.map.defaultColor:"#ddd"),t.color}).on("mouseover",E).on("mouseout",N),T.on("mouseover",E).on("mouseout",N),r.map&&t.setObject(A,r.map);r.text&&t.setObject(T,r.text)}(h);if(r.map.back){var R=d3.select(r.map.back);"전국"==f?R.style("display","none"):R.style("display","block").on("click",function(){o("전국",n)})}}(r.map.area?r.map.area:"전국",n)}},k=function(){var t=this;this.draw=function(){var e=this.element[0].id,n=this.options.data,r=(this.config,this.svg),i=this.options,a=(i.type,i.width),o=i.height;i.margin;a=a-i.margin.left-i.margin.right,o=o-i.margin.bottom-i.margin.top;var s=i.color,l=d3.format(","),u=d3.tip("map").attr("class",e+"-d3-tip").offset([-10,0]).html(function(t){return i.tooltip.html?i.tooltip.html(t):t.properties.name+": "+l(t.value)}),c=(r=this.svg,d3.geoPath()),f=a/6.4,h=d3.geoMercator().scale(f).translate([a/2,o/1.5]).rotate([200,0,0]),d=(c=d3.geoPath().projection(h),{});n.forEach(function(t){for(var e in d[t.id]={},t)d[t.id][e]=t[e]});var p=[];world_features.features.forEach(function(e){var n=d[e.id];if(!1===t.isNull(n))for(var r in n)e[r]=n[r],"value"==r&&p.push(+n[r]);else e.value=0});for(var g=((p=d3.extent(p))[1]-p[0])/(i.color.range().length-1),y=[],v=0;v<i.color.range().length;v++)y.push(p[0]+g*v);s=d3.scaleThreshold().domain(y).range(i.color.range());var m=r.append("rect").attr("class","overlay").attr("width",a).attr("height",o).attr("fill","none").style("pointer-events","all"),x=r.append("g").attr("class",e+"-countries").selectAll("path").data(world_features.features).enter().append("path").attr("id",function(t){return e+"-path-"+t.id}).attr("d",c).style("fill",function(t){return t.color?t.color:s?s(t.value):i.color(t.id)}).style("stroke","white").style("stroke-width",1.5).style("opacity",.8).style("stroke","white").style("stroke-width",.3).on("mouseover",function(t){_(t)}).on("mouseout",function(t){w(t)});i.map&&t.setObject(x,i.map),i.tooltip.enabled&&r.call(u),i.click&&x.style("cursor","pointer").on("click",function(t){i.click(t)});var b=this.drawTooltip(r),_=function(e){var r=d3.mouse(m.node())[0],a=d3.mouse(m.node())[1];e.data&&(b.transition().duration(i.duration).style("display","block"),t.moveTooltip(b,n,e,r,a,"world_map"))},w=function(t){t.data&&(d3.select("."+e+"-tip-g").selectAll("text").remove(),b.transition().duration(i.duration).style("display","none"))}}},M=function(){var t=this;this.type="quad_scatter",this.draw=function(){var e=this.element[0].id,n=this.options.data,r=(this.config,this.svg),i=this.options,a=(i.type,i.width),o=i.height,s=i.margin;a=a-i.margin.left-i.margin.right,o=o-i.margin.bottom-i.margin.top,i.axis.inner=null==i.axis.inner||i.axis.inner;(r=this.svg.attr("transform","translate("+s.left+","+s.top+")")).append("rect").attr("width",a).attr("height",o).style("fill","#fff").style("pointer-events","all");var l=Number(i.avg),u=d3.max(n,function(t){return Math.abs(t.x)+Math.abs(t.x)/10}),c=d3.extent(n,function(t){return t.y}),f=d3.max(c,function(t){return t-l}),h=c[0]<l-f?c[0]:l-f,d=c[1]>l+f?c[1]:l+f,p=d3.max([Math.abs(l-h),Math.abs(l-d)],function(t){return t});d=l+p,0==(h=l-p)&&0==d&&(h=.1,d=-.1);var g=[-u,u],y=[h,d];this.drawAxis(n,g,y);var v=this.xScale,m=this.yScale,x=this.xAxis,b=this.yAxis,_=this.x,w=this.y;this.styleAxis(v,m,x,b);var k={fill:"#545454","font-size":"12px"},M=_.append("text").attr("x",a-5).attr("y",-5).style("text-anchor","end").styles(k).text("평균증가율");i.text.increase&&t.setObject(M,i.text.increase);var A=w.append("text").attr("x",40).attr("y",0).attr("dy",".71em").style("text-anchor","start").styles(k).text("평균언급량");i.text.buzz&&t.setObject(A,i.text.buzz);var T=r.append("line").attr("id",e+"-avg-line").attr("x1",a).attr("y1",m(l)).attr("y2",m(l)).style("stroke-width","2px").style("stroke-dasharray","7,3").style("stroke","#8ccdfb");i.line.avg&&t.setObject(T,i.line.avg);var C=r.append("text").attr("id",e+"-avg-title").attr("x",a-8).attr("y",m(l)-17).attr("dy",".71em").style("text-anchor","end").styles(k).text("평균값");function E(t,e,n,r,i,a){e!=v(0)&&r!=m(l)&&Q.append("line").attr("id",t).attr("x1",e).attr("x2",n).attr("y1",r).attr("y2",i).style("stroke-width","1px").style("stroke","#E6E4E4").style("opacity",a)}function N(t,e,n,r,i,a){Q.select(t).attr("x1",e).attr("x2",n).attr("y1",r).attr("y2",i).style("opacity",a)}function R(t,e,n,r){var i=0;for(var a in n){0==n[a].status&&i++}var o=tt.append("g").attr("id",r).attr("transform","translate("+t+", "+e+")").style("cursor","pointer");o.on("mouseover",function(){P.mouseover(r,i)}).on("mouseout",function(){P.mouseout(r)}).on("mousemove",function(){P.mouseover(r,i)}).on("mouseleave",function(){P.mouseout(r)}),o.append("text").text("┼").attr("id",r+"-plus").style("font-size","12px").style("fill","#8ccdfb").style("stroke","#8ccdfb").style("stroke-width","1.5px").attr("width",12).attr("height",12).style("visibility",i>0?"visible":"hidden").attr("x",-5).attr("y",3),o.append("rect").attr("class",r+"-bg").style("fill","#8ccdfb").attr("rx",10).attr("ry",10).attr("width",36).attr("height",16).style("visibility","hidden").attr("x",-17).attr("y",-8),o.append("text").attr("class",r+"-text").style("text-anchor","middle").attr("x",1).attr("y",5).attr("fill","#fff").style("font-family","'Malgun Gothic', Arial, sans-serif").style("font-weight","bold").style("font-size","13px").style("visibility","hidden").text(i)}function S(t,e,n,r){var i=0;for(var a in n){0==n[a].status&&i++}var o=tt.select("#"+r);o.attr("transform","translate("+t+", "+e+")").on("mouseover",function(t){P.mouseover(r,i)}).on("mouseout",function(t){P.mouseout(r)}),o.select("#"+r+"-plus").style("visibility",i>0?"visible":"hidden"),o.select("."+r+"-bg").style("visibility","hidden"),o.select("."+r+"-text").style("visibility","hidden").text(i)}i.text.avg&&t.setObject(C,i.text.avg);var P={mouseover:function(t,e){0!=e&&(d3.select("#"+t).transition().duration(150).selectAll("text").style("visibility","visible"),d3.select("#"+t).transition().duration(150).select("rect").style("visibility","visible"))},mouseout:function(t){d3.selectAll("#"+t).selectAll("text").transition().duration(150).style("visibility","hidden"),d3.selectAll("."+t+"-bg").transition().duration(150).style("visibility","hidden"),d3.selectAll("#"+t+"-plus").transition().duration(150).style("visibility","visible")}},z=i.division?i.division:8,O=10,L={trend:[],puberty:[],emerging:[],decline:[]};function D(t){for(var e=0;e<z;e++){t[e]=[];for(var n=0;n<z;n++)t[e][n]=0}}function I(t,e){return 0==t&&(e+=e/10),e}function B(t,e){return t==z-1&&(e+=e/10),e}function j(t,e){return t==z-1&&(0==e&&(e=-1),e-=e/10),e}for(var Y in D(L.trend),D(L.puberty),D(L.emerging),D(L.decline),n){var H=n[Y];if(H.x||(H.x=0),H.y||(H.y=0),H.x=+H.x,H.y=+H.y,H.y>=l&&H.x>=0){H.signal="trend";for(Y=0;Y<z;Y++){for(var U=!1,q=0;q<z;q++){var F=0+u/z*q,W=l+(d-l)/z*Y,$=l+(d-l)/z*(Y+1);(X=0+u/z*(q+1))>=0&&(X=B(q,X)),$>=0&&($=B(Y,$)),X<0&&(X=B(q,X)),$<0&&($=B(Y,$));var G=H.x>=F&&H.x<X,V=H.y>=W&&H.y<$;if(G&&V){J(H,Y,q),U=!0;break}}if(U)break}}else if(H.y>=l&&H.x<0){H.signal="puberty";for(Y=0;Y<z;Y++){for(U=!1,q=0;q<z;q++){var X=u/z*(q+1)-u;W=l+(d-l)/z*Y,$=l+(d-l)/z*(Y+1);F=I(q,F=u/z*q-u),$=B(Y,$);G=H.x>=F&&H.x<X,V=H.y>=W&&H.y<$;if(G&&V){J(H,Y,z-q-1),U=!0;break}}if(U)break}}else if(H.y<l&&H.x>=0){H.signal="emerging";for(Y=0;Y<z;Y++){for(U=!1,q=0;q<z;q++){F=0+u/z*q,W=l-(l-h)/z*Y,$=l-(l-h)/z*(Y+1);(X=0+u/z*(q+1))>=0&&(X=B(q,X)),$>=0&&($=j(Y,$)),$<=0&&($=B(Y,$));G=H.x>=F&&H.x<X,V=H.y<=W&&H.y>$;if(G&&V){J(H,Y,q),U=!0;break}}if(U)break}}else if(H.y<l&&H.x<0){H.signal="decline";for(Y=0;Y<z;Y++){for(U=!1,q=0;q<z;q++){F=u/z*q-u,W=l-(l-h)/z*Y,$=l-(l-h)/z*(Y+1);(X=u/z*(q+1)-u)<0&&(F=I(q,F)),$>=0&&($=j(Y,$));G=H.x>=F&&H.x<X,V=H.y<=W&&H.y>$;if(G&&V){J(H,Y,z-q-1),U=!0;break}}if(U)break}}}function J(t,e,n){L[t.signal][e]||(L[t.signal][e]=new Array(z),L[t.signal][e][n]=0),t.signalI=L[t.signal][e][n]?L[t.signal][e][n]:0,t.posx=e,t.posy=n,L[t.signal][e][n]++}Number(v(-u));var Z=d3.max(n,function(t){return t.signalI});Z+=Z/2;var K=d3.zoom().scaleExtent([.5,Z]).extent([[0,0],[a,o]]).on("zoom",function(){if(null==(bt=d3.event?d3.event.transform.k:1))return;var n=d3.event.transform.rescaleX(v),i=d3.event.transform.rescaleY(m);_.call(x.scale(n)),w.call(b.scale(i)),t.styleAxis(v,m,x,b),st.attr("cx",function(t){return n(t.x)}).attr("cy",function(t){return i(t.y)}).style("visibility",function(t){return t.signalI%O<parseInt(bt)||0==t.signalI&&0==parseInt(bt)?"visible":"hidden"}),lt.attr("x",function(t){return n(t.x)+6}).attr("y",function(t){return i(t.y)+3.5}).style("visibility",function(t){var e="hidden";return t.signalI%O<parseInt(bt)||0==t.signalI&&0==parseInt(bt)?(t.status=1,e="visible"):t.status=0,e}),C.attr("y",i(l)-17).style("opacity",i(l)>o||i(l)-17<0?0:1),T.attr("y1",i(l)).attr("y2",i(l)).style("opacity",i(l)>o||i(l)<0?0:1),r.select(".x").selectAll(".tick").select("line").style("stroke","#8ccdfb").style("stroke-width","2px").attr("y2",function(t,e){return 0==Math.abs(Math.round(1e6*t)/1e6)?-o:0});var s=a/2+n(0)/2,u=i(l)/2-it,c=n(0)/2-rt,f=o/2+i(l)/2;for(var h in nt("#"+e+"-right-top-text",s<a/2?a/2:s,u>o/2?o/2:u),nt("#"+e+"-left-top-text",c>a/2?a/2:c,u>o/2?o/2:u),nt("#"+e+"-left-bottom-text",c>a/2?a/2:c,f<o/2?o/2:f),nt("#"+e+"-right-bottom-text",s<a/2?a/2:s,f<o/2?o/2:f),ut.x){var d=ut.x[h];N("#"+h,n(d),n(d),o,0,n(d)>a||n(d)<0?0:1)}for(var h in ut.y){var d=ut.y[h];N("#"+h,a,0,i(d),i(d),i(d)>o||i(d)<0?0:1)}for(var h in ct){var p=ct[h],g=L[p.key][p.i][p.j];"trend"==p.key&&S(n(p.xa),i(p.ya),g,h),"puberty"==p.key&&S(n(p.xb),i(p.ya),g,h),"decline"==p.key&&S(n(p.xb),i(p.yb),g,h),"emerging"==p.key&&S(n(p.xa),i(p.yb),g,h)}});r.append("rect").attr("width",a).attr("height",o).style("fill","none").style("pointer-events","all").call(K);var Q=r.append("g").attr("class","divideLine"),tt=r.append("g").attr("clip-path","url(#clip)").attr("class","divideText");r.append("defs").append("clipPath").attr("id","clip").append("rect").attr("width",a).attr("height",o),i.axis.path=i.axis&&i.axis.path?i.axis.path:"../images";var et=r.append("g").attr("clip-path","url(#clip)").attr("class","divideArea");function nt(t,e,n,r){et.select(t).attr("x",e).attr("y",n)}et.append("text").text("성숙").style("font-size","28px").style("fill","#e2e2e2").attr("width",50).attr("height",28).attr("id",e+"-left-top-text").attr("x",a/2/2).attr("y",m(l)/2-15),et.append("text").text("성장").style("font-size","28px").style("fill","#e2e2e2").attr("width",50).attr("height",28).attr("id",e+"-right-top-text").attr("x",a/2+a/2/2).attr("y",m(l)/2-15),et.append("text").text("신생").style("font-size","28px").style("fill","#e2e2e2").attr("width",50).attr("height",28).attr("id",e+"-right-bottom-text").attr("x",a/2+a/2/2).attr("y",o-m(l)/2-15),et.append("text").text("쇠퇴").style("font-size","28px").style("fill","#e2e2e2").attr("width",50).attr("height",28).attr("id",e+"-left-bottom-text").attr("x",a/2/2).attr("y",o-m(l)/2-15);var rt=50,it=28;r.select(".x").selectAll(".tick").select("line").style("stroke","#8ccdfb").style("stroke-width","2px").attr("y2",function(t,e){return 0==Math.abs(Math.round(1e6*t)/1e6)?-o:0});var at=r.append("g").attr("clip-path","url(#clip)").classed("points_g",!0),ot=d3.scaleLinear().domain(d3.extent(n,function(t){return+t.value})).range(i.node.range?i.node.range:[2,10]),st=at.selectAll("circle").data(n);st=st.enter().append("circle").attr("class",e+"-circle").attr("cx",function(t){return v(t.x)}).attr("cy",function(t){return m(t.y)}).attr("r",function(t){return t.value?t.r=ot(t.value):i.node.size?t.r=i.node.size:t.r=5,t.r}).style("visibility",function(t){return t.signalI%O==0?"visible":"hidden"}).style("fill",function(t){var e;switch(t.signal){case"puberty":e=i.node.color&&i.node.color[t.signal]?i.node.color[t.signal]:"#7247A3";break;case"trend":e=i.node.color&&i.node.color[t.signal]?i.node.color[t.signal]:"#E74549";break;case"decline":e=i.node.color&&i.node.color[t.signal]?i.node.color[t.signal]:"#B19787";break;case"emerging":e=i.node.color&&i.node.color[t.signal]?i.node.color[t.signal]:"#42866C"}return e}),this.setObject(st,i.node);var lt=at.selectAll("text").data(n);lt=lt.enter().append("text").attr("class",e+"-txt").attr("x",function(t){return v(t.x)+t.r+1}).attr("y",function(t){return m(t.y)+3.5}).style("visibility",function(t){var e="hidden";return t.signalI%O==0?(t.status=1,e="visible"):t.status=0,"number"==typeof L[t.signal][t.posx][t.posy]&&(L[t.signal][t.posx][t.posy]=[]),L[t.signal][t.posx][t.posy].push(t),e}).attr("font_family","sans-serif").attr("font-size","11px").style("cursor","default").text(function(t){return t.name}),this.setObject(lt,i.text);var ut={x:[],y:[]},ct={};for(Y=0;Y<z+30;Y++)for(q=0;q<z+30;q++){X=u/z*q,F=-u/z*q,$=l+(d-l)/z*Y,W=l-(l-h)/z*Y;if(0==Y){var ft=e+"-line-xb-"+Y+"-"+q,ht=e+"-line-xa-"+Y+"-"+q;ut.x[ft]=F,ut.x[ht]=X,E(ft,v(F),v(F),o,0,v(F)>a||v(F)<0?0:1),E(ht,v(X),v(X),o,0,v(X)>a||v(X)<0?0:1)}if(0==q){var dt=e+"-line-yb-"+Y+"-"+q,pt=e+"-line-ya-"+Y+"-"+q;ut.y[dt]=W,ut.y[pt]=$,E(dt,a,0,m(W),m(W),m(W)>o||m(W)<0?0:1),E(pt,a,0,m($),m($),m($)>o||m($)<0?0:1)}var gt=X+(u/z*(q+1)-X)/2,yt=F+(-u/z*(q+1)-F)/2,vt=$+(l+(d-l)/z*(Y+1)-$)/2,mt=W+(l-(l-h)/z*(Y+1)-W)/2;xt("trend",Y,q,gt,yt,vt,mt),xt("puberty",Y,q,gt,yt,vt,mt),xt("decline",Y,q,gt,yt,vt,mt),xt("emerging",Y,q,gt,yt,vt,mt)}function xt(t,n,r,i,a,o,s){var l=L[t];if(l[n]&&l[n][r]&&0!=l[n][r]){var u=e+"-"+t+"-"+n+"-"+r;ct[u]||(ct[u]={}),ct[u]={key:t,xa:i,xb:a,ya:o,yb:s,i:n,j:r},"trend"==t&&R(v(i),m(o),l[n][r],u),"puberty"==t&&R(v(a),m(o),l[n][r],u),"decline"==t&&R(v(a),m(s),l[n][r],u),"emerging"==t&&R(v(i),m(s),l[n][r],u)}}var bt=0}},A=function(){var t=this;this.type="rapid_table",this.draw=function(){var e=this.options.data,n=d3.select(this.element.selector).selectAll("div").data([0]).enter().append("div");this.options.tableClass.table?n.attr("class",this.options.tableClass.table):n.style("width",this.options.width+"px").style("height",this.options.height+"px").style("margin-top",this.options.margin.top+"px").style("margin-bottom",this.options.margin.bottom+"px").style("margin-left",this.options.margin.left+"px").style("margin-right",this.options.margin.right+"px").style("font-family","'맑은고딕', malgun gothic").style("font-size",this.options.fontSize+"px");var r=n.append("div");this.options.tableClass.div?r.attr("class",this.options.tableClass.div):r.style("position","relative").style("overflow","hidden").style("border","1px solid #d3d3d3").style("margin","0 0 19px 0").style("padding-top","18px");var i=r.append("h2").text(this.options.title);this.options.tableClass.h2?i.attr("class",this.options.tableClass.h2):i.style("position","relative").style("color","#555").style("font-weight","bold").style("font-size",this.options.fontSize+"px").style("margin","0").style("padding","0 0 0 10px").style("letter-spacing","-1px");var a=r.append("ol");for(var o in this.options.tableClass.ol||this.options.tableClass.ul?a.attr("class",this.options.tableClass.h2):a.style("position","relative").style("overflow","hidden").style("margin-left","0").style("padding","0px 0 18px 0"),e){if(10==o)break;var s=e[o],l=a.append("li");l.attr("class","li"+o),this.options.click&&l.on("click",function(){var n=d3.select(this).attr("class").replace("li",""),r=e[n];t.options.click(r)}),this.options.tableClass.li?l.attr("class",this.options.tableClass.h2):l.style("line-height","26px").style("position","relative").style("margin","0").style("padding","0 0 0 35px"),options.li&&t.setObject(l,options.li);var u=l.append("span");if(this.options.tableClass.rank)u.attr("class",this.options.tableClass.rank);else{u.style("display","inline-block").style("width","14px").style("height","14px").style("background","url("+this.options.imgPath+"ico_rank.gif) no-repeat 0 0").style("position","absolute").style("top","7px").style("left","12px");var c=-14*o;u.style("background-position","0 "+c+"px")}options.rank&&t.setObject(u,options.rank);var f=l.append("span").text(s.keyword);this.options.tableClass.keyword&&f.attr("class",this.options.tableClass.keyword),options.keyword&&t.setObject(f,options.keyword);var h=$.isNumeric(s.gap)?Math.abs(Number(s.gap)):"",d=l.append("span").text(h);this.options.tableClass.gap?(d.attr("class",this.options.tableClass.gap),(s.gap<0||"down"==s.gap)&&this.options.tableClass.down?d.attr("class",this.options.tableClass.down):s.gap>0||"up"==s.gap?d.style("background","url("+this.options.imgPath+"ico_rank_up.gif) no-repeat 1px 2px"):0===s.gap||"new"==s.gap?d.style("background","url("+this.options.imgPath+"ico_rank_new.gif) no-repeat 1px 2px"):""!==s.gap&&"keep"!=s.gap||d.style("background","url("+this.options.imgPath+"ico_rank_keep.gif) no-repeat 1px 3px")):(d.style("display","inline-block").style("width","40px").style("text-align","right").style("height","14px").style("line-height","14px").style("font-size",this.options.fontSize-1+"px").style("color","#666").style("position","absolute").style("top","6px").style("right","12px"),s.gap<0||"down"==s.gap?d.style("background","url("+this.options.imgPath+"ico_rank_down.gif) no-repeat 1px 3px"):s.gap>0||"up"==s.gap?d.style("background","url("+this.options.imgPath+"ico_rank_up.gif) no-repeat 1px 2px"):0===s.gap||"new"==s.gap?d.style("background","url("+this.options.imgPath+"ico_rank_new.gif) no-repeat 1px 2px"):""!==s.gap&&"keep"!=s.gap||d.style("background","url("+this.options.imgPath+"ico_rank_keep.gif) no-repeat 1px 3px")),options.gap&&t.setObject(d,options.gap)}}},T=function(){var t=this;this.type="geo_map",this.draw=function(){if(this.parseGroup(),"undefined"==typeof google){this._call({key:"AIzaSyAZFGCckCO_YJsQCjzVA3Pk62-dP6rPH1c"})}else t._draw()},this._call=function(e){$.ajax({url:"https://maps.googleapis.com/maps/api/js",data:e,dataType:"script",timeout:3e4,success:function(){t._draw()},error:function(t){}})},this.parseGroup=function(){var t=this.options.data,e=[],n=[],r=d3.map(),i=d3.map();for(var a in t){var o=t[a],s=o.x+"`"+o.y,l={};if(r.has(s)){for(var u in l.id=a,o){var c=u;"x"!=u&&"y"!=u||(c="p"+u),l[c]=o[u]}e.push(l),i.set(s,l)}else n.push(o),r.set(s,o)}for(var a in n){var f=n[a];if(i.has(f.x+"`"+f.y)){var h=r.get(f.x+"`"+f.y);l={};for(var u in h){c=u;"x"!=u&&"y"!=u||(c="p"+u),l[c]=h[u]}e.push(l),n.splice(a,1);break}}this.options.data={},this.options.data.list=n,this.options.data.group=e},this._draw=function(){var e=this.element[0].id,n=this.options,r=(n.type,n.width),i=n.height;n.margin;r=r-n.margin.left-n.margin.right,i=i-n.margin.bottom-n.margin.top;var a=n.data.list,o=n.data.group;n.padding=80+(this.isNull(n.padding)?0:n.padding);var s=n.padding;d3.select("#"+e).style("width",this.options.width+"px").style("height",this.options.height+"px").style("background-color",this.options.backgroundColor).style("margin-top",this.options.margin.top+"px").style("margin-bottom",this.options.margin.bottom+"px").style("margin-left",this.options.margin.left+"px").style("margin-right",this.options.margin.right+"px");var l=function(e){d3.select(d3.select(".cloud").parentNode).remove(),this._element=$('<div style="position:absolute;left:0;top:0;text-align:center;"></div>'),t.layer=d3.select(this._element[0]),this.setPosition(e.position),this.setMap(e.map||null)};(l.prototype=new google.maps.OverlayView).constructor=l,l.prototype.setPosition=function(t){this._position=t,this.draw()},l.prototype.getPosition=function(){return this._position},l.prototype.onAdd=function(){var t=this.getPanes().overlayLayer;this._element.appendTo(t)},l.prototype.draw=function(){if(this.getMap()){if(p.getZoom()<7)return $(".marker").hide(),void $(".cloud").hide();$(".marker").show(),$(".cloud").show(),t.drawText(a,n),t.drawCloud(o,n);var e=this.getProjection(),n=this.getPosition();e.fromLatLngToDivPixel(n);t.projection=e,d3.selectAll(".marker").each(function(t){var n=new google.maps.LatLng(t.x,t.y);return n=e.fromLatLngToDivPixel(n),d3.select(this).style("left",n.x-s+"px").style("top",n.y-s+"px")})}},l.prototype.onRemove=function(){this.getPanes().overlayLayer;this._element.remove(),this._element.off()};var u=[];d3.map(a,function(t){u.push(new google.maps.LatLng(t.x,t.y))});for(var c=new google.maps.LatLngBounds,f=0;f<u.length;f++)c.extend(u[f]);var h,d=new google.maps.LatLng(c.getCenter().lat(),c.getCenter().lng()),p=new google.maps.Map(d3.select(this.element.selector).node(),{});new l({map:p,position:d});n.zoom?(p.setZoom(n.zoom),p.setCenter(d)):p.fitBounds(c),n.center&&(d=new google.maps.LatLng(t.options.center[0],t.options.center[1]),p.setCenter(d));var g=n.fontRange,y=n.width,v=n.height;p.addListener("zoom_changed",function(){d3.selectAll(".marker").each(function(t){var e=d3.select(this).select("text"),r=Number(e.style("font-size").replace("px",""));!h||h>=p.getZoom()?r>7&&(r-=5):(r+=5,t.fontsize<r&&(r=t.fontsize)),e.style("font-size",r+"px").attr("x",function(t){var e=0;return t.name.length>=4&&r>40?e=(r-19)*(t.name.length-4):t.name.length<4&&r>55&&(e=r-50),s+n.map.x+e})}),function(){if(o.length>0){if(h==p.getZoom());else if(h>p.getZoom())n.width>21&&(y-=y/10,v-=v/10,g[0]=g[0]-5,g[1]=g[1]-5);else{v+=v/10,(y+=y/10)>n.width&&(y=n.width),v>n.height&&(v=n.height);for(var t=0;t<n.fontRange.length;t++)g[t]=g[t]+5,g[t]>=n.fontRange[t]&&(g[t]=n.fontRange[t])}n.fontZoomRange=g,n.zoomWidth=y,n.zoomHeight=v}}(),h=p.getZoom()})},this.drawCloud=function(e,n){if(!(e.length<=0)){var r=this.options,i=r.zoomWidth?r.zoomWidth:r.width;i/=2;var a=r.zoomHeight?r.zoomHeight:r.height;a/=2;var o=r.padding,s=r.fontRange,l=(r.color,d3.max(e,function(t){return Number(t.value)})),u=d3.min(e,function(t){return Number(t.value)});this.options.opacityDomain||(this.options.opacityDomain=[.6,.65,.75,.85,.95,1]);var c=[];for(var f in this.options.opacityDomain){var h=this.options.opacityDomain[f];0!=f?f!=this.options.opacityDomain.length-1?c.push(l*h):c.push(l):c.push(u)}r.fontZoomRange&&(s=r.fontZoomRange);var d=d3.scaleLinear().domain([u,l]).range(s),p=d3.scaleLinear().domain(c).range(this.options.opacityDomain),g=this.options.textPadding?this.options.textPadding:2;d3.layout.cloud().size([i,a]).timeInterval(20).words(e).padding(g).fontSize(function(t){return t.fontsize=d(+t.value),t.fontsize}).text(function(t){return t.name}).rotate(function(){return~~(2*Math.random())*t.options.rotate}).font(t.options.font).on("end",function(n){t.layer.select(".cloud").remove();s[1],s[0],e.length;if(150,t.layer.append("svg").style("position","absolute").attr("class","cloud").style("margin","0 auto").style("z-index",4).attr("width",i).attr("height",a).style("text-align","center").append("g").attr("transform","translate("+[i>>1,a>>1]+")").selectAll("text").data(n).enter().append("text").style("font-size",function(t){return t.fontsize=d(t.value),t.fontsize+"px"}).style("font-family",t.options.font).style("font-weight",600).style("fill",function(t,e){return t.color||(t.color=r.color(t.name)),t.color}).style("fill-opacity",function(t){return p(t.value)}).attr("text-anchor","middle").attr("transform",function(t){return"translate("+[t.x,t.y]+")rotate("+t.rotate+")"}).text(function(t){return t.name}).on("click",function(e){var n={};n.category=e.category,n.color=e.color,n.id=e.id,n.opacity=e.opacity,n.rotate=e.rotate,n.value=e.size,n.name=e.name,n.x=e.x,n.y=e.y,t.click(n)}),t.projection){var l=new google.maps.LatLng(e[0].px,e[0].py);l=t.projection.fromLatLngToDivPixel(l),t.layer.select(".cloud").style("left",l.x-o+"px").style("top",l.y-o+"px")}}).start(),d3.layout.cloud().stop()}},this.pad=function(t,e){return(t+="").length>=e?t:new Array(e-t.length+1).join("0")+t},this.drawText=function(e,n){var r=this.options,i=(r.width,r.height,r.color,d3.max(e,function(t){return Number(t.value)})),a=d3.min(e,function(t){return Number(t.value)}),o=d3.scaleLinear().domain([a,i]).range(this.options.fontRange),s=r.padding,l=t.layer.selectAll("svg").style("position","absolute").data(e).enter().append("svg").attr("class","marker");l.append("text").attr("class","text").style("text-anchor","middle").style("stroke",function(t){return t.color||(t.color=r.color(t.name)),t.color}).style("fill",function(t){return t.color||(t.color=r.color(t.name)),t.color}).style("fill-opacity",function(t){return t.opacity}).style("stroke-width",1.5).style("font-size",function(t){return t.fontsize=o(t.value),t.fontsize+"px"}).text(function(t){return t.name}).attr("x",function(t){var e=0;return t.name.length>=4&&t.fontsize>40?e=(t.fontsize-19)*(t.name.length-4):t.name.length<4&&t.fontsize>55&&(e=t.fontsize-50),s+r.map.x+e}).attr("y",function(t){return s+r.map.y}),l.attr("width",function(t){return t.fontsize*t.name.length+s})}},C=function(){var t=this;this.type="issue",this.draw=function(){var e=this.element[0].id,n=this.options,r=(this.config,n.data);width=n.width,height=n.height,margin=n.margin,width=width-n.margin.left-n.margin.right,height=height-n.margin.bottom-n.margin.top;var i=this.svg.attr("transform","translate("+margin.left+","+margin.top+")"),a=r.map(function(t){return t.date}),o=d3.extent(r,function(t){return+t.value});t.drawAxis(r,a,o);var s=this.xScale,l=this.yScale,u=this.xAxis,c=this.yAxis;this.x,this.y;this.styleAxis(s,l,u,c);var f=i.selectAll("."+e+"-layer").data(r).enter().append("g").attr("class",e+"-layer");f.append("rect").attr("id",function(t,n){return e+"-labels-rect-"+n}).attr("x",function(t){return s(t.date)+10}).attr("y",function(t){return l(t.value)}).attr("width",s.bandwidth()-20).attr("height",function(t){return 20}).style("fill","#fff").style("stroke",function(t,e){return t.color?t.color:n.color(e)}).style("stroke-width",2).attr("rx",3).attr("ry",3).on("mouseover",function(){labelsMouseover(this)}).on("mouseout",function(){labelsMouseout(this)});f.append("text").attr("class",e+"-labels-text").attr("id",function(t,n){return e+"-labels-text-"+n}).style("font-size","12px").text(function(t){return t.name}).attr("x",function(t,n){var r=d3.select("#"+e+"-labels-rect-"+n).node().getBBox(),i=d3.select(this).node().getBBox();return r.x+(r.width-i.width)/2}).attr("y",function(t,n){var r=d3.select("#"+e+"-labels-rect-"+n).node().getBBox();d3.select(this).node().getBBox();return l(t.value)+r.height/2+4})}},E=function(){this.type="linear_gradient",this.draw=function(){var t=this.element[0].id,e=this.options,n=(this.config,e.data);width=e.width,height=e.height,margin=e.margin,width=width-e.margin.left-e.margin.right,height=height-e.margin.bottom-e.margin.top;var r=[],i=[],a=[];for(var o in n)r.push(n[o].name),i.push(n[o].date),a.push(n[o].color);var s=this.svg.attr("transform","translate("+margin.left+","+margin.top+")"),l=d3.scaleBand().domain(i).range([0,width]),u=s.append("g").attr("class","axis").attr("transform","translate(0, "+height+")").call(d3.axisBottom(l));u.selectAll("path").style("stroke-width",0),u.selectAll("line").attr("y2",0),e.axis.text&&this.setObject(u.selectAll("text"),e.axis.text);var c=u.selectAll("g").append("g").attr("id",function(e,n){return t+"_rect_"+n}).attr("class",t+"_rect").on("mouseover",function(){d3.select(this).select("text").style("fill","#fff"),d3.select(this).select("rect").style("fill","#a0b7c8")}).on("mouseout",function(){"on"!=d3.select(this).attr("data-state")&&(d3.select(this).select("text").style("fill","#545454"),d3.select(this).select("rect").style("fill","#fff"))}),f=c.append("rect").attr("y",28).attr("height","28px").style("fill","#fff").style("stroke","#9da4bc").style("stroke-width",1).attr("rx",4).attr("ry",4);e.rect&&this.setObject(f,e.rect);var h=c.append("text").style("fill","#545454").style("font-size","12px").style("letter-spacing",0).style("font-family","'Malgun Gothic', Arial, sans-serif").text(function(t,e){return r[e]});e.text&&this.setObject(h,e.text),f.attr("x",function(t){return-(d3.select(this.parentNode).select("text").node().getBBox().width+26)/2}).attr("width",function(t){return d3.select(this.parentNode).select("text").node().getBBox().width+26}),h.attr("x",function(t){var e=d3.select(this.parentNode).select("rect").node().getBBox();return e.x+e.width/2}).attr("y",function(t){var e=d3.select(this.parentNode).select("rect").node().getBBox(),n=d3.select(this.parentNode).select("text").node().getBBox();return e.y+e.height-n.height/2-2}),e.click&&d3.selectAll(".tick").style("cursor","pointer").on("click",function(r,i){d3.selectAll("."+t+"_rect").each(function(t,e){d3.select(this).attr("data-state","").select("text").style("fill","#545454"),d3.select(this).attr("data-state","").select("rect").style("fill","#fff")}),d3.select("#"+t+"_rect_"+i).attr("data-state","on").select("text").style("fill","#fff"),d3.select("#"+t+"_rect_"+i).attr("data-state","on").select("rect").style("fill","#a0b7c8"),e.click(n[i])});var d=a.length>0?a:e.colorRange?e.colorRange:e.color.range(),p=d3.scaleLinear().range(d).domain(d3.keys(d)),g=s.append("defs").append("linearGradient").attr("id",t+"-linear-gradient"),y=e.rect&&e.rect.x?e.rect.x:50/d.length,v=0,m=100/d.length;for(var o in d)g.append("stop").attr("offset",v+y+"%").attr("stop-color",p(o)),v+=m;s.append("rect").attr("x",0).attr("y",0).attr("width",width).attr("height",height).style("fill","url(#"+t+"-linear-gradient)")}},N=function(){var t=this;this.type="dendrogram_bar",this.draw=function(){var e=this.element[0].id,n=this.options,r=(this.config,n.data);width=n.width,height=n.height,margin=n.margin,width=width-n.margin.left-n.margin.right,height=height-n.margin.bottom-n.margin.top;d3.select("#"+e).select("svg");var i=this.svg.attr("transform","translate("+margin.left+","+margin.top+")"),a=n.bar&&n.bar.margin&&n.bar.margin.right?n.bar.margin.right:30,o=d3.scaleLinear().domain([0,d3.max(r,function(t){return t.value})]).range([0,width/3-a]),s=d3.cluster().size([height,width-width/3]).separation(function(t,e){return t.parent==e.parent||t.parent.parent==e.parent||t.parent==e.parent.parent?.4:.8}),l=d3.stratify().parentId(function(t){return t.id.substring(0,t.id.lastIndexOf("."))})(r);s(l);var u=i.selectAll("."+e+"-link").data(l.descendants().slice(1)).enter().append("path").attr("class",e+"-link").attr("d",function(t){return"M"+t.y+","+t.x+"C"+(t.parent.y+100)+","+t.x+" "+(t.parent.y+100)+","+t.parent.x+" "+t.parent.y+","+t.parent.x}).styles({fill:"none",stroke:"#555","stroke-opacity":.4,"stroke-width":"1px"});n.link&&t.setObject(u,n.link),i.selectAll(".node").data(l.descendants()).enter().append("g").attr("class",function(t){return"node"+(t.children?" node--internal":" node--leaf")}).attr("transform",function(t){return"translate("+t.y+","+t.x+")"}).append("circle").attr("r",4);var c=i.selectAll(".node--leaf").append("g").attr("class","node--leaf-g").attr("transform","translate(8,-13)"),f=c.append("rect").attr("class","shadow").style("fill",function(t){return t.data.category?n.color(t.data.category):t.data.color?t.data.color:n.color(t.data.name)}).attr("width",2).attr("height",30).attr("rx",2).attr("ry",2).transition().duration(800).attr("width",function(t){return o(t.data.value)});n.bar&&t.setObject(f,n.bar);var h=c.append("text").attr("dy",19.5).attr("x",8).style("text-anchor","start").text(function(t){return t.data.id.substring(t.data.id.lastIndexOf(".")+1)}).styles({"font-family":'"Arial Black", Gadget, sans-serif',fill:"black","font-weight":"bold","font-size":"14px"});n.bar.text&&t.setObject(h,n.bar.text);var d=i.selectAll(".node--internal"),p=d.append("text").attr("y",-10).style("text-anchor","middle").text(function(t){return t.data.id.substring(t.data.id.lastIndexOf(".")+1)});n.node&&t.setObject(d,n.node),n.text&&t.setObject(p,n.text);var g=i.insert("g").attr("class","ballG").attr("transform","translate(1100,"+height/2+")");g.insert("circle").attr("class","shadow").style("fill","steelblue").attr("r",5),g.insert("text").style("text-anchor","middle").attr("dy",5).text("0.0"),d3.selectAll(".node--leaf-g").on("mouseover",function(t){d3.select(this).select("rect").attr("stroke","#4D4D4D").attr("stroke-width","2");var e=g.transition().duration(400).attr("transform","translate("+(t.y+o(t.data.value)+90)+","+(t.x+1.5)+")");e.select("circle").style("fill",function(){return t.data.category?n.color(t.data.category):t.data.color?t.data.color:n.color(t.data.name)}).attr("r",18),e.select("text").delay(300).text(Number(t.data.value))}).on("mouseout",function(){d3.select(this).select("rect").attr("stroke-width","0")})}};e.prototype=new t,n.prototype=new t,r.prototype=new t,i.prototype=new t,s.prototype=new t,l.prototype=new t,b.prototype=new t,u.prototype=new t,c.prototype=new t,f.prototype=new t,h.prototype=new t,A.prototype=new t,o.prototype=new t,a.prototype=new t,d.prototype=new t,_.prototype=new t,w.prototype=new t,k.prototype=new t,T.prototype=new t,p.prototype=new t,y.prototype=new t,g.prototype=new t,v.prototype=new t,m.prototype=new t,x.prototype=new t,b.prototype=new t,M.prototype=new t,C.prototype=new t,E.prototype=new t,N.prototype=new t,$.fn.visualization=function(t){var R,S=$.fn.visualization.defaults(),P=$.extend(!0,S,t),z=$.fn.visualization.config;$(this);switch(P.type){case z.CHART_TYPE_DENDROGRAM:R=new n;break;case z.CHART_TYPE_MULTI_LINE:case z.CHART_TYPE_LINE:R=new e;break;case z.CHART_TYPE_CLOUD:R=new r;break;case z.CHART_TYPE_PIE:R=new i;break;case z.CHART_TYPE_PROGRESS_DONUT:R=new a;break;case z.CHART_TYPE_DONUT:R=new o;break;case z.CHART_TYPE_RADAR:R=new d;break;case z.CHART_TYPE_RADAR_TABLE:R=new _;break;case z.CHART_TYPE_TREEMAP:R=new p;break;case z.CHART_TYPE_BUBBLE:R=P.group?new g:new y;break;case z.CHART_TYPE_HEATMAP:R=new v;break;case z.CHART_TYPE_HIERARCHY_TREE:R=new m;break;case z.CHART_TYPE_UPDATE_BAR:R=new x;break;case z.CHART_TYPE_HORIZONTAL_BAR:R=new b;break;case z.CHART_TYPE_BAR:R=new s;break;case z.CHART_TYPE_STACKED_BAR:R=new l;break;case z.CHART_TYPE_SCATTER:R=new c;break;case z.CHART_TYPE_SCATTER_BAND:R=new f;break;case z.CHART_TYPE_MAP:R=new w;break;case z.CHART_TYPE_WORLDMAP:R=new k;break;case z.CHART_TYPE_QUAD_SCATTER:R=new M;break;case z.CHART_TYPE_RAPID_TABLE:R=new A;break;case z.CHART_TYPE_TABLE:R=new h;break;case z.CHART_TYPE_NETWORKMAP:R=new u;break;case z.CHART_TYPE_GEO_MAP:R=new T;break;case z.CHART_TYPE_ISSUE:R=new C;break;case z.CHART_TYPE_LINEAR_GRADIENT:R=new E;break;case z.CHART_TYPE_DENDROGRAM_BAR:R=new N}this[0].innerHTML="",R.init(this,P,z),R.parseCSV(),R.parseJSON(),R.setColors(),R.render(),P.afterCall&&R.afterCall(),P.resize&&$(window).resize(function(){R.resize(),P.type!=z.CHART_TYPE_GEO_MAP&&R.render()})},$.fn.visualization.defaults=function(){var t={ticks:null,rotate:0,fontSize:null,tickSkip:null,padding:0,rotate:0,align:null,usePath:!0,grid:null,x:null,y:null,align:null,color:null,style:{},attr:{},line:{x:null,y:null,color:null,width:null,attr:null,style:null},name:null,inner:null},e={type:null,data:null,dataUrl:null,dataCsv:null,dataCsvUrl:null,dataRand:null,dataParams:null,dataType:null,click:null,color:null,collapse:{httpType:"POST",use:!1,data:null,dataUrl:null,dataParams:{},parser:null},x:0,y:0,opacityDomain:null,labels:{enabled:null,distance:0,over:!1,gap:0,inner:!0,size:null,length:null,suffix:""},node:{enabled:!0,over:!0,size:null,color:null},tooltip:JSON.parse(JSON.stringify({style:{},attr:{},enabled:!1,useHtml:!1,suffix:"",dateFormat:"",innerBox:!1,css:{opacity:.8,width:"auto",height:"auto",overflow:"hidden",position:"absolute",color:"#fff",margin:0,"background-color":"#0083DD","font-family":"Malgun Gothic","font-size":"12px","vertical-align":"top","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px","pointer-events":"none",p:"font-size:14px; padding-left:10px;",ul:"list-style:none;padding-left:2px;",li:"padding:2px 10px;","davif-icon":"padding-right:5px;font-size:10px;","davif-title1":"margin-right:30px;","davif-title2":"float:right;"},x:0,y:0,html:null,textFunc:null,isabsolute:null})),tickSuffix:"",tickNagative:!1,dateFormat:"",inputFormat:null,depthLength:null,margin:{top:0,right:0,bottom:0,left:0},font:"Malgun Gothic",backgroundColor:null,fontColor:null,width:null,height:null,focusRectX:{fill:"#e4eaf3",opacity:.2},tickSkip:1,x:JSON.parse(JSON.stringify(t)),y:JSON.parse(JSON.stringify(t)),line:{style:{},width:1,maxPoint:!0,maxPointAll:!0},icon:{use:!0,type:"circle",size:3,hoverSize:5},font:{size:10,color:"#6A7C87",opacity:1,align:"center",style:{}},node:{style:{}},colorRange:null,valueRange:null,text:{style:{}},donut:{innerRadius:0,outerRadius:0},legend:{use:null},cloud:{spiral:"archimedean"},map:JSON.parse(JSON.stringify({back:null})),axis:{inner:null,text:{style:{}}},legend:JSON.parse(JSON.stringify({type:null,x:0,y:0,margin:{}})),tableClass:JSON.parse(JSON.stringify({table:"",tr:"",tr_header:"davif-header-row",tr_row:"davif-row",td:"davif-cell",th:"davif-header",div:"",h2:"",ol:"",ul:"",li:"",up:"",down:"",keep:"",new:"",rank:"",keyword:"",gap:""})),defaultCss:!0,link:{},resize:!1};return e.y.right=JSON.parse(JSON.stringify(t)),e.y.right.padding={},e},$.fn.visualization.config={MEDIA_TYPE_ALL_NAME:"전체",MEDIA_TYPE_TWITTER_NAME:"트위터",MEDIA_TYPE_FACEBOOK_NAME:"페이스북",MEDIA_TYPE_BLOG_NAME:"블로그",MEDIA_TYPE_NEWS_NAME:"뉴스",MEDIA_TYPE_COMMUNITY_NAME:"커뮤니티",MEDIA_TYPE_ALL:"all",MEDIA_TYPE_TWITTER:"twitter",MEDIA_TYPE_FACEBOOK:"facebook",MEDIA_TYPE_BLOG:"blog",MEDIA_TYPE_NEWS:"news",MEDIA_TYPE_COMMUNITY:"community",SENTIMENT_TYPE_ALL:"all",SENTIMENT_TYPE_POSITIVE:"positive",SENTIMENT_TYPE_NEUTRAL:"neutral",SENTIMENT_TYPE_NEUTRALITY:"neutrality",SENTIMENT_TYPE_NEGATIVE:"negative",SENTIMENT_TYPE_OBJECTIVE:"objective",SENTIMENT_TYPE_OBJECT:"object",SENTIMENT_TYPE_ALL_NAME:"전체",SENTIMENT_TYPE_POSITIVE_NAME:"긍정",SENTIMENT_TYPE_NEUTRAL_NAME:"중립",SENTIMENT_TYPE_NEGATIVE_NAME:"부정",SENTIMENT_TYPE_OBJECT_NAME:"객관",TYPE_ALL:"all",TYPE_ALL_NAME:"전체",CHART_TYPE_LINE:"line",CHART_TYPE_MULTI_LINE:"multiline",CHART_TYPE_PIE:"pie",CHART_TYPE_UPDATE_BAR:"update_bar",CHART_TYPE_BAR:"bar",CHART_TYPE_STACKED_BAR:"stackedbar",CHART_TYPE_GROUPED_BAR:"groupedbar",CHART_TYPE_HORIZONTAL_BAR:"horizontal_bar",CHART_TYPE_HORIZONTAL_STACKED_BAR:"horizontal_stackedbar",CHART_TYPE_HORIZONTAL_GROUPED_BAR:"horizontal_groupedbar",CHART_TYPE_CLOUD:"cloud",CHART_TYPE_EXPLORER:"explorer",CHART_TYPE_DENDROGRAM:"dendrogram",CHART_TYPE_NETWORKMAP:"networkmap",CHART_TYPE_NETWORKMAP_RANK:"networkmap_rank",CHART_TYPE_NETWORK_DIAGRAM:"network_diagram",CHART_TYPE_CHORD_DIAGRAM:"chord_diagram",CHART_TYPE_SCATTER:"scatter",CHART_TYPE_SCATTER_BAND:"scatter_band",CHART_TYPE_TABLE:"table",CHART_TYPE_RAPID_TABLE:"rapid_table",CHART_TYPE_PROGRESS_DONUT:"progress_donut",CHART_TYPE_DONUT:"donut",CHART_TYPE_RADAR:"radar",CHART_TYPE_RADAR_TABLE:"radar_table",CHART_TYPE_BUBBLE_PIE:"bubble_pie",CHART_TYPE_MAP:"map",CHART_TYPE_WORLDMAP:"world_map",CHART_TYPE_GEO_MAP:"geo_map",CHART_TYPE_TREEMAP:"treemap",CHART_TYPE_PARALLEL_COORDINATES:"parallel_coordinates",CHART_TYPE_BUBBLE:"bubble",CHART_TYPE_HEATMAP:"heatmap",CHART_TYPE_HIERARCHY_TREE:"hierarchy_tree",CHART_TYPE_QUAD_SCATTER:"quad_scatter",CHART_TYPE_ISSUE:"issue",CHART_TYPE_LINEAR_GRADIENT:"linear_gradient",CHART_TYPE_DENDROGRAM_BAR:"dendrogram_bar",DATA_TYPE_JSON:"json",DATA_TYPE_CSV:"csv",DATA_TYPE_RAND:"random"},$.fn.visualization.Constructor=t}();